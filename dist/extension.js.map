{"version":3,"file":"extension.js","mappings":"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","sources":["webpack://grammar-proofreading-extension/webpack/runtime/require chunk loading","webpack://grammar-proofreading-extension/./src/services/CorrectionService.ts","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/vocabularies/applicator/properties.js","webpack://grammar-proofreading-extension/external node-commonjs \"buffer\"","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/compile/validate/dataType.js","webpack://grammar-proofreading-extension/./node_modules/fast-uri/lib/schemes.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/compile/rules.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/vocabularies/validation/pattern.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/vocabularies/applicator/items.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/vocabularies/validation/uniqueItems.js","webpack://grammar-proofreading-extension/./src/models/CorrectionType.ts","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/vocabularies/validation/limitItems.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/vocabularies/applicator/if.js","webpack://grammar-proofreading-extension/external commonjs \"vscode\"","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/compile/codegen/code.js","webpack://grammar-proofreading-extension/external node-commonjs \"node:process\"","webpack://grammar-proofreading-extension/./node_modules/fast-deep-equal/index.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/compile/names.js","webpack://grammar-proofreading-extension/external node-commonjs \"node:http\"","webpack://grammar-proofreading-extension/external node-commonjs \"node:https\"","webpack://grammar-proofreading-extension/external node-commonjs \"node:zlib\"","webpack://grammar-proofreading-extension/external node-commonjs \"node:stream\"","webpack://grammar-proofreading-extension/external node-commonjs \"node:buffer\"","webpack://grammar-proofreading-extension/external node-commonjs \"node:util\"","webpack://grammar-proofreading-extension/./node_modules/node-fetch/src/errors/base.js","webpack://grammar-proofreading-extension/./node_modules/node-fetch/src/errors/fetch-error.js","webpack://grammar-proofreading-extension/./node_modules/node-fetch/src/utils/is.js","webpack://grammar-proofreading-extension/./node_modules/node-fetch/src/body.js","webpack://grammar-proofreading-extension/./node_modules/node-fetch/src/headers.js","webpack://grammar-proofreading-extension/./node_modules/node-fetch/src/utils/is-redirect.js","webpack://grammar-proofreading-extension/./node_modules/node-fetch/src/response.js","webpack://grammar-proofreading-extension/external node-commonjs \"node:url\"","webpack://grammar-proofreading-extension/external node-commonjs \"node:net\"","webpack://grammar-proofreading-extension/./node_modules/node-fetch/src/utils/referrer.js","webpack://grammar-proofreading-extension/./node_modules/node-fetch/src/request.js","webpack://grammar-proofreading-extension/./node_modules/node-fetch/src/errors/abort-error.js","webpack://grammar-proofreading-extension/./node_modules/node-fetch/src/index.js","webpack://grammar-proofreading-extension/./node_modules/node-fetch/src/utils/get-search.js","webpack://grammar-proofreading-extension/./node_modules/data-uri-to-buffer/dist/index.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/vocabularies/core/index.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/compile/validate/index.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/vocabularies/applicator/contains.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/vocabularies/applicator/dependencies.js","webpack://grammar-proofreading-extension/./src/services/LLMApiClient.ts","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/ajv.js","webpack://grammar-proofreading-extension/./node_modules/fetch-blob/streams.cjs","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/vocabularies/validation/multipleOf.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/vocabularies/core/id.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/runtime/validation_error.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/compile/validate/keyword.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/vocabularies/core/ref.js","webpack://grammar-proofreading-extension/./node_modules/fetch-blob/index.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/compile/index.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/runtime/ucs2length.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/vocabularies/applicator/items2020.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/vocabularies/validation/required.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/core.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/compile/util.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/vocabularies/applicator/thenElse.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/vocabularies/validation/limitProperties.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/compile/validate/subschema.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/compile/ref_error.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/vocabularies/format/format.js","webpack://grammar-proofreading-extension/./src/services/ValidationService.ts","webpack://grammar-proofreading-extension/./node_modules/fast-uri/lib/utils.js","webpack://grammar-proofreading-extension/./node_modules/web-streams-polyfill/dist/ponyfill.es2018.js","webpack://grammar-proofreading-extension/./node_modules/node-domexception/index.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/vocabularies/applicator/patternProperties.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/vocabularies/applicator/prefixItems.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/vocabularies/applicator/additionalItems.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/vocabularies/code.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/vocabularies/applicator/allOf.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/vocabularies/validation/limitNumber.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/runtime/uri.js","webpack://grammar-proofreading-extension/./src/services/TextProcessor.ts","webpack://grammar-proofreading-extension/./src/services/ResponseParser.ts","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/vocabularies/draft7.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/vocabularies/applicator/oneOf.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/runtime/equal.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/vocabularies/applicator/index.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/vocabularies/applicator/anyOf.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/vocabularies/discriminator/index.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/compile/resolve.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/vocabularies/validation/index.js","webpack://grammar-proofreading-extension/./node_modules/json-schema-traverse/index.js","webpack://grammar-proofreading-extension/./node_modules/fetch-blob/file.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/vocabularies/validation/limitLength.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/vocabularies/format/index.js","webpack://grammar-proofreading-extension/./src/services/PromptManager.ts","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/vocabularies/discriminator/types.js","webpack://grammar-proofreading-extension/./src/schemas/correctionResponseSchema.ts","webpack://grammar-proofreading-extension/external node-commonjs \"node:stream/web\"","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/compile/codegen/scope.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/compile/validate/defaults.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/compile/validate/applicability.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/vocabularies/applicator/not.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/vocabularies/validation/const.js","webpack://grammar-proofreading-extension/./src/ui/ExtensionActivator.ts","webpack://grammar-proofreading-extension/external node-commonjs \"worker_threads\"","webpack://grammar-proofreading-extension/./src/services/RequestBuilder.ts","webpack://grammar-proofreading-extension/./node_modules/fast-uri/index.js","webpack://grammar-proofreading-extension/./node_modules/formdata-polyfill/esm.min.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/vocabularies/validation/enum.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/vocabularies/applicator/additionalProperties.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/compile/errors.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/compile/validate/boolSchema.js","webpack://grammar-proofreading-extension/./src/ui/StatusBarManager.ts","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/compile/codegen/index.js","webpack://grammar-proofreading-extension/./src/ui/CommandRegistry.ts","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/vocabularies/applicator/propertyNames.js","webpack://grammar-proofreading-extension/./src/services/ConfigurationProvider.ts","webpack://grammar-proofreading-extension/external node-commonjs \"node:fs\"","webpack://grammar-proofreading-extension/external node-commonjs \"node:path\"","webpack://grammar-proofreading-extension/./node_modules/fetch-blob/from.js","webpack://grammar-proofreading-extension/./node_modules/ajv/dist/vocabularies/metadata.js","webpack://grammar-proofreading-extension/webpack/bootstrap","webpack://grammar-proofreading-extension/webpack/runtime/define property getters","webpack://grammar-proofreading-extension/webpack/runtime/ensure chunk","webpack://grammar-proofreading-extension/webpack/runtime/get javascript chunk filename","webpack://grammar-proofreading-extension/webpack/runtime/hasOwnProperty shorthand","webpack://grammar-proofreading-extension/webpack/runtime/make namespace object","webpack://grammar-proofreading-extension/./src/extension.ts"],"sourcesContent":["// no baseURI\n\n// object to store loaded chunks\n// \"1\" means \"loaded\", otherwise not loaded yet\nvar installedChunks = {\n\t792: 1\n};\n\n// no on chunks loaded\n\nvar installChunk = (chunk) => {\n\tvar moreModules = chunk.modules, chunkIds = chunk.ids, runtime = chunk.runtime;\n\tfor(var moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\tfor(var i = 0; i < chunkIds.length; i++)\n\t\tinstalledChunks[chunkIds[i]] = 1;\n\n};\n\n// require() chunk loading for javascript\n__webpack_require__.f.require = (chunkId, promises) => {\n\t// \"1\" is the signal for \"already loaded\"\n\tif(!installedChunks[chunkId]) {\n\t\tif(true) { // all chunks have JS\n\t\t\tvar installedChunk = require(\"./\" + __webpack_require__.u(chunkId));\n\t\t\tif (!installedChunks[chunkId]) {\n\t\t\t\tinstallChunk(installedChunk);\n\t\t\t}\n\t\t} else installedChunks[chunkId] = 1;\n\t}\n};\n\n// no external install chunk\n\n// no HMR\n\n// no HMR manifest","import * as vscode from 'vscode';\nimport { CorrectionType } from '../models/CorrectionType';\nimport { CorrectionRequest } from '../models/CorrectionRequest';\nimport { CorrectionResponse } from '../models/CorrectionResponse';\nimport { ConfigurationProvider } from './ConfigurationProvider';\nimport { TextProcessor } from './TextProcessor';\nimport { LLMApiClient } from './LLMApiClient';\nimport { PromptManager } from './PromptManager';\n\nexport class CorrectionService {\n    private configProvider: ConfigurationProvider;\n    private textProcessor: TextProcessor;\n    private apiClient: LLMApiClient;\n    private promptManager: PromptManager;\n\n    constructor() {\n        this.configProvider = new ConfigurationProvider();\n        this.textProcessor = new TextProcessor();\n        this.apiClient = new LLMApiClient();\n        this.promptManager = new PromptManager();\n    }\n\n    async performCorrection(correctionType: CorrectionType, customPrompt?: string): Promise<{ success: boolean; error?: string }> {\n        try {\n            // Get configuration\n            const config = this.configProvider.getConfiguration();\n            const configValidation = this.configProvider.validateConfiguration(config);\n            \n            if (!configValidation.isValid) {\n                return { \n                    success: false, \n                    error: `Configuration error: ${configValidation.errors.join(', ')}` \n                };\n            }\n\n            // Capture text from editor\n            const textCapture = this.textProcessor.captureEditorText();\n            if (!textCapture.success) {\n                return { success: false, error: textCapture.error };\n            }\n\n            // Show progress\n            return await vscode.window.withProgress({\n                location: vscode.ProgressLocation.Notification,\n                title: `Applying ${correctionType} correction...`,\n                cancellable: false\n            }, async (progress) => {\n                progress.report({ increment: 25, message: 'Preparing request...' });\n\n                // Build correction request\n                const prompt = customPrompt || this.promptManager.getPrompt(correctionType);\n                const correctionRequest: CorrectionRequest = {\n                    text: textCapture.text!,\n                    prompt,\n                    correctionType,\n                    apiEndpoint: config.apiEndpoint,\n                    apiKey: config.apiKey\n                };\n\n                progress.report({ increment: 25, message: 'Sending to API...' });\n\n                // Send to API\n                const apiResult = await this.apiClient.sendCorrectionRequest(correctionRequest, config);\n                if (!apiResult.success) {\n                    return { success: false, error: apiResult.error };\n                }\n\n                progress.report({ increment: 25, message: 'Processing response...' });\n\n                // Replace text in editor\n                const replaceResult = await this.textProcessor.replaceEditorText(apiResult.data!.correctedText);\n                if (!replaceResult.success) {\n                    return { success: false, error: replaceResult.error };\n                }\n\n                progress.report({ increment: 25, message: 'Showing explanation...' });\n\n                // Show explanation\n                await this.showCorrectionExplanation(apiResult.data!);\n\n                return { success: true };\n            });\n\n        } catch (error) {\n            return { \n                success: false, \n                error: error instanceof Error ? error.message : 'Unknown error occurred' \n            };\n        }\n    }\n\n    private async showCorrectionExplanation(response: CorrectionResponse): Promise<void> {\n        let message = `Correction completed!\\n\\n${response.explanation}`;\n        \n        if (response.changes && response.changes.length > 0) {\n            message += '\\n\\nKey changes made:';\n            response.changes.slice(0, 3).forEach((change, index) => {\n                message += `\\n${index + 1}. \"${change.original}\"  \"${change.corrected}\" (${change.reason})`;\n            });\n            \n            if (response.changes.length > 3) {\n                message += `\\n... and ${response.changes.length - 3} more changes`;\n            }\n        }\n\n        if (response.confidence !== undefined) {\n            message += `\\n\\nConfidence: ${Math.round(response.confidence * 100)}%`;\n        }\n\n        const action = await vscode.window.showInformationMessage(\n            message,\n            { modal: false },\n            'OK',\n            'Undo Changes'\n        );\n\n        if (action === 'Undo Changes') {\n            await vscode.commands.executeCommand('undo');\n        }\n    }\n\n    getPromptForCorrectionType(correctionType: CorrectionType): string {\n        return this.promptManager.getPrompt(correctionType);\n    }\n\n    async updateDefaultPrompt(correctionType: CorrectionType, prompt: string): Promise<{ success: boolean; error?: string }> {\n        return await this.promptManager.updateDefaultPrompt(correctionType, prompt);\n    }\n\n    async resetDefaultPrompt(correctionType: CorrectionType): Promise<{ success: boolean; error?: string }> {\n        return await this.promptManager.resetDefaultPrompt(correctionType);\n    }\n}","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst validate_1 = require(\"../../compile/validate\");\nconst code_1 = require(\"../code\");\nconst util_1 = require(\"../../compile/util\");\nconst additionalProperties_1 = require(\"./additionalProperties\");\nconst def = {\n    keyword: \"properties\",\n    type: \"object\",\n    schemaType: \"object\",\n    code(cxt) {\n        const { gen, schema, parentSchema, data, it } = cxt;\n        if (it.opts.removeAdditional === \"all\" && parentSchema.additionalProperties === undefined) {\n            additionalProperties_1.default.code(new validate_1.KeywordCxt(it, additionalProperties_1.default, \"additionalProperties\"));\n        }\n        const allProps = (0, code_1.allSchemaProperties)(schema);\n        for (const prop of allProps) {\n            it.definedProperties.add(prop);\n        }\n        if (it.opts.unevaluated && allProps.length && it.props !== true) {\n            it.props = util_1.mergeEvaluated.props(gen, (0, util_1.toHash)(allProps), it.props);\n        }\n        const properties = allProps.filter((p) => !(0, util_1.alwaysValidSchema)(it, schema[p]));\n        if (properties.length === 0)\n            return;\n        const valid = gen.name(\"valid\");\n        for (const prop of properties) {\n            if (hasDefault(prop)) {\n                applyPropertySchema(prop);\n            }\n            else {\n                gen.if((0, code_1.propertyInData)(gen, data, prop, it.opts.ownProperties));\n                applyPropertySchema(prop);\n                if (!it.allErrors)\n                    gen.else().var(valid, true);\n                gen.endIf();\n            }\n            cxt.it.definedProperties.add(prop);\n            cxt.ok(valid);\n        }\n        function hasDefault(prop) {\n            return it.opts.useDefaults && !it.compositeRule && schema[prop].default !== undefined;\n        }\n        function applyPropertySchema(prop) {\n            cxt.subschema({\n                keyword: \"properties\",\n                schemaProp: prop,\n                dataProp: prop,\n            }, valid);\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=properties.js.map","module.exports = require(\"buffer\");","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.reportTypeError = exports.checkDataTypes = exports.checkDataType = exports.coerceAndCheckDataType = exports.getJSONTypes = exports.getSchemaTypes = exports.DataType = void 0;\nconst rules_1 = require(\"../rules\");\nconst applicability_1 = require(\"./applicability\");\nconst errors_1 = require(\"../errors\");\nconst codegen_1 = require(\"../codegen\");\nconst util_1 = require(\"../util\");\nvar DataType;\n(function (DataType) {\n    DataType[DataType[\"Correct\"] = 0] = \"Correct\";\n    DataType[DataType[\"Wrong\"] = 1] = \"Wrong\";\n})(DataType || (exports.DataType = DataType = {}));\nfunction getSchemaTypes(schema) {\n    const types = getJSONTypes(schema.type);\n    const hasNull = types.includes(\"null\");\n    if (hasNull) {\n        if (schema.nullable === false)\n            throw new Error(\"type: null contradicts nullable: false\");\n    }\n    else {\n        if (!types.length && schema.nullable !== undefined) {\n            throw new Error('\"nullable\" cannot be used without \"type\"');\n        }\n        if (schema.nullable === true)\n            types.push(\"null\");\n    }\n    return types;\n}\nexports.getSchemaTypes = getSchemaTypes;\n// eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents\nfunction getJSONTypes(ts) {\n    const types = Array.isArray(ts) ? ts : ts ? [ts] : [];\n    if (types.every(rules_1.isJSONType))\n        return types;\n    throw new Error(\"type must be JSONType or JSONType[]: \" + types.join(\",\"));\n}\nexports.getJSONTypes = getJSONTypes;\nfunction coerceAndCheckDataType(it, types) {\n    const { gen, data, opts } = it;\n    const coerceTo = coerceToTypes(types, opts.coerceTypes);\n    const checkTypes = types.length > 0 &&\n        !(coerceTo.length === 0 && types.length === 1 && (0, applicability_1.schemaHasRulesForType)(it, types[0]));\n    if (checkTypes) {\n        const wrongType = checkDataTypes(types, data, opts.strictNumbers, DataType.Wrong);\n        gen.if(wrongType, () => {\n            if (coerceTo.length)\n                coerceData(it, types, coerceTo);\n            else\n                reportTypeError(it);\n        });\n    }\n    return checkTypes;\n}\nexports.coerceAndCheckDataType = coerceAndCheckDataType;\nconst COERCIBLE = new Set([\"string\", \"number\", \"integer\", \"boolean\", \"null\"]);\nfunction coerceToTypes(types, coerceTypes) {\n    return coerceTypes\n        ? types.filter((t) => COERCIBLE.has(t) || (coerceTypes === \"array\" && t === \"array\"))\n        : [];\n}\nfunction coerceData(it, types, coerceTo) {\n    const { gen, data, opts } = it;\n    const dataType = gen.let(\"dataType\", (0, codegen_1._) `typeof ${data}`);\n    const coerced = gen.let(\"coerced\", (0, codegen_1._) `undefined`);\n    if (opts.coerceTypes === \"array\") {\n        gen.if((0, codegen_1._) `${dataType} == 'object' && Array.isArray(${data}) && ${data}.length == 1`, () => gen\n            .assign(data, (0, codegen_1._) `${data}[0]`)\n            .assign(dataType, (0, codegen_1._) `typeof ${data}`)\n            .if(checkDataTypes(types, data, opts.strictNumbers), () => gen.assign(coerced, data)));\n    }\n    gen.if((0, codegen_1._) `${coerced} !== undefined`);\n    for (const t of coerceTo) {\n        if (COERCIBLE.has(t) || (t === \"array\" && opts.coerceTypes === \"array\")) {\n            coerceSpecificType(t);\n        }\n    }\n    gen.else();\n    reportTypeError(it);\n    gen.endIf();\n    gen.if((0, codegen_1._) `${coerced} !== undefined`, () => {\n        gen.assign(data, coerced);\n        assignParentData(it, coerced);\n    });\n    function coerceSpecificType(t) {\n        switch (t) {\n            case \"string\":\n                gen\n                    .elseIf((0, codegen_1._) `${dataType} == \"number\" || ${dataType} == \"boolean\"`)\n                    .assign(coerced, (0, codegen_1._) `\"\" + ${data}`)\n                    .elseIf((0, codegen_1._) `${data} === null`)\n                    .assign(coerced, (0, codegen_1._) `\"\"`);\n                return;\n            case \"number\":\n                gen\n                    .elseIf((0, codegen_1._) `${dataType} == \"boolean\" || ${data} === null\n              || (${dataType} == \"string\" && ${data} && ${data} == +${data})`)\n                    .assign(coerced, (0, codegen_1._) `+${data}`);\n                return;\n            case \"integer\":\n                gen\n                    .elseIf((0, codegen_1._) `${dataType} === \"boolean\" || ${data} === null\n              || (${dataType} === \"string\" && ${data} && ${data} == +${data} && !(${data} % 1))`)\n                    .assign(coerced, (0, codegen_1._) `+${data}`);\n                return;\n            case \"boolean\":\n                gen\n                    .elseIf((0, codegen_1._) `${data} === \"false\" || ${data} === 0 || ${data} === null`)\n                    .assign(coerced, false)\n                    .elseIf((0, codegen_1._) `${data} === \"true\" || ${data} === 1`)\n                    .assign(coerced, true);\n                return;\n            case \"null\":\n                gen.elseIf((0, codegen_1._) `${data} === \"\" || ${data} === 0 || ${data} === false`);\n                gen.assign(coerced, null);\n                return;\n            case \"array\":\n                gen\n                    .elseIf((0, codegen_1._) `${dataType} === \"string\" || ${dataType} === \"number\"\n              || ${dataType} === \"boolean\" || ${data} === null`)\n                    .assign(coerced, (0, codegen_1._) `[${data}]`);\n        }\n    }\n}\nfunction assignParentData({ gen, parentData, parentDataProperty }, expr) {\n    // TODO use gen.property\n    gen.if((0, codegen_1._) `${parentData} !== undefined`, () => gen.assign((0, codegen_1._) `${parentData}[${parentDataProperty}]`, expr));\n}\nfunction checkDataType(dataType, data, strictNums, correct = DataType.Correct) {\n    const EQ = correct === DataType.Correct ? codegen_1.operators.EQ : codegen_1.operators.NEQ;\n    let cond;\n    switch (dataType) {\n        case \"null\":\n            return (0, codegen_1._) `${data} ${EQ} null`;\n        case \"array\":\n            cond = (0, codegen_1._) `Array.isArray(${data})`;\n            break;\n        case \"object\":\n            cond = (0, codegen_1._) `${data} && typeof ${data} == \"object\" && !Array.isArray(${data})`;\n            break;\n        case \"integer\":\n            cond = numCond((0, codegen_1._) `!(${data} % 1) && !isNaN(${data})`);\n            break;\n        case \"number\":\n            cond = numCond();\n            break;\n        default:\n            return (0, codegen_1._) `typeof ${data} ${EQ} ${dataType}`;\n    }\n    return correct === DataType.Correct ? cond : (0, codegen_1.not)(cond);\n    function numCond(_cond = codegen_1.nil) {\n        return (0, codegen_1.and)((0, codegen_1._) `typeof ${data} == \"number\"`, _cond, strictNums ? (0, codegen_1._) `isFinite(${data})` : codegen_1.nil);\n    }\n}\nexports.checkDataType = checkDataType;\nfunction checkDataTypes(dataTypes, data, strictNums, correct) {\n    if (dataTypes.length === 1) {\n        return checkDataType(dataTypes[0], data, strictNums, correct);\n    }\n    let cond;\n    const types = (0, util_1.toHash)(dataTypes);\n    if (types.array && types.object) {\n        const notObj = (0, codegen_1._) `typeof ${data} != \"object\"`;\n        cond = types.null ? notObj : (0, codegen_1._) `!${data} || ${notObj}`;\n        delete types.null;\n        delete types.array;\n        delete types.object;\n    }\n    else {\n        cond = codegen_1.nil;\n    }\n    if (types.number)\n        delete types.integer;\n    for (const t in types)\n        cond = (0, codegen_1.and)(cond, checkDataType(t, data, strictNums, correct));\n    return cond;\n}\nexports.checkDataTypes = checkDataTypes;\nconst typeError = {\n    message: ({ schema }) => `must be ${schema}`,\n    params: ({ schema, schemaValue }) => typeof schema == \"string\" ? (0, codegen_1._) `{type: ${schema}}` : (0, codegen_1._) `{type: ${schemaValue}}`,\n};\nfunction reportTypeError(it) {\n    const cxt = getTypeErrorContext(it);\n    (0, errors_1.reportError)(cxt, typeError);\n}\nexports.reportTypeError = reportTypeError;\nfunction getTypeErrorContext(it) {\n    const { gen, data, schema } = it;\n    const schemaCode = (0, util_1.schemaRefOrVal)(it, schema, \"type\");\n    return {\n        gen,\n        keyword: \"type\",\n        data,\n        schema: schema.type,\n        schemaCode,\n        schemaValue: schemaCode,\n        parentSchema: schema,\n        params: {},\n        it,\n    };\n}\n//# sourceMappingURL=dataType.js.map","'use strict'\n\nconst { isUUID } = require('./utils')\nconst URN_REG = /([\\da-z][\\d\\-a-z]{0,31}):((?:[\\w!$'()*+,\\-.:;=@]|%[\\da-f]{2})+)/iu\n\nconst supportedSchemeNames = /** @type {const} */ (['http', 'https', 'ws',\n  'wss', 'urn', 'urn:uuid'])\n\n/** @typedef {supportedSchemeNames[number]} SchemeName */\n\n/**\n * @param {string} name\n * @returns {name is SchemeName}\n */\nfunction isValidSchemeName (name) {\n  return supportedSchemeNames.indexOf(/** @type {*} */ (name)) !== -1\n}\n\n/**\n * @callback SchemeFn\n * @param {import('../types/index').URIComponent} component\n * @param {import('../types/index').Options} options\n * @returns {import('../types/index').URIComponent}\n */\n\n/**\n * @typedef {Object} SchemeHandler\n * @property {SchemeName} scheme - The scheme name.\n * @property {boolean} [domainHost] - Indicates if the scheme supports domain hosts.\n * @property {SchemeFn} parse - Function to parse the URI component for this scheme.\n * @property {SchemeFn} serialize - Function to serialize the URI component for this scheme.\n * @property {boolean} [skipNormalize] - Indicates if normalization should be skipped for this scheme.\n * @property {boolean} [absolutePath] - Indicates if the scheme uses absolute paths.\n * @property {boolean} [unicodeSupport] - Indicates if the scheme supports Unicode.\n */\n\n/**\n * @param {import('../types/index').URIComponent} wsComponent\n * @returns {boolean}\n */\nfunction wsIsSecure (wsComponent) {\n  if (wsComponent.secure === true) {\n    return true\n  } else if (wsComponent.secure === false) {\n    return false\n  } else if (wsComponent.scheme) {\n    return (\n      wsComponent.scheme.length === 3 &&\n      (wsComponent.scheme[0] === 'w' || wsComponent.scheme[0] === 'W') &&\n      (wsComponent.scheme[1] === 's' || wsComponent.scheme[1] === 'S') &&\n      (wsComponent.scheme[2] === 's' || wsComponent.scheme[2] === 'S')\n    )\n  } else {\n    return false\n  }\n}\n\n/** @type {SchemeFn} */\nfunction httpParse (component) {\n  if (!component.host) {\n    component.error = component.error || 'HTTP URIs must have a host.'\n  }\n\n  return component\n}\n\n/** @type {SchemeFn} */\nfunction httpSerialize (component) {\n  const secure = String(component.scheme).toLowerCase() === 'https'\n\n  // normalize the default port\n  if (component.port === (secure ? 443 : 80) || component.port === '') {\n    component.port = undefined\n  }\n\n  // normalize the empty path\n  if (!component.path) {\n    component.path = '/'\n  }\n\n  // NOTE: We do not parse query strings for HTTP URIs\n  // as WWW Form Url Encoded query strings are part of the HTML4+ spec,\n  // and not the HTTP spec.\n\n  return component\n}\n\n/** @type {SchemeFn} */\nfunction wsParse (wsComponent) {\n// indicate if the secure flag is set\n  wsComponent.secure = wsIsSecure(wsComponent)\n\n  // construct resouce name\n  wsComponent.resourceName = (wsComponent.path || '/') + (wsComponent.query ? '?' + wsComponent.query : '')\n  wsComponent.path = undefined\n  wsComponent.query = undefined\n\n  return wsComponent\n}\n\n/** @type {SchemeFn} */\nfunction wsSerialize (wsComponent) {\n// normalize the default port\n  if (wsComponent.port === (wsIsSecure(wsComponent) ? 443 : 80) || wsComponent.port === '') {\n    wsComponent.port = undefined\n  }\n\n  // ensure scheme matches secure flag\n  if (typeof wsComponent.secure === 'boolean') {\n    wsComponent.scheme = (wsComponent.secure ? 'wss' : 'ws')\n    wsComponent.secure = undefined\n  }\n\n  // reconstruct path from resource name\n  if (wsComponent.resourceName) {\n    const [path, query] = wsComponent.resourceName.split('?')\n    wsComponent.path = (path && path !== '/' ? path : undefined)\n    wsComponent.query = query\n    wsComponent.resourceName = undefined\n  }\n\n  // forbid fragment component\n  wsComponent.fragment = undefined\n\n  return wsComponent\n}\n\n/** @type {SchemeFn} */\nfunction urnParse (urnComponent, options) {\n  if (!urnComponent.path) {\n    urnComponent.error = 'URN can not be parsed'\n    return urnComponent\n  }\n  const matches = urnComponent.path.match(URN_REG)\n  if (matches) {\n    const scheme = options.scheme || urnComponent.scheme || 'urn'\n    urnComponent.nid = matches[1].toLowerCase()\n    urnComponent.nss = matches[2]\n    const urnScheme = `${scheme}:${options.nid || urnComponent.nid}`\n    const schemeHandler = getSchemeHandler(urnScheme)\n    urnComponent.path = undefined\n\n    if (schemeHandler) {\n      urnComponent = schemeHandler.parse(urnComponent, options)\n    }\n  } else {\n    urnComponent.error = urnComponent.error || 'URN can not be parsed.'\n  }\n\n  return urnComponent\n}\n\n/** @type {SchemeFn} */\nfunction urnSerialize (urnComponent, options) {\n  if (urnComponent.nid === undefined) {\n    throw new Error('URN without nid cannot be serialized')\n  }\n  const scheme = options.scheme || urnComponent.scheme || 'urn'\n  const nid = urnComponent.nid.toLowerCase()\n  const urnScheme = `${scheme}:${options.nid || nid}`\n  const schemeHandler = getSchemeHandler(urnScheme)\n\n  if (schemeHandler) {\n    urnComponent = schemeHandler.serialize(urnComponent, options)\n  }\n\n  const uriComponent = urnComponent\n  const nss = urnComponent.nss\n  uriComponent.path = `${nid || options.nid}:${nss}`\n\n  options.skipEscape = true\n  return uriComponent\n}\n\n/** @type {SchemeFn} */\nfunction urnuuidParse (urnComponent, options) {\n  const uuidComponent = urnComponent\n  uuidComponent.uuid = uuidComponent.nss\n  uuidComponent.nss = undefined\n\n  if (!options.tolerant && (!uuidComponent.uuid || !isUUID(uuidComponent.uuid))) {\n    uuidComponent.error = uuidComponent.error || 'UUID is not valid.'\n  }\n\n  return uuidComponent\n}\n\n/** @type {SchemeFn} */\nfunction urnuuidSerialize (uuidComponent) {\n  const urnComponent = uuidComponent\n  // normalize UUID\n  urnComponent.nss = (uuidComponent.uuid || '').toLowerCase()\n  return urnComponent\n}\n\nconst http = /** @type {SchemeHandler} */ ({\n  scheme: 'http',\n  domainHost: true,\n  parse: httpParse,\n  serialize: httpSerialize\n})\n\nconst https = /** @type {SchemeHandler} */ ({\n  scheme: 'https',\n  domainHost: http.domainHost,\n  parse: httpParse,\n  serialize: httpSerialize\n})\n\nconst ws = /** @type {SchemeHandler} */ ({\n  scheme: 'ws',\n  domainHost: true,\n  parse: wsParse,\n  serialize: wsSerialize\n})\n\nconst wss = /** @type {SchemeHandler} */ ({\n  scheme: 'wss',\n  domainHost: ws.domainHost,\n  parse: ws.parse,\n  serialize: ws.serialize\n})\n\nconst urn = /** @type {SchemeHandler} */ ({\n  scheme: 'urn',\n  parse: urnParse,\n  serialize: urnSerialize,\n  skipNormalize: true\n})\n\nconst urnuuid = /** @type {SchemeHandler} */ ({\n  scheme: 'urn:uuid',\n  parse: urnuuidParse,\n  serialize: urnuuidSerialize,\n  skipNormalize: true\n})\n\nconst SCHEMES = /** @type {Record<SchemeName, SchemeHandler>} */ ({\n  http,\n  https,\n  ws,\n  wss,\n  urn,\n  'urn:uuid': urnuuid\n})\n\nObject.setPrototypeOf(SCHEMES, null)\n\n/**\n * @param {string|undefined} scheme\n * @returns {SchemeHandler|undefined}\n */\nfunction getSchemeHandler (scheme) {\n  return (\n    scheme && (\n      SCHEMES[/** @type {SchemeName} */ (scheme)] ||\n      SCHEMES[/** @type {SchemeName} */(scheme.toLowerCase())])\n  ) ||\n    undefined\n}\n\nmodule.exports = {\n  wsIsSecure,\n  SCHEMES,\n  isValidSchemeName,\n  getSchemeHandler,\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getRules = exports.isJSONType = void 0;\nconst _jsonTypes = [\"string\", \"number\", \"integer\", \"boolean\", \"null\", \"object\", \"array\"];\nconst jsonTypes = new Set(_jsonTypes);\nfunction isJSONType(x) {\n    return typeof x == \"string\" && jsonTypes.has(x);\n}\nexports.isJSONType = isJSONType;\nfunction getRules() {\n    const groups = {\n        number: { type: \"number\", rules: [] },\n        string: { type: \"string\", rules: [] },\n        array: { type: \"array\", rules: [] },\n        object: { type: \"object\", rules: [] },\n    };\n    return {\n        types: { ...groups, integer: true, boolean: true, null: true },\n        rules: [{ rules: [] }, groups.number, groups.string, groups.array, groups.object],\n        post: { rules: [] },\n        all: {},\n        keywords: {},\n    };\n}\nexports.getRules = getRules;\n//# sourceMappingURL=rules.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message: ({ schemaCode }) => (0, codegen_1.str) `must match pattern \"${schemaCode}\"`,\n    params: ({ schemaCode }) => (0, codegen_1._) `{pattern: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"pattern\",\n    type: \"string\",\n    schemaType: \"string\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { data, $data, schema, schemaCode, it } = cxt;\n        // TODO regexp should be wrapped in try/catchs\n        const u = it.opts.unicodeRegExp ? \"u\" : \"\";\n        const regExp = $data ? (0, codegen_1._) `(new RegExp(${schemaCode}, ${u}))` : (0, code_1.usePattern)(cxt, schema);\n        cxt.fail$data((0, codegen_1._) `!${regExp}.test(${data})`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=pattern.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateTuple = void 0;\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst code_1 = require(\"../code\");\nconst def = {\n    keyword: \"items\",\n    type: \"array\",\n    schemaType: [\"object\", \"array\", \"boolean\"],\n    before: \"uniqueItems\",\n    code(cxt) {\n        const { schema, it } = cxt;\n        if (Array.isArray(schema))\n            return validateTuple(cxt, \"additionalItems\", schema);\n        it.items = true;\n        if ((0, util_1.alwaysValidSchema)(it, schema))\n            return;\n        cxt.ok((0, code_1.validateArray)(cxt));\n    },\n};\nfunction validateTuple(cxt, extraItems, schArr = cxt.schema) {\n    const { gen, parentSchema, data, keyword, it } = cxt;\n    checkStrictTuple(parentSchema);\n    if (it.opts.unevaluated && schArr.length && it.items !== true) {\n        it.items = util_1.mergeEvaluated.items(gen, schArr.length, it.items);\n    }\n    const valid = gen.name(\"valid\");\n    const len = gen.const(\"len\", (0, codegen_1._) `${data}.length`);\n    schArr.forEach((sch, i) => {\n        if ((0, util_1.alwaysValidSchema)(it, sch))\n            return;\n        gen.if((0, codegen_1._) `${len} > ${i}`, () => cxt.subschema({\n            keyword,\n            schemaProp: i,\n            dataProp: i,\n        }, valid));\n        cxt.ok(valid);\n    });\n    function checkStrictTuple(sch) {\n        const { opts, errSchemaPath } = it;\n        const l = schArr.length;\n        const fullTuple = l === sch.minItems && (l === sch.maxItems || sch[extraItems] === false);\n        if (opts.strictTuples && !fullTuple) {\n            const msg = `\"${keyword}\" is ${l}-tuple, but minItems or maxItems/${extraItems} are not specified or different at path \"${errSchemaPath}\"`;\n            (0, util_1.checkStrictMode)(it, msg, opts.strictTuples);\n        }\n    }\n}\nexports.validateTuple = validateTuple;\nexports.default = def;\n//# sourceMappingURL=items.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst dataType_1 = require(\"../../compile/validate/dataType\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst equal_1 = require(\"../../runtime/equal\");\nconst error = {\n    message: ({ params: { i, j } }) => (0, codegen_1.str) `must NOT have duplicate items (items ## ${j} and ${i} are identical)`,\n    params: ({ params: { i, j } }) => (0, codegen_1._) `{i: ${i}, j: ${j}}`,\n};\nconst def = {\n    keyword: \"uniqueItems\",\n    type: \"array\",\n    schemaType: \"boolean\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, data, $data, schema, parentSchema, schemaCode, it } = cxt;\n        if (!$data && !schema)\n            return;\n        const valid = gen.let(\"valid\");\n        const itemTypes = parentSchema.items ? (0, dataType_1.getSchemaTypes)(parentSchema.items) : [];\n        cxt.block$data(valid, validateUniqueItems, (0, codegen_1._) `${schemaCode} === false`);\n        cxt.ok(valid);\n        function validateUniqueItems() {\n            const i = gen.let(\"i\", (0, codegen_1._) `${data}.length`);\n            const j = gen.let(\"j\");\n            cxt.setParams({ i, j });\n            gen.assign(valid, true);\n            gen.if((0, codegen_1._) `${i} > 1`, () => (canOptimize() ? loopN : loopN2)(i, j));\n        }\n        function canOptimize() {\n            return itemTypes.length > 0 && !itemTypes.some((t) => t === \"object\" || t === \"array\");\n        }\n        function loopN(i, j) {\n            const item = gen.name(\"item\");\n            const wrongType = (0, dataType_1.checkDataTypes)(itemTypes, item, it.opts.strictNumbers, dataType_1.DataType.Wrong);\n            const indices = gen.const(\"indices\", (0, codegen_1._) `{}`);\n            gen.for((0, codegen_1._) `;${i}--;`, () => {\n                gen.let(item, (0, codegen_1._) `${data}[${i}]`);\n                gen.if(wrongType, (0, codegen_1._) `continue`);\n                if (itemTypes.length > 1)\n                    gen.if((0, codegen_1._) `typeof ${item} == \"string\"`, (0, codegen_1._) `${item} += \"_\"`);\n                gen\n                    .if((0, codegen_1._) `typeof ${indices}[${item}] == \"number\"`, () => {\n                    gen.assign(j, (0, codegen_1._) `${indices}[${item}]`);\n                    cxt.error();\n                    gen.assign(valid, false).break();\n                })\n                    .code((0, codegen_1._) `${indices}[${item}] = ${i}`);\n            });\n        }\n        function loopN2(i, j) {\n            const eql = (0, util_1.useFunc)(gen, equal_1.default);\n            const outer = gen.name(\"outer\");\n            gen.label(outer).for((0, codegen_1._) `;${i}--;`, () => gen.for((0, codegen_1._) `${j} = ${i}; ${j}--;`, () => gen.if((0, codegen_1._) `${eql}(${data}[${i}], ${data}[${j}])`, () => {\n                cxt.error();\n                gen.assign(valid, false).break(outer);\n            })));\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=uniqueItems.js.map","export enum CorrectionType {\n    GRAMMAR = \"grammar\",\n    STYLE = \"style\", \n    CLARITY = \"clarity\",\n    TONE = \"tone\",\n    CUSTOM = \"custom\"\n}","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message({ keyword, schemaCode }) {\n        const comp = keyword === \"maxItems\" ? \"more\" : \"fewer\";\n        return (0, codegen_1.str) `must NOT have ${comp} than ${schemaCode} items`;\n    },\n    params: ({ schemaCode }) => (0, codegen_1._) `{limit: ${schemaCode}}`,\n};\nconst def = {\n    keyword: [\"maxItems\", \"minItems\"],\n    type: \"array\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { keyword, data, schemaCode } = cxt;\n        const op = keyword === \"maxItems\" ? codegen_1.operators.GT : codegen_1.operators.LT;\n        cxt.fail$data((0, codegen_1._) `${data}.length ${op} ${schemaCode}`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=limitItems.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params }) => (0, codegen_1.str) `must match \"${params.ifClause}\" schema`,\n    params: ({ params }) => (0, codegen_1._) `{failingKeyword: ${params.ifClause}}`,\n};\nconst def = {\n    keyword: \"if\",\n    schemaType: [\"object\", \"boolean\"],\n    trackErrors: true,\n    error,\n    code(cxt) {\n        const { gen, parentSchema, it } = cxt;\n        if (parentSchema.then === undefined && parentSchema.else === undefined) {\n            (0, util_1.checkStrictMode)(it, '\"if\" without \"then\" and \"else\" is ignored');\n        }\n        const hasThen = hasSchema(it, \"then\");\n        const hasElse = hasSchema(it, \"else\");\n        if (!hasThen && !hasElse)\n            return;\n        const valid = gen.let(\"valid\", true);\n        const schValid = gen.name(\"_valid\");\n        validateIf();\n        cxt.reset();\n        if (hasThen && hasElse) {\n            const ifClause = gen.let(\"ifClause\");\n            cxt.setParams({ ifClause });\n            gen.if(schValid, validateClause(\"then\", ifClause), validateClause(\"else\", ifClause));\n        }\n        else if (hasThen) {\n            gen.if(schValid, validateClause(\"then\"));\n        }\n        else {\n            gen.if((0, codegen_1.not)(schValid), validateClause(\"else\"));\n        }\n        cxt.pass(valid, () => cxt.error(true));\n        function validateIf() {\n            const schCxt = cxt.subschema({\n                keyword: \"if\",\n                compositeRule: true,\n                createErrors: false,\n                allErrors: false,\n            }, schValid);\n            cxt.mergeEvaluated(schCxt);\n        }\n        function validateClause(keyword, ifClause) {\n            return () => {\n                const schCxt = cxt.subschema({ keyword }, schValid);\n                gen.assign(valid, schValid);\n                cxt.mergeValidEvaluated(schCxt, valid);\n                if (ifClause)\n                    gen.assign(ifClause, (0, codegen_1._) `${keyword}`);\n                else\n                    cxt.setParams({ ifClause: keyword });\n            };\n        }\n    },\n};\nfunction hasSchema(it, keyword) {\n    const schema = it.schema[keyword];\n    return schema !== undefined && !(0, util_1.alwaysValidSchema)(it, schema);\n}\nexports.default = def;\n//# sourceMappingURL=if.js.map","module.exports = require(\"vscode\");","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.regexpCode = exports.getEsmExportName = exports.getProperty = exports.safeStringify = exports.stringify = exports.strConcat = exports.addCodeArg = exports.str = exports._ = exports.nil = exports._Code = exports.Name = exports.IDENTIFIER = exports._CodeOrName = void 0;\n// eslint-disable-next-line @typescript-eslint/no-extraneous-class\nclass _CodeOrName {\n}\nexports._CodeOrName = _CodeOrName;\nexports.IDENTIFIER = /^[a-z$_][a-z$_0-9]*$/i;\nclass Name extends _CodeOrName {\n    constructor(s) {\n        super();\n        if (!exports.IDENTIFIER.test(s))\n            throw new Error(\"CodeGen: name must be a valid identifier\");\n        this.str = s;\n    }\n    toString() {\n        return this.str;\n    }\n    emptyStr() {\n        return false;\n    }\n    get names() {\n        return { [this.str]: 1 };\n    }\n}\nexports.Name = Name;\nclass _Code extends _CodeOrName {\n    constructor(code) {\n        super();\n        this._items = typeof code === \"string\" ? [code] : code;\n    }\n    toString() {\n        return this.str;\n    }\n    emptyStr() {\n        if (this._items.length > 1)\n            return false;\n        const item = this._items[0];\n        return item === \"\" || item === '\"\"';\n    }\n    get str() {\n        var _a;\n        return ((_a = this._str) !== null && _a !== void 0 ? _a : (this._str = this._items.reduce((s, c) => `${s}${c}`, \"\")));\n    }\n    get names() {\n        var _a;\n        return ((_a = this._names) !== null && _a !== void 0 ? _a : (this._names = this._items.reduce((names, c) => {\n            if (c instanceof Name)\n                names[c.str] = (names[c.str] || 0) + 1;\n            return names;\n        }, {})));\n    }\n}\nexports._Code = _Code;\nexports.nil = new _Code(\"\");\nfunction _(strs, ...args) {\n    const code = [strs[0]];\n    let i = 0;\n    while (i < args.length) {\n        addCodeArg(code, args[i]);\n        code.push(strs[++i]);\n    }\n    return new _Code(code);\n}\nexports._ = _;\nconst plus = new _Code(\"+\");\nfunction str(strs, ...args) {\n    const expr = [safeStringify(strs[0])];\n    let i = 0;\n    while (i < args.length) {\n        expr.push(plus);\n        addCodeArg(expr, args[i]);\n        expr.push(plus, safeStringify(strs[++i]));\n    }\n    optimize(expr);\n    return new _Code(expr);\n}\nexports.str = str;\nfunction addCodeArg(code, arg) {\n    if (arg instanceof _Code)\n        code.push(...arg._items);\n    else if (arg instanceof Name)\n        code.push(arg);\n    else\n        code.push(interpolate(arg));\n}\nexports.addCodeArg = addCodeArg;\nfunction optimize(expr) {\n    let i = 1;\n    while (i < expr.length - 1) {\n        if (expr[i] === plus) {\n            const res = mergeExprItems(expr[i - 1], expr[i + 1]);\n            if (res !== undefined) {\n                expr.splice(i - 1, 3, res);\n                continue;\n            }\n            expr[i++] = \"+\";\n        }\n        i++;\n    }\n}\nfunction mergeExprItems(a, b) {\n    if (b === '\"\"')\n        return a;\n    if (a === '\"\"')\n        return b;\n    if (typeof a == \"string\") {\n        if (b instanceof Name || a[a.length - 1] !== '\"')\n            return;\n        if (typeof b != \"string\")\n            return `${a.slice(0, -1)}${b}\"`;\n        if (b[0] === '\"')\n            return a.slice(0, -1) + b.slice(1);\n        return;\n    }\n    if (typeof b == \"string\" && b[0] === '\"' && !(a instanceof Name))\n        return `\"${a}${b.slice(1)}`;\n    return;\n}\nfunction strConcat(c1, c2) {\n    return c2.emptyStr() ? c1 : c1.emptyStr() ? c2 : str `${c1}${c2}`;\n}\nexports.strConcat = strConcat;\n// TODO do not allow arrays here\nfunction interpolate(x) {\n    return typeof x == \"number\" || typeof x == \"boolean\" || x === null\n        ? x\n        : safeStringify(Array.isArray(x) ? x.join(\",\") : x);\n}\nfunction stringify(x) {\n    return new _Code(safeStringify(x));\n}\nexports.stringify = stringify;\nfunction safeStringify(x) {\n    return JSON.stringify(x)\n        .replace(/\\u2028/g, \"\\\\u2028\")\n        .replace(/\\u2029/g, \"\\\\u2029\");\n}\nexports.safeStringify = safeStringify;\nfunction getProperty(key) {\n    return typeof key == \"string\" && exports.IDENTIFIER.test(key) ? new _Code(`.${key}`) : _ `[${key}]`;\n}\nexports.getProperty = getProperty;\n//Does best effort to format the name properly\nfunction getEsmExportName(key) {\n    if (typeof key == \"string\" && exports.IDENTIFIER.test(key)) {\n        return new _Code(`${key}`);\n    }\n    throw new Error(`CodeGen: invalid export name: ${key}, use explicit $id name mapping`);\n}\nexports.getEsmExportName = getEsmExportName;\nfunction regexpCode(rx) {\n    return new _Code(rx.toString());\n}\nexports.regexpCode = regexpCode;\n//# sourceMappingURL=code.js.map","module.exports = require(\"node:process\");","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"./codegen\");\nconst names = {\n    // validation function arguments\n    data: new codegen_1.Name(\"data\"), // data passed to validation function\n    // args passed from referencing schema\n    valCxt: new codegen_1.Name(\"valCxt\"), // validation/data context - should not be used directly, it is destructured to the names below\n    instancePath: new codegen_1.Name(\"instancePath\"),\n    parentData: new codegen_1.Name(\"parentData\"),\n    parentDataProperty: new codegen_1.Name(\"parentDataProperty\"),\n    rootData: new codegen_1.Name(\"rootData\"), // root data - same as the data passed to the first/top validation function\n    dynamicAnchors: new codegen_1.Name(\"dynamicAnchors\"), // used to support recursiveRef and dynamicRef\n    // function scoped variables\n    vErrors: new codegen_1.Name(\"vErrors\"), // null or array of validation errors\n    errors: new codegen_1.Name(\"errors\"), // counter of validation errors\n    this: new codegen_1.Name(\"this\"),\n    // \"globals\"\n    self: new codegen_1.Name(\"self\"),\n    scope: new codegen_1.Name(\"scope\"),\n    // JTD serialize/parse name for JSON string and position\n    json: new codegen_1.Name(\"json\"),\n    jsonPos: new codegen_1.Name(\"jsonPos\"),\n    jsonLen: new codegen_1.Name(\"jsonLen\"),\n    jsonPart: new codegen_1.Name(\"jsonPart\"),\n};\nexports.default = names;\n//# sourceMappingURL=names.js.map","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"node:http\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"node:https\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"node:zlib\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"node:stream\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"node:buffer\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"node:util\");","export class FetchBaseError extends Error {\n\tconstructor(message, type) {\n\t\tsuper(message);\n\t\t// Hide custom error implementation details from end-users\n\t\tError.captureStackTrace(this, this.constructor);\n\n\t\tthis.type = type;\n\t}\n\n\tget name() {\n\t\treturn this.constructor.name;\n\t}\n\n\tget [Symbol.toStringTag]() {\n\t\treturn this.constructor.name;\n\t}\n}\n","\nimport {FetchBaseError} from './base.js';\n\n/**\n * @typedef {{ address?: string, code: string, dest?: string, errno: number, info?: object, message: string, path?: string, port?: number, syscall: string}} SystemError\n*/\n\n/**\n * FetchError interface for operational errors\n */\nexport class FetchError extends FetchBaseError {\n\t/**\n\t * @param  {string} message -      Error message for human\n\t * @param  {string} [type] -        Error type for machine\n\t * @param  {SystemError} [systemError] - For Node.js system error\n\t */\n\tconstructor(message, type, systemError) {\n\t\tsuper(message, type);\n\t\t// When err.type is `system`, err.erroredSysCall contains system error and err.code contains system error code\n\t\tif (systemError) {\n\t\t\t// eslint-disable-next-line no-multi-assign\n\t\t\tthis.code = this.errno = systemError.code;\n\t\t\tthis.erroredSysCall = systemError.syscall;\n\t\t}\n\t}\n}\n","/**\n * Is.js\n *\n * Object type checks.\n */\n\nconst NAME = Symbol.toStringTag;\n\n/**\n * Check if `obj` is a URLSearchParams object\n * ref: https://github.com/node-fetch/node-fetch/issues/296#issuecomment-307598143\n * @param {*} object - Object to check for\n * @return {boolean}\n */\nexport const isURLSearchParameters = object => {\n\treturn (\n\t\ttypeof object === 'object' &&\n\t\ttypeof object.append === 'function' &&\n\t\ttypeof object.delete === 'function' &&\n\t\ttypeof object.get === 'function' &&\n\t\ttypeof object.getAll === 'function' &&\n\t\ttypeof object.has === 'function' &&\n\t\ttypeof object.set === 'function' &&\n\t\ttypeof object.sort === 'function' &&\n\t\tobject[NAME] === 'URLSearchParams'\n\t);\n};\n\n/**\n * Check if `object` is a W3C `Blob` object (which `File` inherits from)\n * @param {*} object - Object to check for\n * @return {boolean}\n */\nexport const isBlob = object => {\n\treturn (\n\t\tobject &&\n\t\ttypeof object === 'object' &&\n\t\ttypeof object.arrayBuffer === 'function' &&\n\t\ttypeof object.type === 'string' &&\n\t\ttypeof object.stream === 'function' &&\n\t\ttypeof object.constructor === 'function' &&\n\t\t/^(Blob|File)$/.test(object[NAME])\n\t);\n};\n\n/**\n * Check if `obj` is an instance of AbortSignal.\n * @param {*} object - Object to check for\n * @return {boolean}\n */\nexport const isAbortSignal = object => {\n\treturn (\n\t\ttypeof object === 'object' && (\n\t\t\tobject[NAME] === 'AbortSignal' ||\n\t\t\tobject[NAME] === 'EventTarget'\n\t\t)\n\t);\n};\n\n/**\n * isDomainOrSubdomain reports whether sub is a subdomain (or exact match) of\n * the parent domain.\n *\n * Both domains must already be in canonical form.\n * @param {string|URL} original\n * @param {string|URL} destination\n */\nexport const isDomainOrSubdomain = (destination, original) => {\n\tconst orig = new URL(original).hostname;\n\tconst dest = new URL(destination).hostname;\n\n\treturn orig === dest || orig.endsWith(`.${dest}`);\n};\n\n/**\n * isSameProtocol reports whether the two provided URLs use the same protocol.\n *\n * Both domains must already be in canonical form.\n * @param {string|URL} original\n * @param {string|URL} destination\n */\nexport const isSameProtocol = (destination, original) => {\n\tconst orig = new URL(original).protocol;\n\tconst dest = new URL(destination).protocol;\n\n\treturn orig === dest;\n};\n","\n/**\n * Body.js\n *\n * Body interface provides common methods for Request and Response\n */\n\nimport Stream, {PassThrough} from 'node:stream';\nimport {types, deprecate, promisify} from 'node:util';\nimport {Buffer} from 'node:buffer';\n\nimport Blob from 'fetch-blob';\nimport {FormData, formDataToBlob} from 'formdata-polyfill/esm.min.js';\n\nimport {FetchError} from './errors/fetch-error.js';\nimport {FetchBaseError} from './errors/base.js';\nimport {isBlob, isURLSearchParameters} from './utils/is.js';\n\nconst pipeline = promisify(Stream.pipeline);\nconst INTERNALS = Symbol('Body internals');\n\n/**\n * Body mixin\n *\n * Ref: https://fetch.spec.whatwg.org/#body\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nexport default class Body {\n\tconstructor(body, {\n\t\tsize = 0\n\t} = {}) {\n\t\tlet boundary = null;\n\n\t\tif (body === null) {\n\t\t\t// Body is undefined or null\n\t\t\tbody = null;\n\t\t} else if (isURLSearchParameters(body)) {\n\t\t\t// Body is a URLSearchParams\n\t\t\tbody = Buffer.from(body.toString());\n\t\t} else if (isBlob(body)) {\n\t\t\t// Body is blob\n\t\t} else if (Buffer.isBuffer(body)) {\n\t\t\t// Body is Buffer\n\t\t} else if (types.isAnyArrayBuffer(body)) {\n\t\t\t// Body is ArrayBuffer\n\t\t\tbody = Buffer.from(body);\n\t\t} else if (ArrayBuffer.isView(body)) {\n\t\t\t// Body is ArrayBufferView\n\t\t\tbody = Buffer.from(body.buffer, body.byteOffset, body.byteLength);\n\t\t} else if (body instanceof Stream) {\n\t\t\t// Body is stream\n\t\t} else if (body instanceof FormData) {\n\t\t\t// Body is FormData\n\t\t\tbody = formDataToBlob(body);\n\t\t\tboundary = body.type.split('=')[1];\n\t\t} else {\n\t\t\t// None of the above\n\t\t\t// coerce to string then buffer\n\t\t\tbody = Buffer.from(String(body));\n\t\t}\n\n\t\tlet stream = body;\n\n\t\tif (Buffer.isBuffer(body)) {\n\t\t\tstream = Stream.Readable.from(body);\n\t\t} else if (isBlob(body)) {\n\t\t\tstream = Stream.Readable.from(body.stream());\n\t\t}\n\n\t\tthis[INTERNALS] = {\n\t\t\tbody,\n\t\t\tstream,\n\t\t\tboundary,\n\t\t\tdisturbed: false,\n\t\t\terror: null\n\t\t};\n\t\tthis.size = size;\n\n\t\tif (body instanceof Stream) {\n\t\t\tbody.on('error', error_ => {\n\t\t\t\tconst error = error_ instanceof FetchBaseError ?\n\t\t\t\t\terror_ :\n\t\t\t\t\tnew FetchError(`Invalid response body while trying to fetch ${this.url}: ${error_.message}`, 'system', error_);\n\t\t\t\tthis[INTERNALS].error = error;\n\t\t\t});\n\t\t}\n\t}\n\n\tget body() {\n\t\treturn this[INTERNALS].stream;\n\t}\n\n\tget bodyUsed() {\n\t\treturn this[INTERNALS].disturbed;\n\t}\n\n\t/**\n\t * Decode response as ArrayBuffer\n\t *\n\t * @return  Promise\n\t */\n\tasync arrayBuffer() {\n\t\tconst {buffer, byteOffset, byteLength} = await consumeBody(this);\n\t\treturn buffer.slice(byteOffset, byteOffset + byteLength);\n\t}\n\n\tasync formData() {\n\t\tconst ct = this.headers.get('content-type');\n\n\t\tif (ct.startsWith('application/x-www-form-urlencoded')) {\n\t\t\tconst formData = new FormData();\n\t\t\tconst parameters = new URLSearchParams(await this.text());\n\n\t\t\tfor (const [name, value] of parameters) {\n\t\t\t\tformData.append(name, value);\n\t\t\t}\n\n\t\t\treturn formData;\n\t\t}\n\n\t\tconst {toFormData} = await import('./utils/multipart-parser.js');\n\t\treturn toFormData(this.body, ct);\n\t}\n\n\t/**\n\t * Return raw response as Blob\n\t *\n\t * @return Promise\n\t */\n\tasync blob() {\n\t\tconst ct = (this.headers && this.headers.get('content-type')) || (this[INTERNALS].body && this[INTERNALS].body.type) || '';\n\t\tconst buf = await this.arrayBuffer();\n\n\t\treturn new Blob([buf], {\n\t\t\ttype: ct\n\t\t});\n\t}\n\n\t/**\n\t * Decode response as json\n\t *\n\t * @return  Promise\n\t */\n\tasync json() {\n\t\tconst text = await this.text();\n\t\treturn JSON.parse(text);\n\t}\n\n\t/**\n\t * Decode response as text\n\t *\n\t * @return  Promise\n\t */\n\tasync text() {\n\t\tconst buffer = await consumeBody(this);\n\t\treturn new TextDecoder().decode(buffer);\n\t}\n\n\t/**\n\t * Decode response as buffer (non-spec api)\n\t *\n\t * @return  Promise\n\t */\n\tbuffer() {\n\t\treturn consumeBody(this);\n\t}\n}\n\nBody.prototype.buffer = deprecate(Body.prototype.buffer, 'Please use \\'response.arrayBuffer()\\' instead of \\'response.buffer()\\'', 'node-fetch#buffer');\n\n// In browsers, all properties are enumerable.\nObject.defineProperties(Body.prototype, {\n\tbody: {enumerable: true},\n\tbodyUsed: {enumerable: true},\n\tarrayBuffer: {enumerable: true},\n\tblob: {enumerable: true},\n\tjson: {enumerable: true},\n\ttext: {enumerable: true},\n\tdata: {get: deprecate(() => {},\n\t\t'data doesn\\'t exist, use json(), text(), arrayBuffer(), or body instead',\n\t\t'https://github.com/node-fetch/node-fetch/issues/1000 (response)')}\n});\n\n/**\n * Consume and convert an entire Body to a Buffer.\n *\n * Ref: https://fetch.spec.whatwg.org/#concept-body-consume-body\n *\n * @return Promise\n */\nasync function consumeBody(data) {\n\tif (data[INTERNALS].disturbed) {\n\t\tthrow new TypeError(`body used already for: ${data.url}`);\n\t}\n\n\tdata[INTERNALS].disturbed = true;\n\n\tif (data[INTERNALS].error) {\n\t\tthrow data[INTERNALS].error;\n\t}\n\n\tconst {body} = data;\n\n\t// Body is null\n\tif (body === null) {\n\t\treturn Buffer.alloc(0);\n\t}\n\n\t/* c8 ignore next 3 */\n\tif (!(body instanceof Stream)) {\n\t\treturn Buffer.alloc(0);\n\t}\n\n\t// Body is stream\n\t// get ready to actually consume the body\n\tconst accum = [];\n\tlet accumBytes = 0;\n\n\ttry {\n\t\tfor await (const chunk of body) {\n\t\t\tif (data.size > 0 && accumBytes + chunk.length > data.size) {\n\t\t\t\tconst error = new FetchError(`content size at ${data.url} over limit: ${data.size}`, 'max-size');\n\t\t\t\tbody.destroy(error);\n\t\t\t\tthrow error;\n\t\t\t}\n\n\t\t\taccumBytes += chunk.length;\n\t\t\taccum.push(chunk);\n\t\t}\n\t} catch (error) {\n\t\tconst error_ = error instanceof FetchBaseError ? error : new FetchError(`Invalid response body while trying to fetch ${data.url}: ${error.message}`, 'system', error);\n\t\tthrow error_;\n\t}\n\n\tif (body.readableEnded === true || body._readableState.ended === true) {\n\t\ttry {\n\t\t\tif (accum.every(c => typeof c === 'string')) {\n\t\t\t\treturn Buffer.from(accum.join(''));\n\t\t\t}\n\n\t\t\treturn Buffer.concat(accum, accumBytes);\n\t\t} catch (error) {\n\t\t\tthrow new FetchError(`Could not create Buffer from response body for ${data.url}: ${error.message}`, 'system', error);\n\t\t}\n\t} else {\n\t\tthrow new FetchError(`Premature close of server response while trying to fetch ${data.url}`);\n\t}\n}\n\n/**\n * Clone body given Res/Req instance\n *\n * @param   Mixed   instance       Response or Request instance\n * @param   String  highWaterMark  highWaterMark for both PassThrough body streams\n * @return  Mixed\n */\nexport const clone = (instance, highWaterMark) => {\n\tlet p1;\n\tlet p2;\n\tlet {body} = instance[INTERNALS];\n\n\t// Don't allow cloning a used body\n\tif (instance.bodyUsed) {\n\t\tthrow new Error('cannot clone body after it is used');\n\t}\n\n\t// Check that body is a stream and not form-data object\n\t// note: we can't clone the form-data object without having it as a dependency\n\tif ((body instanceof Stream) && (typeof body.getBoundary !== 'function')) {\n\t\t// Tee instance body\n\t\tp1 = new PassThrough({highWaterMark});\n\t\tp2 = new PassThrough({highWaterMark});\n\t\tbody.pipe(p1);\n\t\tbody.pipe(p2);\n\t\t// Set instance body to teed body and return the other teed body\n\t\tinstance[INTERNALS].stream = p1;\n\t\tbody = p2;\n\t}\n\n\treturn body;\n};\n\nconst getNonSpecFormDataBoundary = deprecate(\n\tbody => body.getBoundary(),\n\t'form-data doesn\\'t follow the spec and requires special treatment. Use alternative package',\n\t'https://github.com/node-fetch/node-fetch/issues/1167'\n);\n\n/**\n * Performs the operation \"extract a `Content-Type` value from |object|\" as\n * specified in the specification:\n * https://fetch.spec.whatwg.org/#concept-bodyinit-extract\n *\n * This function assumes that instance.body is present.\n *\n * @param {any} body Any options.body input\n * @returns {string | null}\n */\nexport const extractContentType = (body, request) => {\n\t// Body is null or undefined\n\tif (body === null) {\n\t\treturn null;\n\t}\n\n\t// Body is string\n\tif (typeof body === 'string') {\n\t\treturn 'text/plain;charset=UTF-8';\n\t}\n\n\t// Body is a URLSearchParams\n\tif (isURLSearchParameters(body)) {\n\t\treturn 'application/x-www-form-urlencoded;charset=UTF-8';\n\t}\n\n\t// Body is blob\n\tif (isBlob(body)) {\n\t\treturn body.type || null;\n\t}\n\n\t// Body is a Buffer (Buffer, ArrayBuffer or ArrayBufferView)\n\tif (Buffer.isBuffer(body) || types.isAnyArrayBuffer(body) || ArrayBuffer.isView(body)) {\n\t\treturn null;\n\t}\n\n\tif (body instanceof FormData) {\n\t\treturn `multipart/form-data; boundary=${request[INTERNALS].boundary}`;\n\t}\n\n\t// Detect form data input from form-data module\n\tif (body && typeof body.getBoundary === 'function') {\n\t\treturn `multipart/form-data;boundary=${getNonSpecFormDataBoundary(body)}`;\n\t}\n\n\t// Body is stream - can't really do much about this\n\tif (body instanceof Stream) {\n\t\treturn null;\n\t}\n\n\t// Body constructor defaults other things to string\n\treturn 'text/plain;charset=UTF-8';\n};\n\n/**\n * The Fetch Standard treats this as if \"total bytes\" is a property on the body.\n * For us, we have to explicitly get it with a function.\n *\n * ref: https://fetch.spec.whatwg.org/#concept-body-total-bytes\n *\n * @param {any} obj.body Body object from the Body instance.\n * @returns {number | null}\n */\nexport const getTotalBytes = request => {\n\tconst {body} = request[INTERNALS];\n\n\t// Body is null or undefined\n\tif (body === null) {\n\t\treturn 0;\n\t}\n\n\t// Body is Blob\n\tif (isBlob(body)) {\n\t\treturn body.size;\n\t}\n\n\t// Body is Buffer\n\tif (Buffer.isBuffer(body)) {\n\t\treturn body.length;\n\t}\n\n\t// Detect form data input from form-data module\n\tif (body && typeof body.getLengthSync === 'function') {\n\t\treturn body.hasKnownLength && body.hasKnownLength() ? body.getLengthSync() : null;\n\t}\n\n\t// Body is stream\n\treturn null;\n};\n\n/**\n * Write a Body to a Node.js WritableStream (e.g. http.Request) object.\n *\n * @param {Stream.Writable} dest The stream to write to.\n * @param obj.body Body object from the Body instance.\n * @returns {Promise<void>}\n */\nexport const writeToStream = async (dest, {body}) => {\n\tif (body === null) {\n\t\t// Body is null\n\t\tdest.end();\n\t} else {\n\t\t// Body is stream\n\t\tawait pipeline(body, dest);\n\t}\n};\n","/**\n * Headers.js\n *\n * Headers class offers convenient helpers\n */\n\nimport {types} from 'node:util';\nimport http from 'node:http';\n\n/* c8 ignore next 9 */\nconst validateHeaderName = typeof http.validateHeaderName === 'function' ?\n\thttp.validateHeaderName :\n\tname => {\n\t\tif (!/^[\\^`\\-\\w!#$%&'*+.|~]+$/.test(name)) {\n\t\t\tconst error = new TypeError(`Header name must be a valid HTTP token [${name}]`);\n\t\t\tObject.defineProperty(error, 'code', {value: 'ERR_INVALID_HTTP_TOKEN'});\n\t\t\tthrow error;\n\t\t}\n\t};\n\n/* c8 ignore next 9 */\nconst validateHeaderValue = typeof http.validateHeaderValue === 'function' ?\n\thttp.validateHeaderValue :\n\t(name, value) => {\n\t\tif (/[^\\t\\u0020-\\u007E\\u0080-\\u00FF]/.test(value)) {\n\t\t\tconst error = new TypeError(`Invalid character in header content [\"${name}\"]`);\n\t\t\tObject.defineProperty(error, 'code', {value: 'ERR_INVALID_CHAR'});\n\t\t\tthrow error;\n\t\t}\n\t};\n\n/**\n * @typedef {Headers | Record<string, string> | Iterable<readonly [string, string]> | Iterable<Iterable<string>>} HeadersInit\n */\n\n/**\n * This Fetch API interface allows you to perform various actions on HTTP request and response headers.\n * These actions include retrieving, setting, adding to, and removing.\n * A Headers object has an associated header list, which is initially empty and consists of zero or more name and value pairs.\n * You can add to this using methods like append() (see Examples.)\n * In all methods of this interface, header names are matched by case-insensitive byte sequence.\n *\n */\nexport default class Headers extends URLSearchParams {\n\t/**\n\t * Headers class\n\t *\n\t * @constructor\n\t * @param {HeadersInit} [init] - Response headers\n\t */\n\tconstructor(init) {\n\t\t// Validate and normalize init object in [name, value(s)][]\n\t\t/** @type {string[][]} */\n\t\tlet result = [];\n\t\tif (init instanceof Headers) {\n\t\t\tconst raw = init.raw();\n\t\t\tfor (const [name, values] of Object.entries(raw)) {\n\t\t\t\tresult.push(...values.map(value => [name, value]));\n\t\t\t}\n\t\t} else if (init == null) { // eslint-disable-line no-eq-null, eqeqeq\n\t\t\t// No op\n\t\t} else if (typeof init === 'object' && !types.isBoxedPrimitive(init)) {\n\t\t\tconst method = init[Symbol.iterator];\n\t\t\t// eslint-disable-next-line no-eq-null, eqeqeq\n\t\t\tif (method == null) {\n\t\t\t\t// Record<ByteString, ByteString>\n\t\t\t\tresult.push(...Object.entries(init));\n\t\t\t} else {\n\t\t\t\tif (typeof method !== 'function') {\n\t\t\t\t\tthrow new TypeError('Header pairs must be iterable');\n\t\t\t\t}\n\n\t\t\t\t// Sequence<sequence<ByteString>>\n\t\t\t\t// Note: per spec we have to first exhaust the lists then process them\n\t\t\t\tresult = [...init]\n\t\t\t\t\t.map(pair => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\ttypeof pair !== 'object' || types.isBoxedPrimitive(pair)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tthrow new TypeError('Each header pair must be an iterable object');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn [...pair];\n\t\t\t\t\t}).map(pair => {\n\t\t\t\t\t\tif (pair.length !== 2) {\n\t\t\t\t\t\t\tthrow new TypeError('Each header pair must be a name/value tuple');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn [...pair];\n\t\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new TypeError('Failed to construct \\'Headers\\': The provided value is not of type \\'(sequence<sequence<ByteString>> or record<ByteString, ByteString>)');\n\t\t}\n\n\t\t// Validate and lowercase\n\t\tresult =\n\t\t\tresult.length > 0 ?\n\t\t\t\tresult.map(([name, value]) => {\n\t\t\t\t\tvalidateHeaderName(name);\n\t\t\t\t\tvalidateHeaderValue(name, String(value));\n\t\t\t\t\treturn [String(name).toLowerCase(), String(value)];\n\t\t\t\t}) :\n\t\t\t\tundefined;\n\n\t\tsuper(result);\n\n\t\t// Returning a Proxy that will lowercase key names, validate parameters and sort keys\n\t\t// eslint-disable-next-line no-constructor-return\n\t\treturn new Proxy(this, {\n\t\t\tget(target, p, receiver) {\n\t\t\t\tswitch (p) {\n\t\t\t\t\tcase 'append':\n\t\t\t\t\tcase 'set':\n\t\t\t\t\t\treturn (name, value) => {\n\t\t\t\t\t\t\tvalidateHeaderName(name);\n\t\t\t\t\t\t\tvalidateHeaderValue(name, String(value));\n\t\t\t\t\t\t\treturn URLSearchParams.prototype[p].call(\n\t\t\t\t\t\t\t\ttarget,\n\t\t\t\t\t\t\t\tString(name).toLowerCase(),\n\t\t\t\t\t\t\t\tString(value)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t};\n\n\t\t\t\t\tcase 'delete':\n\t\t\t\t\tcase 'has':\n\t\t\t\t\tcase 'getAll':\n\t\t\t\t\t\treturn name => {\n\t\t\t\t\t\t\tvalidateHeaderName(name);\n\t\t\t\t\t\t\treturn URLSearchParams.prototype[p].call(\n\t\t\t\t\t\t\t\ttarget,\n\t\t\t\t\t\t\t\tString(name).toLowerCase()\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t};\n\n\t\t\t\t\tcase 'keys':\n\t\t\t\t\t\treturn () => {\n\t\t\t\t\t\t\ttarget.sort();\n\t\t\t\t\t\t\treturn new Set(URLSearchParams.prototype.keys.call(target)).keys();\n\t\t\t\t\t\t};\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn Reflect.get(target, p, receiver);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t/* c8 ignore next */\n\t}\n\n\tget [Symbol.toStringTag]() {\n\t\treturn this.constructor.name;\n\t}\n\n\ttoString() {\n\t\treturn Object.prototype.toString.call(this);\n\t}\n\n\tget(name) {\n\t\tconst values = this.getAll(name);\n\t\tif (values.length === 0) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet value = values.join(', ');\n\t\tif (/^content-encoding$/i.test(name)) {\n\t\t\tvalue = value.toLowerCase();\n\t\t}\n\n\t\treturn value;\n\t}\n\n\tforEach(callback, thisArg = undefined) {\n\t\tfor (const name of this.keys()) {\n\t\t\tReflect.apply(callback, thisArg, [this.get(name), name, this]);\n\t\t}\n\t}\n\n\t* values() {\n\t\tfor (const name of this.keys()) {\n\t\t\tyield this.get(name);\n\t\t}\n\t}\n\n\t/**\n\t * @type {() => IterableIterator<[string, string]>}\n\t */\n\t* entries() {\n\t\tfor (const name of this.keys()) {\n\t\t\tyield [name, this.get(name)];\n\t\t}\n\t}\n\n\t[Symbol.iterator]() {\n\t\treturn this.entries();\n\t}\n\n\t/**\n\t * Node-fetch non-spec method\n\t * returning all headers and their values as array\n\t * @returns {Record<string, string[]>}\n\t */\n\traw() {\n\t\treturn [...this.keys()].reduce((result, key) => {\n\t\t\tresult[key] = this.getAll(key);\n\t\t\treturn result;\n\t\t}, {});\n\t}\n\n\t/**\n\t * For better console.log(headers) and also to convert Headers into Node.js Request compatible format\n\t */\n\t[Symbol.for('nodejs.util.inspect.custom')]() {\n\t\treturn [...this.keys()].reduce((result, key) => {\n\t\t\tconst values = this.getAll(key);\n\t\t\t// Http.request() only supports string as Host header.\n\t\t\t// This hack makes specifying custom Host header possible.\n\t\t\tif (key === 'host') {\n\t\t\t\tresult[key] = values[0];\n\t\t\t} else {\n\t\t\t\tresult[key] = values.length > 1 ? values : values[0];\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}, {});\n\t}\n}\n\n/**\n * Re-shaping object for Web IDL tests\n * Only need to do it for overridden methods\n */\nObject.defineProperties(\n\tHeaders.prototype,\n\t['get', 'entries', 'forEach', 'values'].reduce((result, property) => {\n\t\tresult[property] = {enumerable: true};\n\t\treturn result;\n\t}, {})\n);\n\n/**\n * Create a Headers object from an http.IncomingMessage.rawHeaders, ignoring those that do\n * not conform to HTTP grammar productions.\n * @param {import('http').IncomingMessage['rawHeaders']} headers\n */\nexport function fromRawHeaders(headers = []) {\n\treturn new Headers(\n\t\theaders\n\t\t\t// Split into pairs\n\t\t\t.reduce((result, value, index, array) => {\n\t\t\t\tif (index % 2 === 0) {\n\t\t\t\t\tresult.push(array.slice(index, index + 2));\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t}, [])\n\t\t\t.filter(([name, value]) => {\n\t\t\t\ttry {\n\t\t\t\t\tvalidateHeaderName(name);\n\t\t\t\t\tvalidateHeaderValue(name, String(value));\n\t\t\t\t\treturn true;\n\t\t\t\t} catch {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t})\n\n\t);\n}\n","const redirectStatus = new Set([301, 302, 303, 307, 308]);\n\n/**\n * Redirect code matching\n *\n * @param {number} code - Status code\n * @return {boolean}\n */\nexport const isRedirect = code => {\n\treturn redirectStatus.has(code);\n};\n","/**\n * Response.js\n *\n * Response class provides content decoding\n */\n\nimport Headers from './headers.js';\nimport Body, {clone, extractContentType} from './body.js';\nimport {isRedirect} from './utils/is-redirect.js';\n\nconst INTERNALS = Symbol('Response internals');\n\n/**\n * Response class\n *\n * Ref: https://fetch.spec.whatwg.org/#response-class\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nexport default class Response extends Body {\n\tconstructor(body = null, options = {}) {\n\t\tsuper(body, options);\n\n\t\t// eslint-disable-next-line no-eq-null, eqeqeq, no-negated-condition\n\t\tconst status = options.status != null ? options.status : 200;\n\n\t\tconst headers = new Headers(options.headers);\n\n\t\tif (body !== null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(body, this);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tthis[INTERNALS] = {\n\t\t\ttype: 'default',\n\t\t\turl: options.url,\n\t\t\tstatus,\n\t\t\tstatusText: options.statusText || '',\n\t\t\theaders,\n\t\t\tcounter: options.counter,\n\t\t\thighWaterMark: options.highWaterMark\n\t\t};\n\t}\n\n\tget type() {\n\t\treturn this[INTERNALS].type;\n\t}\n\n\tget url() {\n\t\treturn this[INTERNALS].url || '';\n\t}\n\n\tget status() {\n\t\treturn this[INTERNALS].status;\n\t}\n\n\t/**\n\t * Convenience property representing if the request ended normally\n\t */\n\tget ok() {\n\t\treturn this[INTERNALS].status >= 200 && this[INTERNALS].status < 300;\n\t}\n\n\tget redirected() {\n\t\treturn this[INTERNALS].counter > 0;\n\t}\n\n\tget statusText() {\n\t\treturn this[INTERNALS].statusText;\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS].headers;\n\t}\n\n\tget highWaterMark() {\n\t\treturn this[INTERNALS].highWaterMark;\n\t}\n\n\t/**\n\t * Clone this response\n\t *\n\t * @return  Response\n\t */\n\tclone() {\n\t\treturn new Response(clone(this, this.highWaterMark), {\n\t\t\ttype: this.type,\n\t\t\turl: this.url,\n\t\t\tstatus: this.status,\n\t\t\tstatusText: this.statusText,\n\t\t\theaders: this.headers,\n\t\t\tok: this.ok,\n\t\t\tredirected: this.redirected,\n\t\t\tsize: this.size,\n\t\t\thighWaterMark: this.highWaterMark\n\t\t});\n\t}\n\n\t/**\n\t * @param {string} url    The URL that the new response is to originate from.\n\t * @param {number} status An optional status code for the response (e.g., 302.)\n\t * @returns {Response}    A Response object.\n\t */\n\tstatic redirect(url, status = 302) {\n\t\tif (!isRedirect(status)) {\n\t\t\tthrow new RangeError('Failed to execute \"redirect\" on \"response\": Invalid status code');\n\t\t}\n\n\t\treturn new Response(null, {\n\t\t\theaders: {\n\t\t\t\tlocation: new URL(url).toString()\n\t\t\t},\n\t\t\tstatus\n\t\t});\n\t}\n\n\tstatic error() {\n\t\tconst response = new Response(null, {status: 0, statusText: ''});\n\t\tresponse[INTERNALS].type = 'error';\n\t\treturn response;\n\t}\n\n\tstatic json(data = undefined, init = {}) {\n\t\tconst body = JSON.stringify(data);\n\n\t\tif (body === undefined) {\n\t\t\tthrow new TypeError('data is not JSON serializable');\n\t\t}\n\n\t\tconst headers = new Headers(init && init.headers);\n\n\t\tif (!headers.has('content-type')) {\n\t\t\theaders.set('content-type', 'application/json');\n\t\t}\n\n\t\treturn new Response(body, {\n\t\t\t...init,\n\t\t\theaders\n\t\t});\n\t}\n\n\tget [Symbol.toStringTag]() {\n\t\treturn 'Response';\n\t}\n}\n\nObject.defineProperties(Response.prototype, {\n\ttype: {enumerable: true},\n\turl: {enumerable: true},\n\tstatus: {enumerable: true},\n\tok: {enumerable: true},\n\tredirected: {enumerable: true},\n\tstatusText: {enumerable: true},\n\theaders: {enumerable: true},\n\tclone: {enumerable: true}\n});\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"node:url\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"node:net\");","import {isIP} from 'node:net';\n\n/**\n * @external URL\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/URL|URL}\n */\n\n/**\n * @module utils/referrer\n * @private\n */\n\n/**\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#strip-url|Referrer Policy 8.4. Strip url for use as a referrer}\n * @param {string} URL\n * @param {boolean} [originOnly=false]\n */\nexport function stripURLForUseAsAReferrer(url, originOnly = false) {\n\t// 1. If url is null, return no referrer.\n\tif (url == null) { // eslint-disable-line no-eq-null, eqeqeq\n\t\treturn 'no-referrer';\n\t}\n\n\turl = new URL(url);\n\n\t// 2. If url's scheme is a local scheme, then return no referrer.\n\tif (/^(about|blob|data):$/.test(url.protocol)) {\n\t\treturn 'no-referrer';\n\t}\n\n\t// 3. Set url's username to the empty string.\n\turl.username = '';\n\n\t// 4. Set url's password to null.\n\t// Note: `null` appears to be a mistake as this actually results in the password being `\"null\"`.\n\turl.password = '';\n\n\t// 5. Set url's fragment to null.\n\t// Note: `null` appears to be a mistake as this actually results in the fragment being `\"#null\"`.\n\turl.hash = '';\n\n\t// 6. If the origin-only flag is true, then:\n\tif (originOnly) {\n\t\t// 6.1. Set url's path to null.\n\t\t// Note: `null` appears to be a mistake as this actually results in the path being `\"/null\"`.\n\t\turl.pathname = '';\n\n\t\t// 6.2. Set url's query to null.\n\t\t// Note: `null` appears to be a mistake as this actually results in the query being `\"?null\"`.\n\t\turl.search = '';\n\t}\n\n\t// 7. Return url.\n\treturn url;\n}\n\n/**\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#enumdef-referrerpolicy|enum ReferrerPolicy}\n */\nexport const ReferrerPolicy = new Set([\n\t'',\n\t'no-referrer',\n\t'no-referrer-when-downgrade',\n\t'same-origin',\n\t'origin',\n\t'strict-origin',\n\t'origin-when-cross-origin',\n\t'strict-origin-when-cross-origin',\n\t'unsafe-url'\n]);\n\n/**\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#default-referrer-policy|default referrer policy}\n */\nexport const DEFAULT_REFERRER_POLICY = 'strict-origin-when-cross-origin';\n\n/**\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#referrer-policies|Referrer Policy 3. Referrer Policies}\n * @param {string} referrerPolicy\n * @returns {string} referrerPolicy\n */\nexport function validateReferrerPolicy(referrerPolicy) {\n\tif (!ReferrerPolicy.has(referrerPolicy)) {\n\t\tthrow new TypeError(`Invalid referrerPolicy: ${referrerPolicy}`);\n\t}\n\n\treturn referrerPolicy;\n}\n\n/**\n * @see {@link https://w3c.github.io/webappsec-secure-contexts/#is-origin-trustworthy|Referrer Policy 3.2. Is origin potentially trustworthy?}\n * @param {external:URL} url\n * @returns `true`: \"Potentially Trustworthy\", `false`: \"Not Trustworthy\"\n */\nexport function isOriginPotentiallyTrustworthy(url) {\n\t// 1. If origin is an opaque origin, return \"Not Trustworthy\".\n\t// Not applicable\n\n\t// 2. Assert: origin is a tuple origin.\n\t// Not for implementations\n\n\t// 3. If origin's scheme is either \"https\" or \"wss\", return \"Potentially Trustworthy\".\n\tif (/^(http|ws)s:$/.test(url.protocol)) {\n\t\treturn true;\n\t}\n\n\t// 4. If origin's host component matches one of the CIDR notations 127.0.0.0/8 or ::1/128 [RFC4632], return \"Potentially Trustworthy\".\n\tconst hostIp = url.host.replace(/(^\\[)|(]$)/g, '');\n\tconst hostIPVersion = isIP(hostIp);\n\n\tif (hostIPVersion === 4 && /^127\\./.test(hostIp)) {\n\t\treturn true;\n\t}\n\n\tif (hostIPVersion === 6 && /^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(hostIp)) {\n\t\treturn true;\n\t}\n\n\t// 5. If origin's host component is \"localhost\" or falls within \".localhost\", and the user agent conforms to the name resolution rules in [let-localhost-be-localhost], return \"Potentially Trustworthy\".\n\t// We are returning FALSE here because we cannot ensure conformance to\n\t// let-localhost-be-loalhost (https://tools.ietf.org/html/draft-west-let-localhost-be-localhost)\n\tif (url.host === 'localhost' || url.host.endsWith('.localhost')) {\n\t\treturn false;\n\t}\n\n\t// 6. If origin's scheme component is file, return \"Potentially Trustworthy\".\n\tif (url.protocol === 'file:') {\n\t\treturn true;\n\t}\n\n\t// 7. If origin's scheme component is one which the user agent considers to be authenticated, return \"Potentially Trustworthy\".\n\t// Not supported\n\n\t// 8. If origin has been configured as a trustworthy origin, return \"Potentially Trustworthy\".\n\t// Not supported\n\n\t// 9. Return \"Not Trustworthy\".\n\treturn false;\n}\n\n/**\n * @see {@link https://w3c.github.io/webappsec-secure-contexts/#is-url-trustworthy|Referrer Policy 3.3. Is url potentially trustworthy?}\n * @param {external:URL} url\n * @returns `true`: \"Potentially Trustworthy\", `false`: \"Not Trustworthy\"\n */\nexport function isUrlPotentiallyTrustworthy(url) {\n\t// 1. If url is \"about:blank\" or \"about:srcdoc\", return \"Potentially Trustworthy\".\n\tif (/^about:(blank|srcdoc)$/.test(url)) {\n\t\treturn true;\n\t}\n\n\t// 2. If url's scheme is \"data\", return \"Potentially Trustworthy\".\n\tif (url.protocol === 'data:') {\n\t\treturn true;\n\t}\n\n\t// Note: The origin of blob: and filesystem: URLs is the origin of the context in which they were\n\t// created. Therefore, blobs created in a trustworthy origin will themselves be potentially\n\t// trustworthy.\n\tif (/^(blob|filesystem):$/.test(url.protocol)) {\n\t\treturn true;\n\t}\n\n\t// 3. Return the result of executing 3.2 Is origin potentially trustworthy? on url's origin.\n\treturn isOriginPotentiallyTrustworthy(url);\n}\n\n/**\n * Modifies the referrerURL to enforce any extra security policy considerations.\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#determine-requests-referrer|Referrer Policy 8.3. Determine request's Referrer}, step 7\n * @callback module:utils/referrer~referrerURLCallback\n * @param {external:URL} referrerURL\n * @returns {external:URL} modified referrerURL\n */\n\n/**\n * Modifies the referrerOrigin to enforce any extra security policy considerations.\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#determine-requests-referrer|Referrer Policy 8.3. Determine request's Referrer}, step 7\n * @callback module:utils/referrer~referrerOriginCallback\n * @param {external:URL} referrerOrigin\n * @returns {external:URL} modified referrerOrigin\n */\n\n/**\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#determine-requests-referrer|Referrer Policy 8.3. Determine request's Referrer}\n * @param {Request} request\n * @param {object} o\n * @param {module:utils/referrer~referrerURLCallback} o.referrerURLCallback\n * @param {module:utils/referrer~referrerOriginCallback} o.referrerOriginCallback\n * @returns {external:URL} Request's referrer\n */\nexport function determineRequestsReferrer(request, {referrerURLCallback, referrerOriginCallback} = {}) {\n\t// There are 2 notes in the specification about invalid pre-conditions.  We return null, here, for\n\t// these cases:\n\t// > Note: If request's referrer is \"no-referrer\", Fetch will not call into this algorithm.\n\t// > Note: If request's referrer policy is the empty string, Fetch will not call into this\n\t// > algorithm.\n\tif (request.referrer === 'no-referrer' || request.referrerPolicy === '') {\n\t\treturn null;\n\t}\n\n\t// 1. Let policy be request's associated referrer policy.\n\tconst policy = request.referrerPolicy;\n\n\t// 2. Let environment be request's client.\n\t// not applicable to node.js\n\n\t// 3. Switch on request's referrer:\n\tif (request.referrer === 'about:client') {\n\t\treturn 'no-referrer';\n\t}\n\n\t// \"a URL\": Let referrerSource be request's referrer.\n\tconst referrerSource = request.referrer;\n\n\t// 4. Let request's referrerURL be the result of stripping referrerSource for use as a referrer.\n\tlet referrerURL = stripURLForUseAsAReferrer(referrerSource);\n\n\t// 5. Let referrerOrigin be the result of stripping referrerSource for use as a referrer, with the\n\t//    origin-only flag set to true.\n\tlet referrerOrigin = stripURLForUseAsAReferrer(referrerSource, true);\n\n\t// 6. If the result of serializing referrerURL is a string whose length is greater than 4096, set\n\t//    referrerURL to referrerOrigin.\n\tif (referrerURL.toString().length > 4096) {\n\t\treferrerURL = referrerOrigin;\n\t}\n\n\t// 7. The user agent MAY alter referrerURL or referrerOrigin at this point to enforce arbitrary\n\t//    policy considerations in the interests of minimizing data leakage. For example, the user\n\t//    agent could strip the URL down to an origin, modify its host, replace it with an empty\n\t//    string, etc.\n\tif (referrerURLCallback) {\n\t\treferrerURL = referrerURLCallback(referrerURL);\n\t}\n\n\tif (referrerOriginCallback) {\n\t\treferrerOrigin = referrerOriginCallback(referrerOrigin);\n\t}\n\n\t// 8.Execute the statements corresponding to the value of policy:\n\tconst currentURL = new URL(request.url);\n\n\tswitch (policy) {\n\t\tcase 'no-referrer':\n\t\t\treturn 'no-referrer';\n\n\t\tcase 'origin':\n\t\t\treturn referrerOrigin;\n\n\t\tcase 'unsafe-url':\n\t\t\treturn referrerURL;\n\n\t\tcase 'strict-origin':\n\t\t\t// 1. If referrerURL is a potentially trustworthy URL and request's current URL is not a\n\t\t\t//    potentially trustworthy URL, then return no referrer.\n\t\t\tif (isUrlPotentiallyTrustworthy(referrerURL) && !isUrlPotentiallyTrustworthy(currentURL)) {\n\t\t\t\treturn 'no-referrer';\n\t\t\t}\n\n\t\t\t// 2. Return referrerOrigin.\n\t\t\treturn referrerOrigin.toString();\n\n\t\tcase 'strict-origin-when-cross-origin':\n\t\t\t// 1. If the origin of referrerURL and the origin of request's current URL are the same, then\n\t\t\t//    return referrerURL.\n\t\t\tif (referrerURL.origin === currentURL.origin) {\n\t\t\t\treturn referrerURL;\n\t\t\t}\n\n\t\t\t// 2. If referrerURL is a potentially trustworthy URL and request's current URL is not a\n\t\t\t//    potentially trustworthy URL, then return no referrer.\n\t\t\tif (isUrlPotentiallyTrustworthy(referrerURL) && !isUrlPotentiallyTrustworthy(currentURL)) {\n\t\t\t\treturn 'no-referrer';\n\t\t\t}\n\n\t\t\t// 3. Return referrerOrigin.\n\t\t\treturn referrerOrigin;\n\n\t\tcase 'same-origin':\n\t\t\t// 1. If the origin of referrerURL and the origin of request's current URL are the same, then\n\t\t\t//    return referrerURL.\n\t\t\tif (referrerURL.origin === currentURL.origin) {\n\t\t\t\treturn referrerURL;\n\t\t\t}\n\n\t\t\t// 2. Return no referrer.\n\t\t\treturn 'no-referrer';\n\n\t\tcase 'origin-when-cross-origin':\n\t\t\t// 1. If the origin of referrerURL and the origin of request's current URL are the same, then\n\t\t\t//    return referrerURL.\n\t\t\tif (referrerURL.origin === currentURL.origin) {\n\t\t\t\treturn referrerURL;\n\t\t\t}\n\n\t\t\t// Return referrerOrigin.\n\t\t\treturn referrerOrigin;\n\n\t\tcase 'no-referrer-when-downgrade':\n\t\t\t// 1. If referrerURL is a potentially trustworthy URL and request's current URL is not a\n\t\t\t//    potentially trustworthy URL, then return no referrer.\n\t\t\tif (isUrlPotentiallyTrustworthy(referrerURL) && !isUrlPotentiallyTrustworthy(currentURL)) {\n\t\t\t\treturn 'no-referrer';\n\t\t\t}\n\n\t\t\t// 2. Return referrerURL.\n\t\t\treturn referrerURL;\n\n\t\tdefault:\n\t\t\tthrow new TypeError(`Invalid referrerPolicy: ${policy}`);\n\t}\n}\n\n/**\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#parse-referrer-policy-from-header|Referrer Policy 8.1. Parse a referrer policy from a Referrer-Policy header}\n * @param {Headers} headers Response headers\n * @returns {string} policy\n */\nexport function parseReferrerPolicyFromHeader(headers) {\n\t// 1. Let policy-tokens be the result of extracting header list values given `Referrer-Policy`\n\t//    and responses header list.\n\tconst policyTokens = (headers.get('referrer-policy') || '').split(/[,\\s]+/);\n\n\t// 2. Let policy be the empty string.\n\tlet policy = '';\n\n\t// 3. For each token in policy-tokens, if token is a referrer policy and token is not the empty\n\t//    string, then set policy to token.\n\t// Note: This algorithm loops over multiple policy values to allow deployment of new policy\n\t// values with fallbacks for older user agents, as described in  11.1 Unknown Policy Values.\n\tfor (const token of policyTokens) {\n\t\tif (token && ReferrerPolicy.has(token)) {\n\t\t\tpolicy = token;\n\t\t}\n\t}\n\n\t// 4. Return policy.\n\treturn policy;\n}\n","/**\n * Request.js\n *\n * Request class contains server only options\n *\n * All spec algorithm step numbers are based on https://fetch.spec.whatwg.org/commit-snapshots/ae716822cb3a61843226cd090eefc6589446c1d2/.\n */\n\nimport {format as formatUrl} from 'node:url';\nimport {deprecate} from 'node:util';\nimport Headers from './headers.js';\nimport Body, {clone, extractContentType, getTotalBytes} from './body.js';\nimport {isAbortSignal} from './utils/is.js';\nimport {getSearch} from './utils/get-search.js';\nimport {\n\tvalidateReferrerPolicy, determineRequestsReferrer, DEFAULT_REFERRER_POLICY\n} from './utils/referrer.js';\n\nconst INTERNALS = Symbol('Request internals');\n\n/**\n * Check if `obj` is an instance of Request.\n *\n * @param  {*} object\n * @return {boolean}\n */\nconst isRequest = object => {\n\treturn (\n\t\ttypeof object === 'object' &&\n\t\ttypeof object[INTERNALS] === 'object'\n\t);\n};\n\nconst doBadDataWarn = deprecate(() => {},\n\t'.data is not a valid RequestInit property, use .body instead',\n\t'https://github.com/node-fetch/node-fetch/issues/1000 (request)');\n\n/**\n * Request class\n *\n * Ref: https://fetch.spec.whatwg.org/#request-class\n *\n * @param   Mixed   input  Url or Request instance\n * @param   Object  init   Custom options\n * @return  Void\n */\nexport default class Request extends Body {\n\tconstructor(input, init = {}) {\n\t\tlet parsedURL;\n\n\t\t// Normalize input and force URL to be encoded as UTF-8 (https://github.com/node-fetch/node-fetch/issues/245)\n\t\tif (isRequest(input)) {\n\t\t\tparsedURL = new URL(input.url);\n\t\t} else {\n\t\t\tparsedURL = new URL(input);\n\t\t\tinput = {};\n\t\t}\n\n\t\tif (parsedURL.username !== '' || parsedURL.password !== '') {\n\t\t\tthrow new TypeError(`${parsedURL} is an url with embedded credentials.`);\n\t\t}\n\n\t\tlet method = init.method || input.method || 'GET';\n\t\tif (/^(delete|get|head|options|post|put)$/i.test(method)) {\n\t\t\tmethod = method.toUpperCase();\n\t\t}\n\n\t\tif (!isRequest(init) && 'data' in init) {\n\t\t\tdoBadDataWarn();\n\t\t}\n\n\t\t// eslint-disable-next-line no-eq-null, eqeqeq\n\t\tif ((init.body != null || (isRequest(input) && input.body !== null)) &&\n\t\t\t(method === 'GET' || method === 'HEAD')) {\n\t\t\tthrow new TypeError('Request with GET/HEAD method cannot have body');\n\t\t}\n\n\t\tconst inputBody = init.body ?\n\t\t\tinit.body :\n\t\t\t(isRequest(input) && input.body !== null ?\n\t\t\t\tclone(input) :\n\t\t\t\tnull);\n\n\t\tsuper(inputBody, {\n\t\t\tsize: init.size || input.size || 0\n\t\t});\n\n\t\tconst headers = new Headers(init.headers || input.headers || {});\n\n\t\tif (inputBody !== null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(inputBody, this);\n\t\t\tif (contentType) {\n\t\t\t\theaders.set('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tlet signal = isRequest(input) ?\n\t\t\tinput.signal :\n\t\t\tnull;\n\t\tif ('signal' in init) {\n\t\t\tsignal = init.signal;\n\t\t}\n\n\t\t// eslint-disable-next-line no-eq-null, eqeqeq\n\t\tif (signal != null && !isAbortSignal(signal)) {\n\t\t\tthrow new TypeError('Expected signal to be an instanceof AbortSignal or EventTarget');\n\t\t}\n\n\t\t// 5.4, Request constructor steps, step 15.1\n\t\t// eslint-disable-next-line no-eq-null, eqeqeq\n\t\tlet referrer = init.referrer == null ? input.referrer : init.referrer;\n\t\tif (referrer === '') {\n\t\t\t// 5.4, Request constructor steps, step 15.2\n\t\t\treferrer = 'no-referrer';\n\t\t} else if (referrer) {\n\t\t\t// 5.4, Request constructor steps, step 15.3.1, 15.3.2\n\t\t\tconst parsedReferrer = new URL(referrer);\n\t\t\t// 5.4, Request constructor steps, step 15.3.3, 15.3.4\n\t\t\treferrer = /^about:(\\/\\/)?client$/.test(parsedReferrer) ? 'client' : parsedReferrer;\n\t\t} else {\n\t\t\treferrer = undefined;\n\t\t}\n\n\t\tthis[INTERNALS] = {\n\t\t\tmethod,\n\t\t\tredirect: init.redirect || input.redirect || 'follow',\n\t\t\theaders,\n\t\t\tparsedURL,\n\t\t\tsignal,\n\t\t\treferrer\n\t\t};\n\n\t\t// Node-fetch-only options\n\t\tthis.follow = init.follow === undefined ? (input.follow === undefined ? 20 : input.follow) : init.follow;\n\t\tthis.compress = init.compress === undefined ? (input.compress === undefined ? true : input.compress) : init.compress;\n\t\tthis.counter = init.counter || input.counter || 0;\n\t\tthis.agent = init.agent || input.agent;\n\t\tthis.highWaterMark = init.highWaterMark || input.highWaterMark || 16384;\n\t\tthis.insecureHTTPParser = init.insecureHTTPParser || input.insecureHTTPParser || false;\n\n\t\t// 5.4, Request constructor steps, step 16.\n\t\t// Default is empty string per https://fetch.spec.whatwg.org/#concept-request-referrer-policy\n\t\tthis.referrerPolicy = init.referrerPolicy || input.referrerPolicy || '';\n\t}\n\n\t/** @returns {string} */\n\tget method() {\n\t\treturn this[INTERNALS].method;\n\t}\n\n\t/** @returns {string} */\n\tget url() {\n\t\treturn formatUrl(this[INTERNALS].parsedURL);\n\t}\n\n\t/** @returns {Headers} */\n\tget headers() {\n\t\treturn this[INTERNALS].headers;\n\t}\n\n\tget redirect() {\n\t\treturn this[INTERNALS].redirect;\n\t}\n\n\t/** @returns {AbortSignal} */\n\tget signal() {\n\t\treturn this[INTERNALS].signal;\n\t}\n\n\t// https://fetch.spec.whatwg.org/#dom-request-referrer\n\tget referrer() {\n\t\tif (this[INTERNALS].referrer === 'no-referrer') {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (this[INTERNALS].referrer === 'client') {\n\t\t\treturn 'about:client';\n\t\t}\n\n\t\tif (this[INTERNALS].referrer) {\n\t\t\treturn this[INTERNALS].referrer.toString();\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tget referrerPolicy() {\n\t\treturn this[INTERNALS].referrerPolicy;\n\t}\n\n\tset referrerPolicy(referrerPolicy) {\n\t\tthis[INTERNALS].referrerPolicy = validateReferrerPolicy(referrerPolicy);\n\t}\n\n\t/**\n\t * Clone this request\n\t *\n\t * @return  Request\n\t */\n\tclone() {\n\t\treturn new Request(this);\n\t}\n\n\tget [Symbol.toStringTag]() {\n\t\treturn 'Request';\n\t}\n}\n\nObject.defineProperties(Request.prototype, {\n\tmethod: {enumerable: true},\n\turl: {enumerable: true},\n\theaders: {enumerable: true},\n\tredirect: {enumerable: true},\n\tclone: {enumerable: true},\n\tsignal: {enumerable: true},\n\treferrer: {enumerable: true},\n\treferrerPolicy: {enumerable: true}\n});\n\n/**\n * Convert a Request to Node.js http request options.\n *\n * @param {Request} request - A Request instance\n * @return The options object to be passed to http.request\n */\nexport const getNodeRequestOptions = request => {\n\tconst {parsedURL} = request[INTERNALS];\n\tconst headers = new Headers(request[INTERNALS].headers);\n\n\t// Fetch step 1.3\n\tif (!headers.has('Accept')) {\n\t\theaders.set('Accept', '*/*');\n\t}\n\n\t// HTTP-network-or-cache fetch steps 2.4-2.7\n\tlet contentLengthValue = null;\n\tif (request.body === null && /^(post|put)$/i.test(request.method)) {\n\t\tcontentLengthValue = '0';\n\t}\n\n\tif (request.body !== null) {\n\t\tconst totalBytes = getTotalBytes(request);\n\t\t// Set Content-Length if totalBytes is a number (that is not NaN)\n\t\tif (typeof totalBytes === 'number' && !Number.isNaN(totalBytes)) {\n\t\t\tcontentLengthValue = String(totalBytes);\n\t\t}\n\t}\n\n\tif (contentLengthValue) {\n\t\theaders.set('Content-Length', contentLengthValue);\n\t}\n\n\t// 4.1. Main fetch, step 2.6\n\t// > If request's referrer policy is the empty string, then set request's referrer policy to the\n\t// > default referrer policy.\n\tif (request.referrerPolicy === '') {\n\t\trequest.referrerPolicy = DEFAULT_REFERRER_POLICY;\n\t}\n\n\t// 4.1. Main fetch, step 2.7\n\t// > If request's referrer is not \"no-referrer\", set request's referrer to the result of invoking\n\t// > determine request's referrer.\n\tif (request.referrer && request.referrer !== 'no-referrer') {\n\t\trequest[INTERNALS].referrer = determineRequestsReferrer(request);\n\t} else {\n\t\trequest[INTERNALS].referrer = 'no-referrer';\n\t}\n\n\t// 4.5. HTTP-network-or-cache fetch, step 6.9\n\t// > If httpRequest's referrer is a URL, then append `Referer`/httpRequest's referrer, serialized\n\t// >  and isomorphic encoded, to httpRequest's header list.\n\tif (request[INTERNALS].referrer instanceof URL) {\n\t\theaders.set('Referer', request.referrer);\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.11\n\tif (!headers.has('User-Agent')) {\n\t\theaders.set('User-Agent', 'node-fetch');\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.15\n\tif (request.compress && !headers.has('Accept-Encoding')) {\n\t\theaders.set('Accept-Encoding', 'gzip, deflate, br');\n\t}\n\n\tlet {agent} = request;\n\tif (typeof agent === 'function') {\n\t\tagent = agent(parsedURL);\n\t}\n\n\t// HTTP-network fetch step 4.2\n\t// chunked encoding is handled by Node.js\n\n\tconst search = getSearch(parsedURL);\n\n\t// Pass the full URL directly to request(), but overwrite the following\n\t// options:\n\tconst options = {\n\t\t// Overwrite search to retain trailing ? (issue #776)\n\t\tpath: parsedURL.pathname + search,\n\t\t// The following options are not expressed in the URL\n\t\tmethod: request.method,\n\t\theaders: headers[Symbol.for('nodejs.util.inspect.custom')](),\n\t\tinsecureHTTPParser: request.insecureHTTPParser,\n\t\tagent\n\t};\n\n\treturn {\n\t\t/** @type {URL} */\n\t\tparsedURL,\n\t\toptions\n\t};\n};\n","import {FetchBaseError} from './base.js';\n\n/**\n * AbortError interface for cancelled requests\n */\nexport class AbortError extends FetchBaseError {\n\tconstructor(message, type = 'aborted') {\n\t\tsuper(message, type);\n\t}\n}\n","/**\n * Index.js\n *\n * a request API compatible with window.fetch\n *\n * All spec algorithm step numbers are based on https://fetch.spec.whatwg.org/commit-snapshots/ae716822cb3a61843226cd090eefc6589446c1d2/.\n */\n\nimport http from 'node:http';\nimport https from 'node:https';\nimport zlib from 'node:zlib';\nimport Stream, {PassThrough, pipeline as pump} from 'node:stream';\nimport {Buffer} from 'node:buffer';\n\nimport dataUriToBuffer from 'data-uri-to-buffer';\n\nimport {writeToStream, clone} from './body.js';\nimport Response from './response.js';\nimport Headers, {fromRawHeaders} from './headers.js';\nimport Request, {getNodeRequestOptions} from './request.js';\nimport {FetchError} from './errors/fetch-error.js';\nimport {AbortError} from './errors/abort-error.js';\nimport {isRedirect} from './utils/is-redirect.js';\nimport {FormData} from 'formdata-polyfill/esm.min.js';\nimport {isDomainOrSubdomain, isSameProtocol} from './utils/is.js';\nimport {parseReferrerPolicyFromHeader} from './utils/referrer.js';\nimport {\n\tBlob,\n\tFile,\n\tfileFromSync,\n\tfileFrom,\n\tblobFromSync,\n\tblobFrom\n} from 'fetch-blob/from.js';\n\nexport {FormData, Headers, Request, Response, FetchError, AbortError, isRedirect};\nexport {Blob, File, fileFromSync, fileFrom, blobFromSync, blobFrom};\n\nconst supportedSchemas = new Set(['data:', 'http:', 'https:']);\n\n/**\n * Fetch function\n *\n * @param   {string | URL | import('./request').default} url - Absolute url or Request instance\n * @param   {*} [options_] - Fetch options\n * @return  {Promise<import('./response').default>}\n */\nexport default async function fetch(url, options_) {\n\treturn new Promise((resolve, reject) => {\n\t\t// Build request object\n\t\tconst request = new Request(url, options_);\n\t\tconst {parsedURL, options} = getNodeRequestOptions(request);\n\t\tif (!supportedSchemas.has(parsedURL.protocol)) {\n\t\t\tthrow new TypeError(`node-fetch cannot load ${url}. URL scheme \"${parsedURL.protocol.replace(/:$/, '')}\" is not supported.`);\n\t\t}\n\n\t\tif (parsedURL.protocol === 'data:') {\n\t\t\tconst data = dataUriToBuffer(request.url);\n\t\t\tconst response = new Response(data, {headers: {'Content-Type': data.typeFull}});\n\t\t\tresolve(response);\n\t\t\treturn;\n\t\t}\n\n\t\t// Wrap http.request into fetch\n\t\tconst send = (parsedURL.protocol === 'https:' ? https : http).request;\n\t\tconst {signal} = request;\n\t\tlet response = null;\n\n\t\tconst abort = () => {\n\t\t\tconst error = new AbortError('The operation was aborted.');\n\t\t\treject(error);\n\t\t\tif (request.body && request.body instanceof Stream.Readable) {\n\t\t\t\trequest.body.destroy(error);\n\t\t\t}\n\n\t\t\tif (!response || !response.body) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tresponse.body.emit('error', error);\n\t\t};\n\n\t\tif (signal && signal.aborted) {\n\t\t\tabort();\n\t\t\treturn;\n\t\t}\n\n\t\tconst abortAndFinalize = () => {\n\t\t\tabort();\n\t\t\tfinalize();\n\t\t};\n\n\t\t// Send request\n\t\tconst request_ = send(parsedURL.toString(), options);\n\n\t\tif (signal) {\n\t\t\tsignal.addEventListener('abort', abortAndFinalize);\n\t\t}\n\n\t\tconst finalize = () => {\n\t\t\trequest_.abort();\n\t\t\tif (signal) {\n\t\t\t\tsignal.removeEventListener('abort', abortAndFinalize);\n\t\t\t}\n\t\t};\n\n\t\trequest_.on('error', error => {\n\t\t\treject(new FetchError(`request to ${request.url} failed, reason: ${error.message}`, 'system', error));\n\t\t\tfinalize();\n\t\t});\n\n\t\tfixResponseChunkedTransferBadEnding(request_, error => {\n\t\t\tif (response && response.body) {\n\t\t\t\tresponse.body.destroy(error);\n\t\t\t}\n\t\t});\n\n\t\t/* c8 ignore next 18 */\n\t\tif (process.version < 'v14') {\n\t\t\t// Before Node.js 14, pipeline() does not fully support async iterators and does not always\n\t\t\t// properly handle when the socket close/end events are out of order.\n\t\t\trequest_.on('socket', s => {\n\t\t\t\tlet endedWithEventsCount;\n\t\t\t\ts.prependListener('end', () => {\n\t\t\t\t\tendedWithEventsCount = s._eventsCount;\n\t\t\t\t});\n\t\t\t\ts.prependListener('close', hadError => {\n\t\t\t\t\t// if end happened before close but the socket didn't emit an error, do it now\n\t\t\t\t\tif (response && endedWithEventsCount < s._eventsCount && !hadError) {\n\t\t\t\t\t\tconst error = new Error('Premature close');\n\t\t\t\t\t\terror.code = 'ERR_STREAM_PREMATURE_CLOSE';\n\t\t\t\t\t\tresponse.body.emit('error', error);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\trequest_.on('response', response_ => {\n\t\t\trequest_.setTimeout(0);\n\t\t\tconst headers = fromRawHeaders(response_.rawHeaders);\n\n\t\t\t// HTTP fetch step 5\n\t\t\tif (isRedirect(response_.statusCode)) {\n\t\t\t\t// HTTP fetch step 5.2\n\t\t\t\tconst location = headers.get('Location');\n\n\t\t\t\t// HTTP fetch step 5.3\n\t\t\t\tlet locationURL = null;\n\t\t\t\ttry {\n\t\t\t\t\tlocationURL = location === null ? null : new URL(location, request.url);\n\t\t\t\t} catch {\n\t\t\t\t\t// error here can only be invalid URL in Location: header\n\t\t\t\t\t// do not throw when options.redirect == manual\n\t\t\t\t\t// let the user extract the errorneous redirect URL\n\t\t\t\t\tif (request.redirect !== 'manual') {\n\t\t\t\t\t\treject(new FetchError(`uri requested responds with an invalid redirect URL: ${location}`, 'invalid-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// HTTP fetch step 5.5\n\t\t\t\tswitch (request.redirect) {\n\t\t\t\t\tcase 'error':\n\t\t\t\t\t\treject(new FetchError(`uri requested responds with a redirect, redirect mode is set to error: ${request.url}`, 'no-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\tcase 'manual':\n\t\t\t\t\t\t// Nothing to do\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'follow': {\n\t\t\t\t\t\t// HTTP-redirect fetch step 2\n\t\t\t\t\t\tif (locationURL === null) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 5\n\t\t\t\t\t\tif (request.counter >= request.follow) {\n\t\t\t\t\t\t\treject(new FetchError(`maximum redirect reached at: ${request.url}`, 'max-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 6 (counter increment)\n\t\t\t\t\t\t// Create a new Request object.\n\t\t\t\t\t\tconst requestOptions = {\n\t\t\t\t\t\t\theaders: new Headers(request.headers),\n\t\t\t\t\t\t\tfollow: request.follow,\n\t\t\t\t\t\t\tcounter: request.counter + 1,\n\t\t\t\t\t\t\tagent: request.agent,\n\t\t\t\t\t\t\tcompress: request.compress,\n\t\t\t\t\t\t\tmethod: request.method,\n\t\t\t\t\t\t\tbody: clone(request),\n\t\t\t\t\t\t\tsignal: request.signal,\n\t\t\t\t\t\t\tsize: request.size,\n\t\t\t\t\t\t\treferrer: request.referrer,\n\t\t\t\t\t\t\treferrerPolicy: request.referrerPolicy\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// when forwarding sensitive headers like \"Authorization\",\n\t\t\t\t\t\t// \"WWW-Authenticate\", and \"Cookie\" to untrusted targets,\n\t\t\t\t\t\t// headers will be ignored when following a redirect to a domain\n\t\t\t\t\t\t// that is not a subdomain match or exact match of the initial domain.\n\t\t\t\t\t\t// For example, a redirect from \"foo.com\" to either \"foo.com\" or \"sub.foo.com\"\n\t\t\t\t\t\t// will forward the sensitive headers, but a redirect to \"bar.com\" will not.\n\t\t\t\t\t\t// headers will also be ignored when following a redirect to a domain using\n\t\t\t\t\t\t// a different protocol. For example, a redirect from \"https://foo.com\" to \"http://foo.com\"\n\t\t\t\t\t\t// will not forward the sensitive headers\n\t\t\t\t\t\tif (!isDomainOrSubdomain(request.url, locationURL) || !isSameProtocol(request.url, locationURL)) {\n\t\t\t\t\t\t\tfor (const name of ['authorization', 'www-authenticate', 'cookie', 'cookie2']) {\n\t\t\t\t\t\t\t\trequestOptions.headers.delete(name);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 9\n\t\t\t\t\t\tif (response_.statusCode !== 303 && request.body && options_.body instanceof Stream.Readable) {\n\t\t\t\t\t\t\treject(new FetchError('Cannot follow redirect with body being a readable stream', 'unsupported-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 11\n\t\t\t\t\t\tif (response_.statusCode === 303 || ((response_.statusCode === 301 || response_.statusCode === 302) && request.method === 'POST')) {\n\t\t\t\t\t\t\trequestOptions.method = 'GET';\n\t\t\t\t\t\t\trequestOptions.body = undefined;\n\t\t\t\t\t\t\trequestOptions.headers.delete('content-length');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 14\n\t\t\t\t\t\tconst responseReferrerPolicy = parseReferrerPolicyFromHeader(headers);\n\t\t\t\t\t\tif (responseReferrerPolicy) {\n\t\t\t\t\t\t\trequestOptions.referrerPolicy = responseReferrerPolicy;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 15\n\t\t\t\t\t\tresolve(fetch(new Request(locationURL, requestOptions)));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn reject(new TypeError(`Redirect option '${request.redirect}' is not a valid value of RequestRedirect`));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Prepare response\n\t\t\tif (signal) {\n\t\t\t\tresponse_.once('end', () => {\n\t\t\t\t\tsignal.removeEventListener('abort', abortAndFinalize);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tlet body = pump(response_, new PassThrough(), error => {\n\t\t\t\tif (error) {\n\t\t\t\t\treject(error);\n\t\t\t\t}\n\t\t\t});\n\t\t\t// see https://github.com/nodejs/node/pull/29376\n\t\t\t/* c8 ignore next 3 */\n\t\t\tif (process.version < 'v12.10') {\n\t\t\t\tresponse_.on('aborted', abortAndFinalize);\n\t\t\t}\n\n\t\t\tconst responseOptions = {\n\t\t\t\turl: request.url,\n\t\t\t\tstatus: response_.statusCode,\n\t\t\t\tstatusText: response_.statusMessage,\n\t\t\t\theaders,\n\t\t\t\tsize: request.size,\n\t\t\t\tcounter: request.counter,\n\t\t\t\thighWaterMark: request.highWaterMark\n\t\t\t};\n\n\t\t\t// HTTP-network fetch step 12.1.1.3\n\t\t\tconst codings = headers.get('Content-Encoding');\n\n\t\t\t// HTTP-network fetch step 12.1.1.4: handle content codings\n\n\t\t\t// in following scenarios we ignore compression support\n\t\t\t// 1. compression support is disabled\n\t\t\t// 2. HEAD request\n\t\t\t// 3. no Content-Encoding header\n\t\t\t// 4. no content response (204)\n\t\t\t// 5. content not modified response (304)\n\t\t\tif (!request.compress || request.method === 'HEAD' || codings === null || response_.statusCode === 204 || response_.statusCode === 304) {\n\t\t\t\tresponse = new Response(body, responseOptions);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For Node v6+\n\t\t\t// Be less strict when decoding compressed responses, since sometimes\n\t\t\t// servers send slightly invalid responses that are still accepted\n\t\t\t// by common browsers.\n\t\t\t// Always using Z_SYNC_FLUSH is what cURL does.\n\t\t\tconst zlibOptions = {\n\t\t\t\tflush: zlib.Z_SYNC_FLUSH,\n\t\t\t\tfinishFlush: zlib.Z_SYNC_FLUSH\n\t\t\t};\n\n\t\t\t// For gzip\n\t\t\tif (codings === 'gzip' || codings === 'x-gzip') {\n\t\t\t\tbody = pump(body, zlib.createGunzip(zlibOptions), error => {\n\t\t\t\t\tif (error) {\n\t\t\t\t\t\treject(error);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tresponse = new Response(body, responseOptions);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For deflate\n\t\t\tif (codings === 'deflate' || codings === 'x-deflate') {\n\t\t\t\t// Handle the infamous raw deflate response from old servers\n\t\t\t\t// a hack for old IIS and Apache servers\n\t\t\t\tconst raw = pump(response_, new PassThrough(), error => {\n\t\t\t\t\tif (error) {\n\t\t\t\t\t\treject(error);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\traw.once('data', chunk => {\n\t\t\t\t\t// See http://stackoverflow.com/questions/37519828\n\t\t\t\t\tif ((chunk[0] & 0x0F) === 0x08) {\n\t\t\t\t\t\tbody = pump(body, zlib.createInflate(), error => {\n\t\t\t\t\t\t\tif (error) {\n\t\t\t\t\t\t\t\treject(error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbody = pump(body, zlib.createInflateRaw(), error => {\n\t\t\t\t\t\t\tif (error) {\n\t\t\t\t\t\t\t\treject(error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tresponse = new Response(body, responseOptions);\n\t\t\t\t\tresolve(response);\n\t\t\t\t});\n\t\t\t\traw.once('end', () => {\n\t\t\t\t\t// Some old IIS servers return zero-length OK deflate responses, so\n\t\t\t\t\t// 'data' is never emitted. See https://github.com/node-fetch/node-fetch/pull/903\n\t\t\t\t\tif (!response) {\n\t\t\t\t\t\tresponse = new Response(body, responseOptions);\n\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For br\n\t\t\tif (codings === 'br') {\n\t\t\t\tbody = pump(body, zlib.createBrotliDecompress(), error => {\n\t\t\t\t\tif (error) {\n\t\t\t\t\t\treject(error);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tresponse = new Response(body, responseOptions);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Otherwise, use response as-is\n\t\t\tresponse = new Response(body, responseOptions);\n\t\t\tresolve(response);\n\t\t});\n\n\t\t// eslint-disable-next-line promise/prefer-await-to-then\n\t\twriteToStream(request_, request).catch(reject);\n\t});\n}\n\nfunction fixResponseChunkedTransferBadEnding(request, errorCallback) {\n\tconst LAST_CHUNK = Buffer.from('0\\r\\n\\r\\n');\n\n\tlet isChunkedTransfer = false;\n\tlet properLastChunkReceived = false;\n\tlet previousChunk;\n\n\trequest.on('response', response => {\n\t\tconst {headers} = response;\n\t\tisChunkedTransfer = headers['transfer-encoding'] === 'chunked' && !headers['content-length'];\n\t});\n\n\trequest.on('socket', socket => {\n\t\tconst onSocketClose = () => {\n\t\t\tif (isChunkedTransfer && !properLastChunkReceived) {\n\t\t\t\tconst error = new Error('Premature close');\n\t\t\t\terror.code = 'ERR_STREAM_PREMATURE_CLOSE';\n\t\t\t\terrorCallback(error);\n\t\t\t}\n\t\t};\n\n\t\tconst onData = buf => {\n\t\t\tproperLastChunkReceived = Buffer.compare(buf.slice(-5), LAST_CHUNK) === 0;\n\n\t\t\t// Sometimes final 0-length chunk and end of message code are in separate packets\n\t\t\tif (!properLastChunkReceived && previousChunk) {\n\t\t\t\tproperLastChunkReceived = (\n\t\t\t\t\tBuffer.compare(previousChunk.slice(-3), LAST_CHUNK.slice(0, 3)) === 0 &&\n\t\t\t\t\tBuffer.compare(buf.slice(-2), LAST_CHUNK.slice(3)) === 0\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tpreviousChunk = buf;\n\t\t};\n\n\t\tsocket.prependListener('close', onSocketClose);\n\t\tsocket.on('data', onData);\n\n\t\trequest.on('close', () => {\n\t\t\tsocket.removeListener('close', onSocketClose);\n\t\t\tsocket.removeListener('data', onData);\n\t\t});\n\t});\n}\n","export const getSearch = parsedURL => {\n\tif (parsedURL.search) {\n\t\treturn parsedURL.search;\n\t}\n\n\tconst lastOffset = parsedURL.href.length - 1;\n\tconst hash = parsedURL.hash || (parsedURL.href[lastOffset] === '#' ? '#' : '');\n\treturn parsedURL.href[lastOffset - hash.length] === '?' ? '?' : '';\n};\n","/**\n * Returns a `Buffer` instance from the given data URI `uri`.\n *\n * @param {String} uri Data URI to turn into a Buffer instance\n * @returns {Buffer} Buffer instance from Data URI\n * @api public\n */\nexport function dataUriToBuffer(uri) {\n    if (!/^data:/i.test(uri)) {\n        throw new TypeError('`uri` does not appear to be a Data URI (must begin with \"data:\")');\n    }\n    // strip newlines\n    uri = uri.replace(/\\r?\\n/g, '');\n    // split the URI up into the \"metadata\" and the \"data\" portions\n    const firstComma = uri.indexOf(',');\n    if (firstComma === -1 || firstComma <= 4) {\n        throw new TypeError('malformed data: URI');\n    }\n    // remove the \"data:\" scheme and parse the metadata\n    const meta = uri.substring(5, firstComma).split(';');\n    let charset = '';\n    let base64 = false;\n    const type = meta[0] || 'text/plain';\n    let typeFull = type;\n    for (let i = 1; i < meta.length; i++) {\n        if (meta[i] === 'base64') {\n            base64 = true;\n        }\n        else if (meta[i]) {\n            typeFull += `;${meta[i]}`;\n            if (meta[i].indexOf('charset=') === 0) {\n                charset = meta[i].substring(8);\n            }\n        }\n    }\n    // defaults to US-ASCII only if type is not provided\n    if (!meta[0] && !charset.length) {\n        typeFull += ';charset=US-ASCII';\n        charset = 'US-ASCII';\n    }\n    // get the encoded data portion and decode URI-encoded chars\n    const encoding = base64 ? 'base64' : 'ascii';\n    const data = unescape(uri.substring(firstComma + 1));\n    const buffer = Buffer.from(data, encoding);\n    // set `.type` and `.typeFull` properties to MIME type\n    buffer.type = type;\n    buffer.typeFull = typeFull;\n    // set the `.charset` property\n    buffer.charset = charset;\n    return buffer;\n}\nexport default dataUriToBuffer;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst id_1 = require(\"./id\");\nconst ref_1 = require(\"./ref\");\nconst core = [\n    \"$schema\",\n    \"$id\",\n    \"$defs\",\n    \"$vocabulary\",\n    { keyword: \"$comment\" },\n    \"definitions\",\n    id_1.default,\n    ref_1.default,\n];\nexports.default = core;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getData = exports.KeywordCxt = exports.validateFunctionCode = void 0;\nconst boolSchema_1 = require(\"./boolSchema\");\nconst dataType_1 = require(\"./dataType\");\nconst applicability_1 = require(\"./applicability\");\nconst dataType_2 = require(\"./dataType\");\nconst defaults_1 = require(\"./defaults\");\nconst keyword_1 = require(\"./keyword\");\nconst subschema_1 = require(\"./subschema\");\nconst codegen_1 = require(\"../codegen\");\nconst names_1 = require(\"../names\");\nconst resolve_1 = require(\"../resolve\");\nconst util_1 = require(\"../util\");\nconst errors_1 = require(\"../errors\");\n// schema compilation - generates validation function, subschemaCode (below) is used for subschemas\nfunction validateFunctionCode(it) {\n    if (isSchemaObj(it)) {\n        checkKeywords(it);\n        if (schemaCxtHasRules(it)) {\n            topSchemaObjCode(it);\n            return;\n        }\n    }\n    validateFunction(it, () => (0, boolSchema_1.topBoolOrEmptySchema)(it));\n}\nexports.validateFunctionCode = validateFunctionCode;\nfunction validateFunction({ gen, validateName, schema, schemaEnv, opts }, body) {\n    if (opts.code.es5) {\n        gen.func(validateName, (0, codegen_1._) `${names_1.default.data}, ${names_1.default.valCxt}`, schemaEnv.$async, () => {\n            gen.code((0, codegen_1._) `\"use strict\"; ${funcSourceUrl(schema, opts)}`);\n            destructureValCxtES5(gen, opts);\n            gen.code(body);\n        });\n    }\n    else {\n        gen.func(validateName, (0, codegen_1._) `${names_1.default.data}, ${destructureValCxt(opts)}`, schemaEnv.$async, () => gen.code(funcSourceUrl(schema, opts)).code(body));\n    }\n}\nfunction destructureValCxt(opts) {\n    return (0, codegen_1._) `{${names_1.default.instancePath}=\"\", ${names_1.default.parentData}, ${names_1.default.parentDataProperty}, ${names_1.default.rootData}=${names_1.default.data}${opts.dynamicRef ? (0, codegen_1._) `, ${names_1.default.dynamicAnchors}={}` : codegen_1.nil}}={}`;\n}\nfunction destructureValCxtES5(gen, opts) {\n    gen.if(names_1.default.valCxt, () => {\n        gen.var(names_1.default.instancePath, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.instancePath}`);\n        gen.var(names_1.default.parentData, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.parentData}`);\n        gen.var(names_1.default.parentDataProperty, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.parentDataProperty}`);\n        gen.var(names_1.default.rootData, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.rootData}`);\n        if (opts.dynamicRef)\n            gen.var(names_1.default.dynamicAnchors, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.dynamicAnchors}`);\n    }, () => {\n        gen.var(names_1.default.instancePath, (0, codegen_1._) `\"\"`);\n        gen.var(names_1.default.parentData, (0, codegen_1._) `undefined`);\n        gen.var(names_1.default.parentDataProperty, (0, codegen_1._) `undefined`);\n        gen.var(names_1.default.rootData, names_1.default.data);\n        if (opts.dynamicRef)\n            gen.var(names_1.default.dynamicAnchors, (0, codegen_1._) `{}`);\n    });\n}\nfunction topSchemaObjCode(it) {\n    const { schema, opts, gen } = it;\n    validateFunction(it, () => {\n        if (opts.$comment && schema.$comment)\n            commentKeyword(it);\n        checkNoDefault(it);\n        gen.let(names_1.default.vErrors, null);\n        gen.let(names_1.default.errors, 0);\n        if (opts.unevaluated)\n            resetEvaluated(it);\n        typeAndKeywords(it);\n        returnResults(it);\n    });\n    return;\n}\nfunction resetEvaluated(it) {\n    // TODO maybe some hook to execute it in the end to check whether props/items are Name, as in assignEvaluated\n    const { gen, validateName } = it;\n    it.evaluated = gen.const(\"evaluated\", (0, codegen_1._) `${validateName}.evaluated`);\n    gen.if((0, codegen_1._) `${it.evaluated}.dynamicProps`, () => gen.assign((0, codegen_1._) `${it.evaluated}.props`, (0, codegen_1._) `undefined`));\n    gen.if((0, codegen_1._) `${it.evaluated}.dynamicItems`, () => gen.assign((0, codegen_1._) `${it.evaluated}.items`, (0, codegen_1._) `undefined`));\n}\nfunction funcSourceUrl(schema, opts) {\n    const schId = typeof schema == \"object\" && schema[opts.schemaId];\n    return schId && (opts.code.source || opts.code.process) ? (0, codegen_1._) `/*# sourceURL=${schId} */` : codegen_1.nil;\n}\n// schema compilation - this function is used recursively to generate code for sub-schemas\nfunction subschemaCode(it, valid) {\n    if (isSchemaObj(it)) {\n        checkKeywords(it);\n        if (schemaCxtHasRules(it)) {\n            subSchemaObjCode(it, valid);\n            return;\n        }\n    }\n    (0, boolSchema_1.boolOrEmptySchema)(it, valid);\n}\nfunction schemaCxtHasRules({ schema, self }) {\n    if (typeof schema == \"boolean\")\n        return !schema;\n    for (const key in schema)\n        if (self.RULES.all[key])\n            return true;\n    return false;\n}\nfunction isSchemaObj(it) {\n    return typeof it.schema != \"boolean\";\n}\nfunction subSchemaObjCode(it, valid) {\n    const { schema, gen, opts } = it;\n    if (opts.$comment && schema.$comment)\n        commentKeyword(it);\n    updateContext(it);\n    checkAsyncSchema(it);\n    const errsCount = gen.const(\"_errs\", names_1.default.errors);\n    typeAndKeywords(it, errsCount);\n    // TODO var\n    gen.var(valid, (0, codegen_1._) `${errsCount} === ${names_1.default.errors}`);\n}\nfunction checkKeywords(it) {\n    (0, util_1.checkUnknownRules)(it);\n    checkRefsAndKeywords(it);\n}\nfunction typeAndKeywords(it, errsCount) {\n    if (it.opts.jtd)\n        return schemaKeywords(it, [], false, errsCount);\n    const types = (0, dataType_1.getSchemaTypes)(it.schema);\n    const checkedTypes = (0, dataType_1.coerceAndCheckDataType)(it, types);\n    schemaKeywords(it, types, !checkedTypes, errsCount);\n}\nfunction checkRefsAndKeywords(it) {\n    const { schema, errSchemaPath, opts, self } = it;\n    if (schema.$ref && opts.ignoreKeywordsWithRef && (0, util_1.schemaHasRulesButRef)(schema, self.RULES)) {\n        self.logger.warn(`$ref: keywords ignored in schema at path \"${errSchemaPath}\"`);\n    }\n}\nfunction checkNoDefault(it) {\n    const { schema, opts } = it;\n    if (schema.default !== undefined && opts.useDefaults && opts.strictSchema) {\n        (0, util_1.checkStrictMode)(it, \"default is ignored in the schema root\");\n    }\n}\nfunction updateContext(it) {\n    const schId = it.schema[it.opts.schemaId];\n    if (schId)\n        it.baseId = (0, resolve_1.resolveUrl)(it.opts.uriResolver, it.baseId, schId);\n}\nfunction checkAsyncSchema(it) {\n    if (it.schema.$async && !it.schemaEnv.$async)\n        throw new Error(\"async schema in sync schema\");\n}\nfunction commentKeyword({ gen, schemaEnv, schema, errSchemaPath, opts }) {\n    const msg = schema.$comment;\n    if (opts.$comment === true) {\n        gen.code((0, codegen_1._) `${names_1.default.self}.logger.log(${msg})`);\n    }\n    else if (typeof opts.$comment == \"function\") {\n        const schemaPath = (0, codegen_1.str) `${errSchemaPath}/$comment`;\n        const rootName = gen.scopeValue(\"root\", { ref: schemaEnv.root });\n        gen.code((0, codegen_1._) `${names_1.default.self}.opts.$comment(${msg}, ${schemaPath}, ${rootName}.schema)`);\n    }\n}\nfunction returnResults(it) {\n    const { gen, schemaEnv, validateName, ValidationError, opts } = it;\n    if (schemaEnv.$async) {\n        // TODO assign unevaluated\n        gen.if((0, codegen_1._) `${names_1.default.errors} === 0`, () => gen.return(names_1.default.data), () => gen.throw((0, codegen_1._) `new ${ValidationError}(${names_1.default.vErrors})`));\n    }\n    else {\n        gen.assign((0, codegen_1._) `${validateName}.errors`, names_1.default.vErrors);\n        if (opts.unevaluated)\n            assignEvaluated(it);\n        gen.return((0, codegen_1._) `${names_1.default.errors} === 0`);\n    }\n}\nfunction assignEvaluated({ gen, evaluated, props, items }) {\n    if (props instanceof codegen_1.Name)\n        gen.assign((0, codegen_1._) `${evaluated}.props`, props);\n    if (items instanceof codegen_1.Name)\n        gen.assign((0, codegen_1._) `${evaluated}.items`, items);\n}\nfunction schemaKeywords(it, types, typeErrors, errsCount) {\n    const { gen, schema, data, allErrors, opts, self } = it;\n    const { RULES } = self;\n    if (schema.$ref && (opts.ignoreKeywordsWithRef || !(0, util_1.schemaHasRulesButRef)(schema, RULES))) {\n        gen.block(() => keywordCode(it, \"$ref\", RULES.all.$ref.definition)); // TODO typecast\n        return;\n    }\n    if (!opts.jtd)\n        checkStrictTypes(it, types);\n    gen.block(() => {\n        for (const group of RULES.rules)\n            groupKeywords(group);\n        groupKeywords(RULES.post);\n    });\n    function groupKeywords(group) {\n        if (!(0, applicability_1.shouldUseGroup)(schema, group))\n            return;\n        if (group.type) {\n            gen.if((0, dataType_2.checkDataType)(group.type, data, opts.strictNumbers));\n            iterateKeywords(it, group);\n            if (types.length === 1 && types[0] === group.type && typeErrors) {\n                gen.else();\n                (0, dataType_2.reportTypeError)(it);\n            }\n            gen.endIf();\n        }\n        else {\n            iterateKeywords(it, group);\n        }\n        // TODO make it \"ok\" call?\n        if (!allErrors)\n            gen.if((0, codegen_1._) `${names_1.default.errors} === ${errsCount || 0}`);\n    }\n}\nfunction iterateKeywords(it, group) {\n    const { gen, schema, opts: { useDefaults }, } = it;\n    if (useDefaults)\n        (0, defaults_1.assignDefaults)(it, group.type);\n    gen.block(() => {\n        for (const rule of group.rules) {\n            if ((0, applicability_1.shouldUseRule)(schema, rule)) {\n                keywordCode(it, rule.keyword, rule.definition, group.type);\n            }\n        }\n    });\n}\nfunction checkStrictTypes(it, types) {\n    if (it.schemaEnv.meta || !it.opts.strictTypes)\n        return;\n    checkContextTypes(it, types);\n    if (!it.opts.allowUnionTypes)\n        checkMultipleTypes(it, types);\n    checkKeywordTypes(it, it.dataTypes);\n}\nfunction checkContextTypes(it, types) {\n    if (!types.length)\n        return;\n    if (!it.dataTypes.length) {\n        it.dataTypes = types;\n        return;\n    }\n    types.forEach((t) => {\n        if (!includesType(it.dataTypes, t)) {\n            strictTypesError(it, `type \"${t}\" not allowed by context \"${it.dataTypes.join(\",\")}\"`);\n        }\n    });\n    narrowSchemaTypes(it, types);\n}\nfunction checkMultipleTypes(it, ts) {\n    if (ts.length > 1 && !(ts.length === 2 && ts.includes(\"null\"))) {\n        strictTypesError(it, \"use allowUnionTypes to allow union type keyword\");\n    }\n}\nfunction checkKeywordTypes(it, ts) {\n    const rules = it.self.RULES.all;\n    for (const keyword in rules) {\n        const rule = rules[keyword];\n        if (typeof rule == \"object\" && (0, applicability_1.shouldUseRule)(it.schema, rule)) {\n            const { type } = rule.definition;\n            if (type.length && !type.some((t) => hasApplicableType(ts, t))) {\n                strictTypesError(it, `missing type \"${type.join(\",\")}\" for keyword \"${keyword}\"`);\n            }\n        }\n    }\n}\nfunction hasApplicableType(schTs, kwdT) {\n    return schTs.includes(kwdT) || (kwdT === \"number\" && schTs.includes(\"integer\"));\n}\nfunction includesType(ts, t) {\n    return ts.includes(t) || (t === \"integer\" && ts.includes(\"number\"));\n}\nfunction narrowSchemaTypes(it, withTypes) {\n    const ts = [];\n    for (const t of it.dataTypes) {\n        if (includesType(withTypes, t))\n            ts.push(t);\n        else if (withTypes.includes(\"integer\") && t === \"number\")\n            ts.push(\"integer\");\n    }\n    it.dataTypes = ts;\n}\nfunction strictTypesError(it, msg) {\n    const schemaPath = it.schemaEnv.baseId + it.errSchemaPath;\n    msg += ` at \"${schemaPath}\" (strictTypes)`;\n    (0, util_1.checkStrictMode)(it, msg, it.opts.strictTypes);\n}\nclass KeywordCxt {\n    constructor(it, def, keyword) {\n        (0, keyword_1.validateKeywordUsage)(it, def, keyword);\n        this.gen = it.gen;\n        this.allErrors = it.allErrors;\n        this.keyword = keyword;\n        this.data = it.data;\n        this.schema = it.schema[keyword];\n        this.$data = def.$data && it.opts.$data && this.schema && this.schema.$data;\n        this.schemaValue = (0, util_1.schemaRefOrVal)(it, this.schema, keyword, this.$data);\n        this.schemaType = def.schemaType;\n        this.parentSchema = it.schema;\n        this.params = {};\n        this.it = it;\n        this.def = def;\n        if (this.$data) {\n            this.schemaCode = it.gen.const(\"vSchema\", getData(this.$data, it));\n        }\n        else {\n            this.schemaCode = this.schemaValue;\n            if (!(0, keyword_1.validSchemaType)(this.schema, def.schemaType, def.allowUndefined)) {\n                throw new Error(`${keyword} value must be ${JSON.stringify(def.schemaType)}`);\n            }\n        }\n        if (\"code\" in def ? def.trackErrors : def.errors !== false) {\n            this.errsCount = it.gen.const(\"_errs\", names_1.default.errors);\n        }\n    }\n    result(condition, successAction, failAction) {\n        this.failResult((0, codegen_1.not)(condition), successAction, failAction);\n    }\n    failResult(condition, successAction, failAction) {\n        this.gen.if(condition);\n        if (failAction)\n            failAction();\n        else\n            this.error();\n        if (successAction) {\n            this.gen.else();\n            successAction();\n            if (this.allErrors)\n                this.gen.endIf();\n        }\n        else {\n            if (this.allErrors)\n                this.gen.endIf();\n            else\n                this.gen.else();\n        }\n    }\n    pass(condition, failAction) {\n        this.failResult((0, codegen_1.not)(condition), undefined, failAction);\n    }\n    fail(condition) {\n        if (condition === undefined) {\n            this.error();\n            if (!this.allErrors)\n                this.gen.if(false); // this branch will be removed by gen.optimize\n            return;\n        }\n        this.gen.if(condition);\n        this.error();\n        if (this.allErrors)\n            this.gen.endIf();\n        else\n            this.gen.else();\n    }\n    fail$data(condition) {\n        if (!this.$data)\n            return this.fail(condition);\n        const { schemaCode } = this;\n        this.fail((0, codegen_1._) `${schemaCode} !== undefined && (${(0, codegen_1.or)(this.invalid$data(), condition)})`);\n    }\n    error(append, errorParams, errorPaths) {\n        if (errorParams) {\n            this.setParams(errorParams);\n            this._error(append, errorPaths);\n            this.setParams({});\n            return;\n        }\n        this._error(append, errorPaths);\n    }\n    _error(append, errorPaths) {\n        ;\n        (append ? errors_1.reportExtraError : errors_1.reportError)(this, this.def.error, errorPaths);\n    }\n    $dataError() {\n        (0, errors_1.reportError)(this, this.def.$dataError || errors_1.keyword$DataError);\n    }\n    reset() {\n        if (this.errsCount === undefined)\n            throw new Error('add \"trackErrors\" to keyword definition');\n        (0, errors_1.resetErrorsCount)(this.gen, this.errsCount);\n    }\n    ok(cond) {\n        if (!this.allErrors)\n            this.gen.if(cond);\n    }\n    setParams(obj, assign) {\n        if (assign)\n            Object.assign(this.params, obj);\n        else\n            this.params = obj;\n    }\n    block$data(valid, codeBlock, $dataValid = codegen_1.nil) {\n        this.gen.block(() => {\n            this.check$data(valid, $dataValid);\n            codeBlock();\n        });\n    }\n    check$data(valid = codegen_1.nil, $dataValid = codegen_1.nil) {\n        if (!this.$data)\n            return;\n        const { gen, schemaCode, schemaType, def } = this;\n        gen.if((0, codegen_1.or)((0, codegen_1._) `${schemaCode} === undefined`, $dataValid));\n        if (valid !== codegen_1.nil)\n            gen.assign(valid, true);\n        if (schemaType.length || def.validateSchema) {\n            gen.elseIf(this.invalid$data());\n            this.$dataError();\n            if (valid !== codegen_1.nil)\n                gen.assign(valid, false);\n        }\n        gen.else();\n    }\n    invalid$data() {\n        const { gen, schemaCode, schemaType, def, it } = this;\n        return (0, codegen_1.or)(wrong$DataType(), invalid$DataSchema());\n        function wrong$DataType() {\n            if (schemaType.length) {\n                /* istanbul ignore if */\n                if (!(schemaCode instanceof codegen_1.Name))\n                    throw new Error(\"ajv implementation error\");\n                const st = Array.isArray(schemaType) ? schemaType : [schemaType];\n                return (0, codegen_1._) `${(0, dataType_2.checkDataTypes)(st, schemaCode, it.opts.strictNumbers, dataType_2.DataType.Wrong)}`;\n            }\n            return codegen_1.nil;\n        }\n        function invalid$DataSchema() {\n            if (def.validateSchema) {\n                const validateSchemaRef = gen.scopeValue(\"validate$data\", { ref: def.validateSchema }); // TODO value.code for standalone\n                return (0, codegen_1._) `!${validateSchemaRef}(${schemaCode})`;\n            }\n            return codegen_1.nil;\n        }\n    }\n    subschema(appl, valid) {\n        const subschema = (0, subschema_1.getSubschema)(this.it, appl);\n        (0, subschema_1.extendSubschemaData)(subschema, this.it, appl);\n        (0, subschema_1.extendSubschemaMode)(subschema, appl);\n        const nextContext = { ...this.it, ...subschema, items: undefined, props: undefined };\n        subschemaCode(nextContext, valid);\n        return nextContext;\n    }\n    mergeEvaluated(schemaCxt, toName) {\n        const { it, gen } = this;\n        if (!it.opts.unevaluated)\n            return;\n        if (it.props !== true && schemaCxt.props !== undefined) {\n            it.props = util_1.mergeEvaluated.props(gen, schemaCxt.props, it.props, toName);\n        }\n        if (it.items !== true && schemaCxt.items !== undefined) {\n            it.items = util_1.mergeEvaluated.items(gen, schemaCxt.items, it.items, toName);\n        }\n    }\n    mergeValidEvaluated(schemaCxt, valid) {\n        const { it, gen } = this;\n        if (it.opts.unevaluated && (it.props !== true || it.items !== true)) {\n            gen.if(valid, () => this.mergeEvaluated(schemaCxt, codegen_1.Name));\n            return true;\n        }\n    }\n}\nexports.KeywordCxt = KeywordCxt;\nfunction keywordCode(it, keyword, def, ruleType) {\n    const cxt = new KeywordCxt(it, def, keyword);\n    if (\"code\" in def) {\n        def.code(cxt, ruleType);\n    }\n    else if (cxt.$data && def.validate) {\n        (0, keyword_1.funcKeywordCode)(cxt, def);\n    }\n    else if (\"macro\" in def) {\n        (0, keyword_1.macroKeywordCode)(cxt, def);\n    }\n    else if (def.compile || def.validate) {\n        (0, keyword_1.funcKeywordCode)(cxt, def);\n    }\n}\nconst JSON_POINTER = /^\\/(?:[^~]|~0|~1)*$/;\nconst RELATIVE_JSON_POINTER = /^([0-9]+)(#|\\/(?:[^~]|~0|~1)*)?$/;\nfunction getData($data, { dataLevel, dataNames, dataPathArr }) {\n    let jsonPointer;\n    let data;\n    if ($data === \"\")\n        return names_1.default.rootData;\n    if ($data[0] === \"/\") {\n        if (!JSON_POINTER.test($data))\n            throw new Error(`Invalid JSON-pointer: ${$data}`);\n        jsonPointer = $data;\n        data = names_1.default.rootData;\n    }\n    else {\n        const matches = RELATIVE_JSON_POINTER.exec($data);\n        if (!matches)\n            throw new Error(`Invalid JSON-pointer: ${$data}`);\n        const up = +matches[1];\n        jsonPointer = matches[2];\n        if (jsonPointer === \"#\") {\n            if (up >= dataLevel)\n                throw new Error(errorMsg(\"property/index\", up));\n            return dataPathArr[dataLevel - up];\n        }\n        if (up > dataLevel)\n            throw new Error(errorMsg(\"data\", up));\n        data = dataNames[dataLevel - up];\n        if (!jsonPointer)\n            return data;\n    }\n    let expr = data;\n    const segments = jsonPointer.split(\"/\");\n    for (const segment of segments) {\n        if (segment) {\n            data = (0, codegen_1._) `${data}${(0, codegen_1.getProperty)((0, util_1.unescapeJsonPointer)(segment))}`;\n            expr = (0, codegen_1._) `${expr} && ${data}`;\n        }\n    }\n    return expr;\n    function errorMsg(pointerType, up) {\n        return `Cannot access ${pointerType} ${up} levels up, current level is ${dataLevel}`;\n    }\n}\nexports.getData = getData;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params: { min, max } }) => max === undefined\n        ? (0, codegen_1.str) `must contain at least ${min} valid item(s)`\n        : (0, codegen_1.str) `must contain at least ${min} and no more than ${max} valid item(s)`,\n    params: ({ params: { min, max } }) => max === undefined ? (0, codegen_1._) `{minContains: ${min}}` : (0, codegen_1._) `{minContains: ${min}, maxContains: ${max}}`,\n};\nconst def = {\n    keyword: \"contains\",\n    type: \"array\",\n    schemaType: [\"object\", \"boolean\"],\n    before: \"uniqueItems\",\n    trackErrors: true,\n    error,\n    code(cxt) {\n        const { gen, schema, parentSchema, data, it } = cxt;\n        let min;\n        let max;\n        const { minContains, maxContains } = parentSchema;\n        if (it.opts.next) {\n            min = minContains === undefined ? 1 : minContains;\n            max = maxContains;\n        }\n        else {\n            min = 1;\n        }\n        const len = gen.const(\"len\", (0, codegen_1._) `${data}.length`);\n        cxt.setParams({ min, max });\n        if (max === undefined && min === 0) {\n            (0, util_1.checkStrictMode)(it, `\"minContains\" == 0 without \"maxContains\": \"contains\" keyword ignored`);\n            return;\n        }\n        if (max !== undefined && min > max) {\n            (0, util_1.checkStrictMode)(it, `\"minContains\" > \"maxContains\" is always invalid`);\n            cxt.fail();\n            return;\n        }\n        if ((0, util_1.alwaysValidSchema)(it, schema)) {\n            let cond = (0, codegen_1._) `${len} >= ${min}`;\n            if (max !== undefined)\n                cond = (0, codegen_1._) `${cond} && ${len} <= ${max}`;\n            cxt.pass(cond);\n            return;\n        }\n        it.items = true;\n        const valid = gen.name(\"valid\");\n        if (max === undefined && min === 1) {\n            validateItems(valid, () => gen.if(valid, () => gen.break()));\n        }\n        else if (min === 0) {\n            gen.let(valid, true);\n            if (max !== undefined)\n                gen.if((0, codegen_1._) `${data}.length > 0`, validateItemsWithCount);\n        }\n        else {\n            gen.let(valid, false);\n            validateItemsWithCount();\n        }\n        cxt.result(valid, () => cxt.reset());\n        function validateItemsWithCount() {\n            const schValid = gen.name(\"_valid\");\n            const count = gen.let(\"count\", 0);\n            validateItems(schValid, () => gen.if(schValid, () => checkLimits(count)));\n        }\n        function validateItems(_valid, block) {\n            gen.forRange(\"i\", 0, len, (i) => {\n                cxt.subschema({\n                    keyword: \"contains\",\n                    dataProp: i,\n                    dataPropType: util_1.Type.Num,\n                    compositeRule: true,\n                }, _valid);\n                block();\n            });\n        }\n        function checkLimits(count) {\n            gen.code((0, codegen_1._) `${count}++`);\n            if (max === undefined) {\n                gen.if((0, codegen_1._) `${count} >= ${min}`, () => gen.assign(valid, true).break());\n            }\n            else {\n                gen.if((0, codegen_1._) `${count} > ${max}`, () => gen.assign(valid, false).break());\n                if (min === 1)\n                    gen.assign(valid, true);\n                else\n                    gen.if((0, codegen_1._) `${count} >= ${min}`, () => gen.assign(valid, true));\n            }\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=contains.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateSchemaDeps = exports.validatePropertyDeps = exports.error = void 0;\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst code_1 = require(\"../code\");\nexports.error = {\n    message: ({ params: { property, depsCount, deps } }) => {\n        const property_ies = depsCount === 1 ? \"property\" : \"properties\";\n        return (0, codegen_1.str) `must have ${property_ies} ${deps} when property ${property} is present`;\n    },\n    params: ({ params: { property, depsCount, deps, missingProperty } }) => (0, codegen_1._) `{property: ${property},\n    missingProperty: ${missingProperty},\n    depsCount: ${depsCount},\n    deps: ${deps}}`, // TODO change to reference\n};\nconst def = {\n    keyword: \"dependencies\",\n    type: \"object\",\n    schemaType: \"object\",\n    error: exports.error,\n    code(cxt) {\n        const [propDeps, schDeps] = splitDependencies(cxt);\n        validatePropertyDeps(cxt, propDeps);\n        validateSchemaDeps(cxt, schDeps);\n    },\n};\nfunction splitDependencies({ schema }) {\n    const propertyDeps = {};\n    const schemaDeps = {};\n    for (const key in schema) {\n        if (key === \"__proto__\")\n            continue;\n        const deps = Array.isArray(schema[key]) ? propertyDeps : schemaDeps;\n        deps[key] = schema[key];\n    }\n    return [propertyDeps, schemaDeps];\n}\nfunction validatePropertyDeps(cxt, propertyDeps = cxt.schema) {\n    const { gen, data, it } = cxt;\n    if (Object.keys(propertyDeps).length === 0)\n        return;\n    const missing = gen.let(\"missing\");\n    for (const prop in propertyDeps) {\n        const deps = propertyDeps[prop];\n        if (deps.length === 0)\n            continue;\n        const hasProperty = (0, code_1.propertyInData)(gen, data, prop, it.opts.ownProperties);\n        cxt.setParams({\n            property: prop,\n            depsCount: deps.length,\n            deps: deps.join(\", \"),\n        });\n        if (it.allErrors) {\n            gen.if(hasProperty, () => {\n                for (const depProp of deps) {\n                    (0, code_1.checkReportMissingProp)(cxt, depProp);\n                }\n            });\n        }\n        else {\n            gen.if((0, codegen_1._) `${hasProperty} && (${(0, code_1.checkMissingProp)(cxt, deps, missing)})`);\n            (0, code_1.reportMissingProp)(cxt, missing);\n            gen.else();\n        }\n    }\n}\nexports.validatePropertyDeps = validatePropertyDeps;\nfunction validateSchemaDeps(cxt, schemaDeps = cxt.schema) {\n    const { gen, data, keyword, it } = cxt;\n    const valid = gen.name(\"valid\");\n    for (const prop in schemaDeps) {\n        if ((0, util_1.alwaysValidSchema)(it, schemaDeps[prop]))\n            continue;\n        gen.if((0, code_1.propertyInData)(gen, data, prop, it.opts.ownProperties), () => {\n            const schCxt = cxt.subschema({ keyword, schemaProp: prop }, valid);\n            cxt.mergeValidEvaluated(schCxt, valid);\n        }, () => gen.var(valid, true) // TODO var\n        );\n        cxt.ok(valid);\n    }\n}\nexports.validateSchemaDeps = validateSchemaDeps;\nexports.default = def;\n//# sourceMappingURL=dependencies.js.map","import fetch from 'node-fetch';\nimport { CorrectionRequest } from '../models/CorrectionRequest';\nimport { CorrectionResponse } from '../models/CorrectionResponse';\nimport { RequestBuilder, APIRequest } from './RequestBuilder';\nimport { ResponseParser, APIResponse } from './ResponseParser';\nimport { ExtensionConfiguration } from '../models/ExtensionConfiguration';\n\nexport class LLMApiClient {\n    private requestBuilder: RequestBuilder;\n    private responseParser: ResponseParser;\n\n    constructor() {\n        this.requestBuilder = new RequestBuilder();\n        this.responseParser = new ResponseParser();\n    }\n\n    async sendCorrectionRequest(\n        correctionRequest: CorrectionRequest, \n        config: ExtensionConfiguration\n    ): Promise<{ success: boolean; data?: CorrectionResponse; error?: string }> {\n        try {\n            // Build the API request\n            const apiRequest = this.requestBuilder.buildCorrectionRequest(\n                correctionRequest,\n                config.maxTokens,\n                config.temperature\n            );\n\n            // Override model from config\n            apiRequest.model = config.model;\n\n            // Make the API call\n            const response = await fetch(config.apiEndpoint, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${config.apiKey}`\n                },\n                body: JSON.stringify(apiRequest)\n            });\n\n            if (!response.ok) {\n                const errorText = await response.text();\n                return { \n                    success: false, \n                    error: `API request failed with status ${response.status}: ${errorText}` \n                };\n            }\n\n            const apiResponse = await response.json() as APIResponse;\n            \n            // Parse and validate the response\n            return this.responseParser.parseResponse(apiResponse);\n\n        } catch (error) {\n            return { \n                success: false, \n                error: error instanceof Error ? error.message : 'Network error occurred' \n            };\n        }\n    }\n}","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MissingRefError = exports.ValidationError = exports.CodeGen = exports.Name = exports.nil = exports.stringify = exports.str = exports._ = exports.KeywordCxt = exports.Ajv = void 0;\nconst core_1 = require(\"./core\");\nconst draft7_1 = require(\"./vocabularies/draft7\");\nconst discriminator_1 = require(\"./vocabularies/discriminator\");\nconst draft7MetaSchema = require(\"./refs/json-schema-draft-07.json\");\nconst META_SUPPORT_DATA = [\"/properties\"];\nconst META_SCHEMA_ID = \"http://json-schema.org/draft-07/schema\";\nclass Ajv extends core_1.default {\n    _addVocabularies() {\n        super._addVocabularies();\n        draft7_1.default.forEach((v) => this.addVocabulary(v));\n        if (this.opts.discriminator)\n            this.addKeyword(discriminator_1.default);\n    }\n    _addDefaultMetaSchema() {\n        super._addDefaultMetaSchema();\n        if (!this.opts.meta)\n            return;\n        const metaSchema = this.opts.$data\n            ? this.$dataMetaSchema(draft7MetaSchema, META_SUPPORT_DATA)\n            : draft7MetaSchema;\n        this.addMetaSchema(metaSchema, META_SCHEMA_ID, false);\n        this.refs[\"http://json-schema.org/schema\"] = META_SCHEMA_ID;\n    }\n    defaultMeta() {\n        return (this.opts.defaultMeta =\n            super.defaultMeta() || (this.getSchema(META_SCHEMA_ID) ? META_SCHEMA_ID : undefined));\n    }\n}\nexports.Ajv = Ajv;\nmodule.exports = exports = Ajv;\nmodule.exports.Ajv = Ajv;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = Ajv;\nvar validate_1 = require(\"./compile/validate\");\nObject.defineProperty(exports, \"KeywordCxt\", { enumerable: true, get: function () { return validate_1.KeywordCxt; } });\nvar codegen_1 = require(\"./compile/codegen\");\nObject.defineProperty(exports, \"_\", { enumerable: true, get: function () { return codegen_1._; } });\nObject.defineProperty(exports, \"str\", { enumerable: true, get: function () { return codegen_1.str; } });\nObject.defineProperty(exports, \"stringify\", { enumerable: true, get: function () { return codegen_1.stringify; } });\nObject.defineProperty(exports, \"nil\", { enumerable: true, get: function () { return codegen_1.nil; } });\nObject.defineProperty(exports, \"Name\", { enumerable: true, get: function () { return codegen_1.Name; } });\nObject.defineProperty(exports, \"CodeGen\", { enumerable: true, get: function () { return codegen_1.CodeGen; } });\nvar validation_error_1 = require(\"./runtime/validation_error\");\nObject.defineProperty(exports, \"ValidationError\", { enumerable: true, get: function () { return validation_error_1.default; } });\nvar ref_error_1 = require(\"./compile/ref_error\");\nObject.defineProperty(exports, \"MissingRefError\", { enumerable: true, get: function () { return ref_error_1.default; } });\n//# sourceMappingURL=ajv.js.map","/* c8 ignore start */\n// 64 KiB (same size chrome slice theirs blob into Uint8array's)\nconst POOL_SIZE = 65536\n\nif (!globalThis.ReadableStream) {\n  // `node:stream/web` got introduced in v16.5.0 as experimental\n  // and it's preferred over the polyfilled version. So we also\n  // suppress the warning that gets emitted by NodeJS for using it.\n  try {\n    const process = require('node:process')\n    const { emitWarning } = process\n    try {\n      process.emitWarning = () => {}\n      Object.assign(globalThis, require('node:stream/web'))\n      process.emitWarning = emitWarning\n    } catch (error) {\n      process.emitWarning = emitWarning\n      throw error\n    }\n  } catch (error) {\n    // fallback to polyfill implementation\n    Object.assign(globalThis, require('web-streams-polyfill/dist/ponyfill.es2018.js'))\n  }\n}\n\ntry {\n  // Don't use node: prefix for this, require+node: is not supported until node v14.14\n  // Only `import()` can use prefix in 12.20 and later\n  const { Blob } = require('buffer')\n  if (Blob && !Blob.prototype.stream) {\n    Blob.prototype.stream = function name (params) {\n      let position = 0\n      const blob = this\n\n      return new ReadableStream({\n        type: 'bytes',\n        async pull (ctrl) {\n          const chunk = blob.slice(position, Math.min(blob.size, position + POOL_SIZE))\n          const buffer = await chunk.arrayBuffer()\n          position += buffer.byteLength\n          ctrl.enqueue(new Uint8Array(buffer))\n\n          if (position === blob.size) {\n            ctrl.close()\n          }\n        }\n      })\n    }\n  }\n} catch (error) {}\n/* c8 ignore end */\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message: ({ schemaCode }) => (0, codegen_1.str) `must be multiple of ${schemaCode}`,\n    params: ({ schemaCode }) => (0, codegen_1._) `{multipleOf: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"multipleOf\",\n    type: \"number\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, data, schemaCode, it } = cxt;\n        // const bdt = bad$DataType(schemaCode, <string>def.schemaType, $data)\n        const prec = it.opts.multipleOfPrecision;\n        const res = gen.let(\"res\");\n        const invalid = prec\n            ? (0, codegen_1._) `Math.abs(Math.round(${res}) - ${res}) > 1e-${prec}`\n            : (0, codegen_1._) `${res} !== parseInt(${res})`;\n        cxt.fail$data((0, codegen_1._) `(${schemaCode} === 0 || (${res} = ${data}/${schemaCode}, ${invalid}))`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=multipleOf.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst def = {\n    keyword: \"id\",\n    code() {\n        throw new Error('NOT SUPPORTED: keyword \"id\", use \"$id\" for schema ID');\n    },\n};\nexports.default = def;\n//# sourceMappingURL=id.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass ValidationError extends Error {\n    constructor(errors) {\n        super(\"validation failed\");\n        this.errors = errors;\n        this.ajv = this.validation = true;\n    }\n}\nexports.default = ValidationError;\n//# sourceMappingURL=validation_error.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateKeywordUsage = exports.validSchemaType = exports.funcKeywordCode = exports.macroKeywordCode = void 0;\nconst codegen_1 = require(\"../codegen\");\nconst names_1 = require(\"../names\");\nconst code_1 = require(\"../../vocabularies/code\");\nconst errors_1 = require(\"../errors\");\nfunction macroKeywordCode(cxt, def) {\n    const { gen, keyword, schema, parentSchema, it } = cxt;\n    const macroSchema = def.macro.call(it.self, schema, parentSchema, it);\n    const schemaRef = useKeyword(gen, keyword, macroSchema);\n    if (it.opts.validateSchema !== false)\n        it.self.validateSchema(macroSchema, true);\n    const valid = gen.name(\"valid\");\n    cxt.subschema({\n        schema: macroSchema,\n        schemaPath: codegen_1.nil,\n        errSchemaPath: `${it.errSchemaPath}/${keyword}`,\n        topSchemaRef: schemaRef,\n        compositeRule: true,\n    }, valid);\n    cxt.pass(valid, () => cxt.error(true));\n}\nexports.macroKeywordCode = macroKeywordCode;\nfunction funcKeywordCode(cxt, def) {\n    var _a;\n    const { gen, keyword, schema, parentSchema, $data, it } = cxt;\n    checkAsyncKeyword(it, def);\n    const validate = !$data && def.compile ? def.compile.call(it.self, schema, parentSchema, it) : def.validate;\n    const validateRef = useKeyword(gen, keyword, validate);\n    const valid = gen.let(\"valid\");\n    cxt.block$data(valid, validateKeyword);\n    cxt.ok((_a = def.valid) !== null && _a !== void 0 ? _a : valid);\n    function validateKeyword() {\n        if (def.errors === false) {\n            assignValid();\n            if (def.modifying)\n                modifyData(cxt);\n            reportErrs(() => cxt.error());\n        }\n        else {\n            const ruleErrs = def.async ? validateAsync() : validateSync();\n            if (def.modifying)\n                modifyData(cxt);\n            reportErrs(() => addErrs(cxt, ruleErrs));\n        }\n    }\n    function validateAsync() {\n        const ruleErrs = gen.let(\"ruleErrs\", null);\n        gen.try(() => assignValid((0, codegen_1._) `await `), (e) => gen.assign(valid, false).if((0, codegen_1._) `${e} instanceof ${it.ValidationError}`, () => gen.assign(ruleErrs, (0, codegen_1._) `${e}.errors`), () => gen.throw(e)));\n        return ruleErrs;\n    }\n    function validateSync() {\n        const validateErrs = (0, codegen_1._) `${validateRef}.errors`;\n        gen.assign(validateErrs, null);\n        assignValid(codegen_1.nil);\n        return validateErrs;\n    }\n    function assignValid(_await = def.async ? (0, codegen_1._) `await ` : codegen_1.nil) {\n        const passCxt = it.opts.passContext ? names_1.default.this : names_1.default.self;\n        const passSchema = !((\"compile\" in def && !$data) || def.schema === false);\n        gen.assign(valid, (0, codegen_1._) `${_await}${(0, code_1.callValidateCode)(cxt, validateRef, passCxt, passSchema)}`, def.modifying);\n    }\n    function reportErrs(errors) {\n        var _a;\n        gen.if((0, codegen_1.not)((_a = def.valid) !== null && _a !== void 0 ? _a : valid), errors);\n    }\n}\nexports.funcKeywordCode = funcKeywordCode;\nfunction modifyData(cxt) {\n    const { gen, data, it } = cxt;\n    gen.if(it.parentData, () => gen.assign(data, (0, codegen_1._) `${it.parentData}[${it.parentDataProperty}]`));\n}\nfunction addErrs(cxt, errs) {\n    const { gen } = cxt;\n    gen.if((0, codegen_1._) `Array.isArray(${errs})`, () => {\n        gen\n            .assign(names_1.default.vErrors, (0, codegen_1._) `${names_1.default.vErrors} === null ? ${errs} : ${names_1.default.vErrors}.concat(${errs})`)\n            .assign(names_1.default.errors, (0, codegen_1._) `${names_1.default.vErrors}.length`);\n        (0, errors_1.extendErrors)(cxt);\n    }, () => cxt.error());\n}\nfunction checkAsyncKeyword({ schemaEnv }, def) {\n    if (def.async && !schemaEnv.$async)\n        throw new Error(\"async keyword in sync schema\");\n}\nfunction useKeyword(gen, keyword, result) {\n    if (result === undefined)\n        throw new Error(`keyword \"${keyword}\" failed to compile`);\n    return gen.scopeValue(\"keyword\", typeof result == \"function\" ? { ref: result } : { ref: result, code: (0, codegen_1.stringify)(result) });\n}\nfunction validSchemaType(schema, schemaType, allowUndefined = false) {\n    // TODO add tests\n    return (!schemaType.length ||\n        schemaType.some((st) => st === \"array\"\n            ? Array.isArray(schema)\n            : st === \"object\"\n                ? schema && typeof schema == \"object\" && !Array.isArray(schema)\n                : typeof schema == st || (allowUndefined && typeof schema == \"undefined\")));\n}\nexports.validSchemaType = validSchemaType;\nfunction validateKeywordUsage({ schema, opts, self, errSchemaPath }, def, keyword) {\n    /* istanbul ignore if */\n    if (Array.isArray(def.keyword) ? !def.keyword.includes(keyword) : def.keyword !== keyword) {\n        throw new Error(\"ajv implementation error\");\n    }\n    const deps = def.dependencies;\n    if (deps === null || deps === void 0 ? void 0 : deps.some((kwd) => !Object.prototype.hasOwnProperty.call(schema, kwd))) {\n        throw new Error(`parent schema must have dependencies of ${keyword}: ${deps.join(\",\")}`);\n    }\n    if (def.validateSchema) {\n        const valid = def.validateSchema(schema[keyword]);\n        if (!valid) {\n            const msg = `keyword \"${keyword}\" value is invalid at path \"${errSchemaPath}\": ` +\n                self.errorsText(def.validateSchema.errors);\n            if (opts.validateSchema === \"log\")\n                self.logger.error(msg);\n            else\n                throw new Error(msg);\n        }\n    }\n}\nexports.validateKeywordUsage = validateKeywordUsage;\n//# sourceMappingURL=keyword.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.callRef = exports.getValidate = void 0;\nconst ref_error_1 = require(\"../../compile/ref_error\");\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst names_1 = require(\"../../compile/names\");\nconst compile_1 = require(\"../../compile\");\nconst util_1 = require(\"../../compile/util\");\nconst def = {\n    keyword: \"$ref\",\n    schemaType: \"string\",\n    code(cxt) {\n        const { gen, schema: $ref, it } = cxt;\n        const { baseId, schemaEnv: env, validateName, opts, self } = it;\n        const { root } = env;\n        if (($ref === \"#\" || $ref === \"#/\") && baseId === root.baseId)\n            return callRootRef();\n        const schOrEnv = compile_1.resolveRef.call(self, root, baseId, $ref);\n        if (schOrEnv === undefined)\n            throw new ref_error_1.default(it.opts.uriResolver, baseId, $ref);\n        if (schOrEnv instanceof compile_1.SchemaEnv)\n            return callValidate(schOrEnv);\n        return inlineRefSchema(schOrEnv);\n        function callRootRef() {\n            if (env === root)\n                return callRef(cxt, validateName, env, env.$async);\n            const rootName = gen.scopeValue(\"root\", { ref: root });\n            return callRef(cxt, (0, codegen_1._) `${rootName}.validate`, root, root.$async);\n        }\n        function callValidate(sch) {\n            const v = getValidate(cxt, sch);\n            callRef(cxt, v, sch, sch.$async);\n        }\n        function inlineRefSchema(sch) {\n            const schName = gen.scopeValue(\"schema\", opts.code.source === true ? { ref: sch, code: (0, codegen_1.stringify)(sch) } : { ref: sch });\n            const valid = gen.name(\"valid\");\n            const schCxt = cxt.subschema({\n                schema: sch,\n                dataTypes: [],\n                schemaPath: codegen_1.nil,\n                topSchemaRef: schName,\n                errSchemaPath: $ref,\n            }, valid);\n            cxt.mergeEvaluated(schCxt);\n            cxt.ok(valid);\n        }\n    },\n};\nfunction getValidate(cxt, sch) {\n    const { gen } = cxt;\n    return sch.validate\n        ? gen.scopeValue(\"validate\", { ref: sch.validate })\n        : (0, codegen_1._) `${gen.scopeValue(\"wrapper\", { ref: sch })}.validate`;\n}\nexports.getValidate = getValidate;\nfunction callRef(cxt, v, sch, $async) {\n    const { gen, it } = cxt;\n    const { allErrors, schemaEnv: env, opts } = it;\n    const passCxt = opts.passContext ? names_1.default.this : codegen_1.nil;\n    if ($async)\n        callAsyncRef();\n    else\n        callSyncRef();\n    function callAsyncRef() {\n        if (!env.$async)\n            throw new Error(\"async schema referenced by sync schema\");\n        const valid = gen.let(\"valid\");\n        gen.try(() => {\n            gen.code((0, codegen_1._) `await ${(0, code_1.callValidateCode)(cxt, v, passCxt)}`);\n            addEvaluatedFrom(v); // TODO will not work with async, it has to be returned with the result\n            if (!allErrors)\n                gen.assign(valid, true);\n        }, (e) => {\n            gen.if((0, codegen_1._) `!(${e} instanceof ${it.ValidationError})`, () => gen.throw(e));\n            addErrorsFrom(e);\n            if (!allErrors)\n                gen.assign(valid, false);\n        });\n        cxt.ok(valid);\n    }\n    function callSyncRef() {\n        cxt.result((0, code_1.callValidateCode)(cxt, v, passCxt), () => addEvaluatedFrom(v), () => addErrorsFrom(v));\n    }\n    function addErrorsFrom(source) {\n        const errs = (0, codegen_1._) `${source}.errors`;\n        gen.assign(names_1.default.vErrors, (0, codegen_1._) `${names_1.default.vErrors} === null ? ${errs} : ${names_1.default.vErrors}.concat(${errs})`); // TODO tagged\n        gen.assign(names_1.default.errors, (0, codegen_1._) `${names_1.default.vErrors}.length`);\n    }\n    function addEvaluatedFrom(source) {\n        var _a;\n        if (!it.opts.unevaluated)\n            return;\n        const schEvaluated = (_a = sch === null || sch === void 0 ? void 0 : sch.validate) === null || _a === void 0 ? void 0 : _a.evaluated;\n        // TODO refactor\n        if (it.props !== true) {\n            if (schEvaluated && !schEvaluated.dynamicProps) {\n                if (schEvaluated.props !== undefined) {\n                    it.props = util_1.mergeEvaluated.props(gen, schEvaluated.props, it.props);\n                }\n            }\n            else {\n                const props = gen.var(\"props\", (0, codegen_1._) `${source}.evaluated.props`);\n                it.props = util_1.mergeEvaluated.props(gen, props, it.props, codegen_1.Name);\n            }\n        }\n        if (it.items !== true) {\n            if (schEvaluated && !schEvaluated.dynamicItems) {\n                if (schEvaluated.items !== undefined) {\n                    it.items = util_1.mergeEvaluated.items(gen, schEvaluated.items, it.items);\n                }\n            }\n            else {\n                const items = gen.var(\"items\", (0, codegen_1._) `${source}.evaluated.items`);\n                it.items = util_1.mergeEvaluated.items(gen, items, it.items, codegen_1.Name);\n            }\n        }\n    }\n}\nexports.callRef = callRef;\nexports.default = def;\n//# sourceMappingURL=ref.js.map","/*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */\n\n// TODO (jimmywarting): in the feature use conditional loading with top level await (requires 14.x)\n// Node has recently added whatwg stream into core\n\nimport './streams.cjs'\n\n// 64 KiB (same size chrome slice theirs blob into Uint8array's)\nconst POOL_SIZE = 65536\n\n/** @param {(Blob | Uint8Array)[]} parts */\nasync function * toIterator (parts, clone = true) {\n  for (const part of parts) {\n    if ('stream' in part) {\n      yield * (/** @type {AsyncIterableIterator<Uint8Array>} */ (part.stream()))\n    } else if (ArrayBuffer.isView(part)) {\n      if (clone) {\n        let position = part.byteOffset\n        const end = part.byteOffset + part.byteLength\n        while (position !== end) {\n          const size = Math.min(end - position, POOL_SIZE)\n          const chunk = part.buffer.slice(position, position + size)\n          position += chunk.byteLength\n          yield new Uint8Array(chunk)\n        }\n      } else {\n        yield part\n      }\n    /* c8 ignore next 10 */\n    } else {\n      // For blobs that have arrayBuffer but no stream method (nodes buffer.Blob)\n      let position = 0, b = (/** @type {Blob} */ (part))\n      while (position !== b.size) {\n        const chunk = b.slice(position, Math.min(b.size, position + POOL_SIZE))\n        const buffer = await chunk.arrayBuffer()\n        position += buffer.byteLength\n        yield new Uint8Array(buffer)\n      }\n    }\n  }\n}\n\nconst _Blob = class Blob {\n  /** @type {Array.<(Blob|Uint8Array)>} */\n  #parts = []\n  #type = ''\n  #size = 0\n  #endings = 'transparent'\n\n  /**\n   * The Blob() constructor returns a new Blob object. The content\n   * of the blob consists of the concatenation of the values given\n   * in the parameter array.\n   *\n   * @param {*} blobParts\n   * @param {{ type?: string, endings?: string }} [options]\n   */\n  constructor (blobParts = [], options = {}) {\n    if (typeof blobParts !== 'object' || blobParts === null) {\n      throw new TypeError('Failed to construct \\'Blob\\': The provided value cannot be converted to a sequence.')\n    }\n\n    if (typeof blobParts[Symbol.iterator] !== 'function') {\n      throw new TypeError('Failed to construct \\'Blob\\': The object must have a callable @@iterator property.')\n    }\n\n    if (typeof options !== 'object' && typeof options !== 'function') {\n      throw new TypeError('Failed to construct \\'Blob\\': parameter 2 cannot convert to dictionary.')\n    }\n\n    if (options === null) options = {}\n\n    const encoder = new TextEncoder()\n    for (const element of blobParts) {\n      let part\n      if (ArrayBuffer.isView(element)) {\n        part = new Uint8Array(element.buffer.slice(element.byteOffset, element.byteOffset + element.byteLength))\n      } else if (element instanceof ArrayBuffer) {\n        part = new Uint8Array(element.slice(0))\n      } else if (element instanceof Blob) {\n        part = element\n      } else {\n        part = encoder.encode(`${element}`)\n      }\n\n      this.#size += ArrayBuffer.isView(part) ? part.byteLength : part.size\n      this.#parts.push(part)\n    }\n\n    this.#endings = `${options.endings === undefined ? 'transparent' : options.endings}`\n    const type = options.type === undefined ? '' : String(options.type)\n    this.#type = /^[\\x20-\\x7E]*$/.test(type) ? type : ''\n  }\n\n  /**\n   * The Blob interface's size property returns the\n   * size of the Blob in bytes.\n   */\n  get size () {\n    return this.#size\n  }\n\n  /**\n   * The type property of a Blob object returns the MIME type of the file.\n   */\n  get type () {\n    return this.#type\n  }\n\n  /**\n   * The text() method in the Blob interface returns a Promise\n   * that resolves with a string containing the contents of\n   * the blob, interpreted as UTF-8.\n   *\n   * @return {Promise<string>}\n   */\n  async text () {\n    // More optimized than using this.arrayBuffer()\n    // that requires twice as much ram\n    const decoder = new TextDecoder()\n    let str = ''\n    for await (const part of toIterator(this.#parts, false)) {\n      str += decoder.decode(part, { stream: true })\n    }\n    // Remaining\n    str += decoder.decode()\n    return str\n  }\n\n  /**\n   * The arrayBuffer() method in the Blob interface returns a\n   * Promise that resolves with the contents of the blob as\n   * binary data contained in an ArrayBuffer.\n   *\n   * @return {Promise<ArrayBuffer>}\n   */\n  async arrayBuffer () {\n    // Easier way... Just a unnecessary overhead\n    // const view = new Uint8Array(this.size);\n    // await this.stream().getReader({mode: 'byob'}).read(view);\n    // return view.buffer;\n\n    const data = new Uint8Array(this.size)\n    let offset = 0\n    for await (const chunk of toIterator(this.#parts, false)) {\n      data.set(chunk, offset)\n      offset += chunk.length\n    }\n\n    return data.buffer\n  }\n\n  stream () {\n    const it = toIterator(this.#parts, true)\n\n    return new globalThis.ReadableStream({\n      // @ts-ignore\n      type: 'bytes',\n      async pull (ctrl) {\n        const chunk = await it.next()\n        chunk.done ? ctrl.close() : ctrl.enqueue(chunk.value)\n      },\n\n      async cancel () {\n        await it.return()\n      }\n    })\n  }\n\n  /**\n   * The Blob interface's slice() method creates and returns a\n   * new Blob object which contains data from a subset of the\n   * blob on which it's called.\n   *\n   * @param {number} [start]\n   * @param {number} [end]\n   * @param {string} [type]\n   */\n  slice (start = 0, end = this.size, type = '') {\n    const { size } = this\n\n    let relativeStart = start < 0 ? Math.max(size + start, 0) : Math.min(start, size)\n    let relativeEnd = end < 0 ? Math.max(size + end, 0) : Math.min(end, size)\n\n    const span = Math.max(relativeEnd - relativeStart, 0)\n    const parts = this.#parts\n    const blobParts = []\n    let added = 0\n\n    for (const part of parts) {\n      // don't add the overflow to new blobParts\n      if (added >= span) {\n        break\n      }\n\n      const size = ArrayBuffer.isView(part) ? part.byteLength : part.size\n      if (relativeStart && size <= relativeStart) {\n        // Skip the beginning and change the relative\n        // start & end position as we skip the unwanted parts\n        relativeStart -= size\n        relativeEnd -= size\n      } else {\n        let chunk\n        if (ArrayBuffer.isView(part)) {\n          chunk = part.subarray(relativeStart, Math.min(size, relativeEnd))\n          added += chunk.byteLength\n        } else {\n          chunk = part.slice(relativeStart, Math.min(size, relativeEnd))\n          added += chunk.size\n        }\n        relativeEnd -= size\n        blobParts.push(chunk)\n        relativeStart = 0 // All next sequential parts should start at 0\n      }\n    }\n\n    const blob = new Blob([], { type: String(type).toLowerCase() })\n    blob.#size = span\n    blob.#parts = blobParts\n\n    return blob\n  }\n\n  get [Symbol.toStringTag] () {\n    return 'Blob'\n  }\n\n  static [Symbol.hasInstance] (object) {\n    return (\n      object &&\n      typeof object === 'object' &&\n      typeof object.constructor === 'function' &&\n      (\n        typeof object.stream === 'function' ||\n        typeof object.arrayBuffer === 'function'\n      ) &&\n      /^(Blob|File)$/.test(object[Symbol.toStringTag])\n    )\n  }\n}\n\nObject.defineProperties(_Blob.prototype, {\n  size: { enumerable: true },\n  type: { enumerable: true },\n  slice: { enumerable: true }\n})\n\n/** @type {typeof globalThis.Blob} */\nexport const Blob = _Blob\nexport default Blob\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.resolveSchema = exports.getCompilingSchema = exports.resolveRef = exports.compileSchema = exports.SchemaEnv = void 0;\nconst codegen_1 = require(\"./codegen\");\nconst validation_error_1 = require(\"../runtime/validation_error\");\nconst names_1 = require(\"./names\");\nconst resolve_1 = require(\"./resolve\");\nconst util_1 = require(\"./util\");\nconst validate_1 = require(\"./validate\");\nclass SchemaEnv {\n    constructor(env) {\n        var _a;\n        this.refs = {};\n        this.dynamicAnchors = {};\n        let schema;\n        if (typeof env.schema == \"object\")\n            schema = env.schema;\n        this.schema = env.schema;\n        this.schemaId = env.schemaId;\n        this.root = env.root || this;\n        this.baseId = (_a = env.baseId) !== null && _a !== void 0 ? _a : (0, resolve_1.normalizeId)(schema === null || schema === void 0 ? void 0 : schema[env.schemaId || \"$id\"]);\n        this.schemaPath = env.schemaPath;\n        this.localRefs = env.localRefs;\n        this.meta = env.meta;\n        this.$async = schema === null || schema === void 0 ? void 0 : schema.$async;\n        this.refs = {};\n    }\n}\nexports.SchemaEnv = SchemaEnv;\n// let codeSize = 0\n// let nodeCount = 0\n// Compiles schema in SchemaEnv\nfunction compileSchema(sch) {\n    // TODO refactor - remove compilations\n    const _sch = getCompilingSchema.call(this, sch);\n    if (_sch)\n        return _sch;\n    const rootId = (0, resolve_1.getFullPath)(this.opts.uriResolver, sch.root.baseId); // TODO if getFullPath removed 1 tests fails\n    const { es5, lines } = this.opts.code;\n    const { ownProperties } = this.opts;\n    const gen = new codegen_1.CodeGen(this.scope, { es5, lines, ownProperties });\n    let _ValidationError;\n    if (sch.$async) {\n        _ValidationError = gen.scopeValue(\"Error\", {\n            ref: validation_error_1.default,\n            code: (0, codegen_1._) `require(\"ajv/dist/runtime/validation_error\").default`,\n        });\n    }\n    const validateName = gen.scopeName(\"validate\");\n    sch.validateName = validateName;\n    const schemaCxt = {\n        gen,\n        allErrors: this.opts.allErrors,\n        data: names_1.default.data,\n        parentData: names_1.default.parentData,\n        parentDataProperty: names_1.default.parentDataProperty,\n        dataNames: [names_1.default.data],\n        dataPathArr: [codegen_1.nil], // TODO can its length be used as dataLevel if nil is removed?\n        dataLevel: 0,\n        dataTypes: [],\n        definedProperties: new Set(),\n        topSchemaRef: gen.scopeValue(\"schema\", this.opts.code.source === true\n            ? { ref: sch.schema, code: (0, codegen_1.stringify)(sch.schema) }\n            : { ref: sch.schema }),\n        validateName,\n        ValidationError: _ValidationError,\n        schema: sch.schema,\n        schemaEnv: sch,\n        rootId,\n        baseId: sch.baseId || rootId,\n        schemaPath: codegen_1.nil,\n        errSchemaPath: sch.schemaPath || (this.opts.jtd ? \"\" : \"#\"),\n        errorPath: (0, codegen_1._) `\"\"`,\n        opts: this.opts,\n        self: this,\n    };\n    let sourceCode;\n    try {\n        this._compilations.add(sch);\n        (0, validate_1.validateFunctionCode)(schemaCxt);\n        gen.optimize(this.opts.code.optimize);\n        // gen.optimize(1)\n        const validateCode = gen.toString();\n        sourceCode = `${gen.scopeRefs(names_1.default.scope)}return ${validateCode}`;\n        // console.log((codeSize += sourceCode.length), (nodeCount += gen.nodeCount))\n        if (this.opts.code.process)\n            sourceCode = this.opts.code.process(sourceCode, sch);\n        // console.log(\"\\n\\n\\n *** \\n\", sourceCode)\n        const makeValidate = new Function(`${names_1.default.self}`, `${names_1.default.scope}`, sourceCode);\n        const validate = makeValidate(this, this.scope.get());\n        this.scope.value(validateName, { ref: validate });\n        validate.errors = null;\n        validate.schema = sch.schema;\n        validate.schemaEnv = sch;\n        if (sch.$async)\n            validate.$async = true;\n        if (this.opts.code.source === true) {\n            validate.source = { validateName, validateCode, scopeValues: gen._values };\n        }\n        if (this.opts.unevaluated) {\n            const { props, items } = schemaCxt;\n            validate.evaluated = {\n                props: props instanceof codegen_1.Name ? undefined : props,\n                items: items instanceof codegen_1.Name ? undefined : items,\n                dynamicProps: props instanceof codegen_1.Name,\n                dynamicItems: items instanceof codegen_1.Name,\n            };\n            if (validate.source)\n                validate.source.evaluated = (0, codegen_1.stringify)(validate.evaluated);\n        }\n        sch.validate = validate;\n        return sch;\n    }\n    catch (e) {\n        delete sch.validate;\n        delete sch.validateName;\n        if (sourceCode)\n            this.logger.error(\"Error compiling schema, function code:\", sourceCode);\n        // console.log(\"\\n\\n\\n *** \\n\", sourceCode, this.opts)\n        throw e;\n    }\n    finally {\n        this._compilations.delete(sch);\n    }\n}\nexports.compileSchema = compileSchema;\nfunction resolveRef(root, baseId, ref) {\n    var _a;\n    ref = (0, resolve_1.resolveUrl)(this.opts.uriResolver, baseId, ref);\n    const schOrFunc = root.refs[ref];\n    if (schOrFunc)\n        return schOrFunc;\n    let _sch = resolve.call(this, root, ref);\n    if (_sch === undefined) {\n        const schema = (_a = root.localRefs) === null || _a === void 0 ? void 0 : _a[ref]; // TODO maybe localRefs should hold SchemaEnv\n        const { schemaId } = this.opts;\n        if (schema)\n            _sch = new SchemaEnv({ schema, schemaId, root, baseId });\n    }\n    if (_sch === undefined)\n        return;\n    return (root.refs[ref] = inlineOrCompile.call(this, _sch));\n}\nexports.resolveRef = resolveRef;\nfunction inlineOrCompile(sch) {\n    if ((0, resolve_1.inlineRef)(sch.schema, this.opts.inlineRefs))\n        return sch.schema;\n    return sch.validate ? sch : compileSchema.call(this, sch);\n}\n// Index of schema compilation in the currently compiled list\nfunction getCompilingSchema(schEnv) {\n    for (const sch of this._compilations) {\n        if (sameSchemaEnv(sch, schEnv))\n            return sch;\n    }\n}\nexports.getCompilingSchema = getCompilingSchema;\nfunction sameSchemaEnv(s1, s2) {\n    return s1.schema === s2.schema && s1.root === s2.root && s1.baseId === s2.baseId;\n}\n// resolve and compile the references ($ref)\n// TODO returns AnySchemaObject (if the schema can be inlined) or validation function\nfunction resolve(root, // information about the root schema for the current schema\nref // reference to resolve\n) {\n    let sch;\n    while (typeof (sch = this.refs[ref]) == \"string\")\n        ref = sch;\n    return sch || this.schemas[ref] || resolveSchema.call(this, root, ref);\n}\n// Resolve schema, its root and baseId\nfunction resolveSchema(root, // root object with properties schema, refs TODO below SchemaEnv is assigned to it\nref // reference to resolve\n) {\n    const p = this.opts.uriResolver.parse(ref);\n    const refPath = (0, resolve_1._getFullPath)(this.opts.uriResolver, p);\n    let baseId = (0, resolve_1.getFullPath)(this.opts.uriResolver, root.baseId, undefined);\n    // TODO `Object.keys(root.schema).length > 0` should not be needed - but removing breaks 2 tests\n    if (Object.keys(root.schema).length > 0 && refPath === baseId) {\n        return getJsonPointer.call(this, p, root);\n    }\n    const id = (0, resolve_1.normalizeId)(refPath);\n    const schOrRef = this.refs[id] || this.schemas[id];\n    if (typeof schOrRef == \"string\") {\n        const sch = resolveSchema.call(this, root, schOrRef);\n        if (typeof (sch === null || sch === void 0 ? void 0 : sch.schema) !== \"object\")\n            return;\n        return getJsonPointer.call(this, p, sch);\n    }\n    if (typeof (schOrRef === null || schOrRef === void 0 ? void 0 : schOrRef.schema) !== \"object\")\n        return;\n    if (!schOrRef.validate)\n        compileSchema.call(this, schOrRef);\n    if (id === (0, resolve_1.normalizeId)(ref)) {\n        const { schema } = schOrRef;\n        const { schemaId } = this.opts;\n        const schId = schema[schemaId];\n        if (schId)\n            baseId = (0, resolve_1.resolveUrl)(this.opts.uriResolver, baseId, schId);\n        return new SchemaEnv({ schema, schemaId, root, baseId });\n    }\n    return getJsonPointer.call(this, p, schOrRef);\n}\nexports.resolveSchema = resolveSchema;\nconst PREVENT_SCOPE_CHANGE = new Set([\n    \"properties\",\n    \"patternProperties\",\n    \"enum\",\n    \"dependencies\",\n    \"definitions\",\n]);\nfunction getJsonPointer(parsedRef, { baseId, schema, root }) {\n    var _a;\n    if (((_a = parsedRef.fragment) === null || _a === void 0 ? void 0 : _a[0]) !== \"/\")\n        return;\n    for (const part of parsedRef.fragment.slice(1).split(\"/\")) {\n        if (typeof schema === \"boolean\")\n            return;\n        const partSchema = schema[(0, util_1.unescapeFragment)(part)];\n        if (partSchema === undefined)\n            return;\n        schema = partSchema;\n        // TODO PREVENT_SCOPE_CHANGE could be defined in keyword def?\n        const schId = typeof schema === \"object\" && schema[this.opts.schemaId];\n        if (!PREVENT_SCOPE_CHANGE.has(part) && schId) {\n            baseId = (0, resolve_1.resolveUrl)(this.opts.uriResolver, baseId, schId);\n        }\n    }\n    let env;\n    if (typeof schema != \"boolean\" && schema.$ref && !(0, util_1.schemaHasRulesButRef)(schema, this.RULES)) {\n        const $ref = (0, resolve_1.resolveUrl)(this.opts.uriResolver, baseId, schema.$ref);\n        env = resolveSchema.call(this, root, $ref);\n    }\n    // even though resolution failed we need to return SchemaEnv to throw exception\n    // so that compileAsync loads missing schema.\n    const { schemaId } = this.opts;\n    env = env || new SchemaEnv({ schema, schemaId, root, baseId });\n    if (env.schema !== env.root.schema)\n        return env;\n    return undefined;\n}\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// https://mathiasbynens.be/notes/javascript-encoding\n// https://github.com/bestiejs/punycode.js - punycode.ucs2.decode\nfunction ucs2length(str) {\n    const len = str.length;\n    let length = 0;\n    let pos = 0;\n    let value;\n    while (pos < len) {\n        length++;\n        value = str.charCodeAt(pos++);\n        if (value >= 0xd800 && value <= 0xdbff && pos < len) {\n            // high surrogate, and there is a next character\n            value = str.charCodeAt(pos);\n            if ((value & 0xfc00) === 0xdc00)\n                pos++; // low surrogate\n        }\n    }\n    return length;\n}\nexports.default = ucs2length;\nucs2length.code = 'require(\"ajv/dist/runtime/ucs2length\").default';\n//# sourceMappingURL=ucs2length.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst code_1 = require(\"../code\");\nconst additionalItems_1 = require(\"./additionalItems\");\nconst error = {\n    message: ({ params: { len } }) => (0, codegen_1.str) `must NOT have more than ${len} items`,\n    params: ({ params: { len } }) => (0, codegen_1._) `{limit: ${len}}`,\n};\nconst def = {\n    keyword: \"items\",\n    type: \"array\",\n    schemaType: [\"object\", \"boolean\"],\n    before: \"uniqueItems\",\n    error,\n    code(cxt) {\n        const { schema, parentSchema, it } = cxt;\n        const { prefixItems } = parentSchema;\n        it.items = true;\n        if ((0, util_1.alwaysValidSchema)(it, schema))\n            return;\n        if (prefixItems)\n            (0, additionalItems_1.validateAdditionalItems)(cxt, prefixItems);\n        else\n            cxt.ok((0, code_1.validateArray)(cxt));\n    },\n};\nexports.default = def;\n//# sourceMappingURL=items2020.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params: { missingProperty } }) => (0, codegen_1.str) `must have required property '${missingProperty}'`,\n    params: ({ params: { missingProperty } }) => (0, codegen_1._) `{missingProperty: ${missingProperty}}`,\n};\nconst def = {\n    keyword: \"required\",\n    type: \"object\",\n    schemaType: \"array\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, schema, schemaCode, data, $data, it } = cxt;\n        const { opts } = it;\n        if (!$data && schema.length === 0)\n            return;\n        const useLoop = schema.length >= opts.loopRequired;\n        if (it.allErrors)\n            allErrorsMode();\n        else\n            exitOnErrorMode();\n        if (opts.strictRequired) {\n            const props = cxt.parentSchema.properties;\n            const { definedProperties } = cxt.it;\n            for (const requiredKey of schema) {\n                if ((props === null || props === void 0 ? void 0 : props[requiredKey]) === undefined && !definedProperties.has(requiredKey)) {\n                    const schemaPath = it.schemaEnv.baseId + it.errSchemaPath;\n                    const msg = `required property \"${requiredKey}\" is not defined at \"${schemaPath}\" (strictRequired)`;\n                    (0, util_1.checkStrictMode)(it, msg, it.opts.strictRequired);\n                }\n            }\n        }\n        function allErrorsMode() {\n            if (useLoop || $data) {\n                cxt.block$data(codegen_1.nil, loopAllRequired);\n            }\n            else {\n                for (const prop of schema) {\n                    (0, code_1.checkReportMissingProp)(cxt, prop);\n                }\n            }\n        }\n        function exitOnErrorMode() {\n            const missing = gen.let(\"missing\");\n            if (useLoop || $data) {\n                const valid = gen.let(\"valid\", true);\n                cxt.block$data(valid, () => loopUntilMissing(missing, valid));\n                cxt.ok(valid);\n            }\n            else {\n                gen.if((0, code_1.checkMissingProp)(cxt, schema, missing));\n                (0, code_1.reportMissingProp)(cxt, missing);\n                gen.else();\n            }\n        }\n        function loopAllRequired() {\n            gen.forOf(\"prop\", schemaCode, (prop) => {\n                cxt.setParams({ missingProperty: prop });\n                gen.if((0, code_1.noPropertyInData)(gen, data, prop, opts.ownProperties), () => cxt.error());\n            });\n        }\n        function loopUntilMissing(missing, valid) {\n            cxt.setParams({ missingProperty: missing });\n            gen.forOf(missing, schemaCode, () => {\n                gen.assign(valid, (0, code_1.propertyInData)(gen, data, missing, opts.ownProperties));\n                gen.if((0, codegen_1.not)(valid), () => {\n                    cxt.error();\n                    gen.break();\n                });\n            }, codegen_1.nil);\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=required.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CodeGen = exports.Name = exports.nil = exports.stringify = exports.str = exports._ = exports.KeywordCxt = void 0;\nvar validate_1 = require(\"./compile/validate\");\nObject.defineProperty(exports, \"KeywordCxt\", { enumerable: true, get: function () { return validate_1.KeywordCxt; } });\nvar codegen_1 = require(\"./compile/codegen\");\nObject.defineProperty(exports, \"_\", { enumerable: true, get: function () { return codegen_1._; } });\nObject.defineProperty(exports, \"str\", { enumerable: true, get: function () { return codegen_1.str; } });\nObject.defineProperty(exports, \"stringify\", { enumerable: true, get: function () { return codegen_1.stringify; } });\nObject.defineProperty(exports, \"nil\", { enumerable: true, get: function () { return codegen_1.nil; } });\nObject.defineProperty(exports, \"Name\", { enumerable: true, get: function () { return codegen_1.Name; } });\nObject.defineProperty(exports, \"CodeGen\", { enumerable: true, get: function () { return codegen_1.CodeGen; } });\nconst validation_error_1 = require(\"./runtime/validation_error\");\nconst ref_error_1 = require(\"./compile/ref_error\");\nconst rules_1 = require(\"./compile/rules\");\nconst compile_1 = require(\"./compile\");\nconst codegen_2 = require(\"./compile/codegen\");\nconst resolve_1 = require(\"./compile/resolve\");\nconst dataType_1 = require(\"./compile/validate/dataType\");\nconst util_1 = require(\"./compile/util\");\nconst $dataRefSchema = require(\"./refs/data.json\");\nconst uri_1 = require(\"./runtime/uri\");\nconst defaultRegExp = (str, flags) => new RegExp(str, flags);\ndefaultRegExp.code = \"new RegExp\";\nconst META_IGNORE_OPTIONS = [\"removeAdditional\", \"useDefaults\", \"coerceTypes\"];\nconst EXT_SCOPE_NAMES = new Set([\n    \"validate\",\n    \"serialize\",\n    \"parse\",\n    \"wrapper\",\n    \"root\",\n    \"schema\",\n    \"keyword\",\n    \"pattern\",\n    \"formats\",\n    \"validate$data\",\n    \"func\",\n    \"obj\",\n    \"Error\",\n]);\nconst removedOptions = {\n    errorDataPath: \"\",\n    format: \"`validateFormats: false` can be used instead.\",\n    nullable: '\"nullable\" keyword is supported by default.',\n    jsonPointers: \"Deprecated jsPropertySyntax can be used instead.\",\n    extendRefs: \"Deprecated ignoreKeywordsWithRef can be used instead.\",\n    missingRefs: \"Pass empty schema with $id that should be ignored to ajv.addSchema.\",\n    processCode: \"Use option `code: {process: (code, schemaEnv: object) => string}`\",\n    sourceCode: \"Use option `code: {source: true}`\",\n    strictDefaults: \"It is default now, see option `strict`.\",\n    strictKeywords: \"It is default now, see option `strict`.\",\n    uniqueItems: '\"uniqueItems\" keyword is always validated.',\n    unknownFormats: \"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).\",\n    cache: \"Map is used as cache, schema object as key.\",\n    serialize: \"Map is used as cache, schema object as key.\",\n    ajvErrors: \"It is default now.\",\n};\nconst deprecatedOptions = {\n    ignoreKeywordsWithRef: \"\",\n    jsPropertySyntax: \"\",\n    unicode: '\"minLength\"/\"maxLength\" account for unicode characters by default.',\n};\nconst MAX_EXPRESSION = 200;\n// eslint-disable-next-line complexity\nfunction requiredOptions(o) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0;\n    const s = o.strict;\n    const _optz = (_a = o.code) === null || _a === void 0 ? void 0 : _a.optimize;\n    const optimize = _optz === true || _optz === undefined ? 1 : _optz || 0;\n    const regExp = (_c = (_b = o.code) === null || _b === void 0 ? void 0 : _b.regExp) !== null && _c !== void 0 ? _c : defaultRegExp;\n    const uriResolver = (_d = o.uriResolver) !== null && _d !== void 0 ? _d : uri_1.default;\n    return {\n        strictSchema: (_f = (_e = o.strictSchema) !== null && _e !== void 0 ? _e : s) !== null && _f !== void 0 ? _f : true,\n        strictNumbers: (_h = (_g = o.strictNumbers) !== null && _g !== void 0 ? _g : s) !== null && _h !== void 0 ? _h : true,\n        strictTypes: (_k = (_j = o.strictTypes) !== null && _j !== void 0 ? _j : s) !== null && _k !== void 0 ? _k : \"log\",\n        strictTuples: (_m = (_l = o.strictTuples) !== null && _l !== void 0 ? _l : s) !== null && _m !== void 0 ? _m : \"log\",\n        strictRequired: (_p = (_o = o.strictRequired) !== null && _o !== void 0 ? _o : s) !== null && _p !== void 0 ? _p : false,\n        code: o.code ? { ...o.code, optimize, regExp } : { optimize, regExp },\n        loopRequired: (_q = o.loopRequired) !== null && _q !== void 0 ? _q : MAX_EXPRESSION,\n        loopEnum: (_r = o.loopEnum) !== null && _r !== void 0 ? _r : MAX_EXPRESSION,\n        meta: (_s = o.meta) !== null && _s !== void 0 ? _s : true,\n        messages: (_t = o.messages) !== null && _t !== void 0 ? _t : true,\n        inlineRefs: (_u = o.inlineRefs) !== null && _u !== void 0 ? _u : true,\n        schemaId: (_v = o.schemaId) !== null && _v !== void 0 ? _v : \"$id\",\n        addUsedSchema: (_w = o.addUsedSchema) !== null && _w !== void 0 ? _w : true,\n        validateSchema: (_x = o.validateSchema) !== null && _x !== void 0 ? _x : true,\n        validateFormats: (_y = o.validateFormats) !== null && _y !== void 0 ? _y : true,\n        unicodeRegExp: (_z = o.unicodeRegExp) !== null && _z !== void 0 ? _z : true,\n        int32range: (_0 = o.int32range) !== null && _0 !== void 0 ? _0 : true,\n        uriResolver: uriResolver,\n    };\n}\nclass Ajv {\n    constructor(opts = {}) {\n        this.schemas = {};\n        this.refs = {};\n        this.formats = {};\n        this._compilations = new Set();\n        this._loading = {};\n        this._cache = new Map();\n        opts = this.opts = { ...opts, ...requiredOptions(opts) };\n        const { es5, lines } = this.opts.code;\n        this.scope = new codegen_2.ValueScope({ scope: {}, prefixes: EXT_SCOPE_NAMES, es5, lines });\n        this.logger = getLogger(opts.logger);\n        const formatOpt = opts.validateFormats;\n        opts.validateFormats = false;\n        this.RULES = (0, rules_1.getRules)();\n        checkOptions.call(this, removedOptions, opts, \"NOT SUPPORTED\");\n        checkOptions.call(this, deprecatedOptions, opts, \"DEPRECATED\", \"warn\");\n        this._metaOpts = getMetaSchemaOptions.call(this);\n        if (opts.formats)\n            addInitialFormats.call(this);\n        this._addVocabularies();\n        this._addDefaultMetaSchema();\n        if (opts.keywords)\n            addInitialKeywords.call(this, opts.keywords);\n        if (typeof opts.meta == \"object\")\n            this.addMetaSchema(opts.meta);\n        addInitialSchemas.call(this);\n        opts.validateFormats = formatOpt;\n    }\n    _addVocabularies() {\n        this.addKeyword(\"$async\");\n    }\n    _addDefaultMetaSchema() {\n        const { $data, meta, schemaId } = this.opts;\n        let _dataRefSchema = $dataRefSchema;\n        if (schemaId === \"id\") {\n            _dataRefSchema = { ...$dataRefSchema };\n            _dataRefSchema.id = _dataRefSchema.$id;\n            delete _dataRefSchema.$id;\n        }\n        if (meta && $data)\n            this.addMetaSchema(_dataRefSchema, _dataRefSchema[schemaId], false);\n    }\n    defaultMeta() {\n        const { meta, schemaId } = this.opts;\n        return (this.opts.defaultMeta = typeof meta == \"object\" ? meta[schemaId] || meta : undefined);\n    }\n    validate(schemaKeyRef, // key, ref or schema object\n    // eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents\n    data // to be validated\n    ) {\n        let v;\n        if (typeof schemaKeyRef == \"string\") {\n            v = this.getSchema(schemaKeyRef);\n            if (!v)\n                throw new Error(`no schema with key or ref \"${schemaKeyRef}\"`);\n        }\n        else {\n            v = this.compile(schemaKeyRef);\n        }\n        const valid = v(data);\n        if (!(\"$async\" in v))\n            this.errors = v.errors;\n        return valid;\n    }\n    compile(schema, _meta) {\n        const sch = this._addSchema(schema, _meta);\n        return (sch.validate || this._compileSchemaEnv(sch));\n    }\n    compileAsync(schema, meta) {\n        if (typeof this.opts.loadSchema != \"function\") {\n            throw new Error(\"options.loadSchema should be a function\");\n        }\n        const { loadSchema } = this.opts;\n        return runCompileAsync.call(this, schema, meta);\n        async function runCompileAsync(_schema, _meta) {\n            await loadMetaSchema.call(this, _schema.$schema);\n            const sch = this._addSchema(_schema, _meta);\n            return sch.validate || _compileAsync.call(this, sch);\n        }\n        async function loadMetaSchema($ref) {\n            if ($ref && !this.getSchema($ref)) {\n                await runCompileAsync.call(this, { $ref }, true);\n            }\n        }\n        async function _compileAsync(sch) {\n            try {\n                return this._compileSchemaEnv(sch);\n            }\n            catch (e) {\n                if (!(e instanceof ref_error_1.default))\n                    throw e;\n                checkLoaded.call(this, e);\n                await loadMissingSchema.call(this, e.missingSchema);\n                return _compileAsync.call(this, sch);\n            }\n        }\n        function checkLoaded({ missingSchema: ref, missingRef }) {\n            if (this.refs[ref]) {\n                throw new Error(`AnySchema ${ref} is loaded but ${missingRef} cannot be resolved`);\n            }\n        }\n        async function loadMissingSchema(ref) {\n            const _schema = await _loadSchema.call(this, ref);\n            if (!this.refs[ref])\n                await loadMetaSchema.call(this, _schema.$schema);\n            if (!this.refs[ref])\n                this.addSchema(_schema, ref, meta);\n        }\n        async function _loadSchema(ref) {\n            const p = this._loading[ref];\n            if (p)\n                return p;\n            try {\n                return await (this._loading[ref] = loadSchema(ref));\n            }\n            finally {\n                delete this._loading[ref];\n            }\n        }\n    }\n    // Adds schema to the instance\n    addSchema(schema, // If array is passed, `key` will be ignored\n    key, // Optional schema key. Can be passed to `validate` method instead of schema object or id/ref. One schema per instance can have empty `id` and `key`.\n    _meta, // true if schema is a meta-schema. Used internally, addMetaSchema should be used instead.\n    _validateSchema = this.opts.validateSchema // false to skip schema validation. Used internally, option validateSchema should be used instead.\n    ) {\n        if (Array.isArray(schema)) {\n            for (const sch of schema)\n                this.addSchema(sch, undefined, _meta, _validateSchema);\n            return this;\n        }\n        let id;\n        if (typeof schema === \"object\") {\n            const { schemaId } = this.opts;\n            id = schema[schemaId];\n            if (id !== undefined && typeof id != \"string\") {\n                throw new Error(`schema ${schemaId} must be string`);\n            }\n        }\n        key = (0, resolve_1.normalizeId)(key || id);\n        this._checkUnique(key);\n        this.schemas[key] = this._addSchema(schema, _meta, key, _validateSchema, true);\n        return this;\n    }\n    // Add schema that will be used to validate other schemas\n    // options in META_IGNORE_OPTIONS are alway set to false\n    addMetaSchema(schema, key, // schema key\n    _validateSchema = this.opts.validateSchema // false to skip schema validation, can be used to override validateSchema option for meta-schema\n    ) {\n        this.addSchema(schema, key, true, _validateSchema);\n        return this;\n    }\n    //  Validate schema against its meta-schema\n    validateSchema(schema, throwOrLogError) {\n        if (typeof schema == \"boolean\")\n            return true;\n        let $schema;\n        $schema = schema.$schema;\n        if ($schema !== undefined && typeof $schema != \"string\") {\n            throw new Error(\"$schema must be a string\");\n        }\n        $schema = $schema || this.opts.defaultMeta || this.defaultMeta();\n        if (!$schema) {\n            this.logger.warn(\"meta-schema not available\");\n            this.errors = null;\n            return true;\n        }\n        const valid = this.validate($schema, schema);\n        if (!valid && throwOrLogError) {\n            const message = \"schema is invalid: \" + this.errorsText();\n            if (this.opts.validateSchema === \"log\")\n                this.logger.error(message);\n            else\n                throw new Error(message);\n        }\n        return valid;\n    }\n    // Get compiled schema by `key` or `ref`.\n    // (`key` that was passed to `addSchema` or full schema reference - `schema.$id` or resolved id)\n    getSchema(keyRef) {\n        let sch;\n        while (typeof (sch = getSchEnv.call(this, keyRef)) == \"string\")\n            keyRef = sch;\n        if (sch === undefined) {\n            const { schemaId } = this.opts;\n            const root = new compile_1.SchemaEnv({ schema: {}, schemaId });\n            sch = compile_1.resolveSchema.call(this, root, keyRef);\n            if (!sch)\n                return;\n            this.refs[keyRef] = sch;\n        }\n        return (sch.validate || this._compileSchemaEnv(sch));\n    }\n    // Remove cached schema(s).\n    // If no parameter is passed all schemas but meta-schemas are removed.\n    // If RegExp is passed all schemas with key/id matching pattern but meta-schemas are removed.\n    // Even if schema is referenced by other schemas it still can be removed as other schemas have local references.\n    removeSchema(schemaKeyRef) {\n        if (schemaKeyRef instanceof RegExp) {\n            this._removeAllSchemas(this.schemas, schemaKeyRef);\n            this._removeAllSchemas(this.refs, schemaKeyRef);\n            return this;\n        }\n        switch (typeof schemaKeyRef) {\n            case \"undefined\":\n                this._removeAllSchemas(this.schemas);\n                this._removeAllSchemas(this.refs);\n                this._cache.clear();\n                return this;\n            case \"string\": {\n                const sch = getSchEnv.call(this, schemaKeyRef);\n                if (typeof sch == \"object\")\n                    this._cache.delete(sch.schema);\n                delete this.schemas[schemaKeyRef];\n                delete this.refs[schemaKeyRef];\n                return this;\n            }\n            case \"object\": {\n                const cacheKey = schemaKeyRef;\n                this._cache.delete(cacheKey);\n                let id = schemaKeyRef[this.opts.schemaId];\n                if (id) {\n                    id = (0, resolve_1.normalizeId)(id);\n                    delete this.schemas[id];\n                    delete this.refs[id];\n                }\n                return this;\n            }\n            default:\n                throw new Error(\"ajv.removeSchema: invalid parameter\");\n        }\n    }\n    // add \"vocabulary\" - a collection of keywords\n    addVocabulary(definitions) {\n        for (const def of definitions)\n            this.addKeyword(def);\n        return this;\n    }\n    addKeyword(kwdOrDef, def // deprecated\n    ) {\n        let keyword;\n        if (typeof kwdOrDef == \"string\") {\n            keyword = kwdOrDef;\n            if (typeof def == \"object\") {\n                this.logger.warn(\"these parameters are deprecated, see docs for addKeyword\");\n                def.keyword = keyword;\n            }\n        }\n        else if (typeof kwdOrDef == \"object\" && def === undefined) {\n            def = kwdOrDef;\n            keyword = def.keyword;\n            if (Array.isArray(keyword) && !keyword.length) {\n                throw new Error(\"addKeywords: keyword must be string or non-empty array\");\n            }\n        }\n        else {\n            throw new Error(\"invalid addKeywords parameters\");\n        }\n        checkKeyword.call(this, keyword, def);\n        if (!def) {\n            (0, util_1.eachItem)(keyword, (kwd) => addRule.call(this, kwd));\n            return this;\n        }\n        keywordMetaschema.call(this, def);\n        const definition = {\n            ...def,\n            type: (0, dataType_1.getJSONTypes)(def.type),\n            schemaType: (0, dataType_1.getJSONTypes)(def.schemaType),\n        };\n        (0, util_1.eachItem)(keyword, definition.type.length === 0\n            ? (k) => addRule.call(this, k, definition)\n            : (k) => definition.type.forEach((t) => addRule.call(this, k, definition, t)));\n        return this;\n    }\n    getKeyword(keyword) {\n        const rule = this.RULES.all[keyword];\n        return typeof rule == \"object\" ? rule.definition : !!rule;\n    }\n    // Remove keyword\n    removeKeyword(keyword) {\n        // TODO return type should be Ajv\n        const { RULES } = this;\n        delete RULES.keywords[keyword];\n        delete RULES.all[keyword];\n        for (const group of RULES.rules) {\n            const i = group.rules.findIndex((rule) => rule.keyword === keyword);\n            if (i >= 0)\n                group.rules.splice(i, 1);\n        }\n        return this;\n    }\n    // Add format\n    addFormat(name, format) {\n        if (typeof format == \"string\")\n            format = new RegExp(format);\n        this.formats[name] = format;\n        return this;\n    }\n    errorsText(errors = this.errors, // optional array of validation errors\n    { separator = \", \", dataVar = \"data\" } = {} // optional options with properties `separator` and `dataVar`\n    ) {\n        if (!errors || errors.length === 0)\n            return \"No errors\";\n        return errors\n            .map((e) => `${dataVar}${e.instancePath} ${e.message}`)\n            .reduce((text, msg) => text + separator + msg);\n    }\n    $dataMetaSchema(metaSchema, keywordsJsonPointers) {\n        const rules = this.RULES.all;\n        metaSchema = JSON.parse(JSON.stringify(metaSchema));\n        for (const jsonPointer of keywordsJsonPointers) {\n            const segments = jsonPointer.split(\"/\").slice(1); // first segment is an empty string\n            let keywords = metaSchema;\n            for (const seg of segments)\n                keywords = keywords[seg];\n            for (const key in rules) {\n                const rule = rules[key];\n                if (typeof rule != \"object\")\n                    continue;\n                const { $data } = rule.definition;\n                const schema = keywords[key];\n                if ($data && schema)\n                    keywords[key] = schemaOrData(schema);\n            }\n        }\n        return metaSchema;\n    }\n    _removeAllSchemas(schemas, regex) {\n        for (const keyRef in schemas) {\n            const sch = schemas[keyRef];\n            if (!regex || regex.test(keyRef)) {\n                if (typeof sch == \"string\") {\n                    delete schemas[keyRef];\n                }\n                else if (sch && !sch.meta) {\n                    this._cache.delete(sch.schema);\n                    delete schemas[keyRef];\n                }\n            }\n        }\n    }\n    _addSchema(schema, meta, baseId, validateSchema = this.opts.validateSchema, addSchema = this.opts.addUsedSchema) {\n        let id;\n        const { schemaId } = this.opts;\n        if (typeof schema == \"object\") {\n            id = schema[schemaId];\n        }\n        else {\n            if (this.opts.jtd)\n                throw new Error(\"schema must be object\");\n            else if (typeof schema != \"boolean\")\n                throw new Error(\"schema must be object or boolean\");\n        }\n        let sch = this._cache.get(schema);\n        if (sch !== undefined)\n            return sch;\n        baseId = (0, resolve_1.normalizeId)(id || baseId);\n        const localRefs = resolve_1.getSchemaRefs.call(this, schema, baseId);\n        sch = new compile_1.SchemaEnv({ schema, schemaId, meta, baseId, localRefs });\n        this._cache.set(sch.schema, sch);\n        if (addSchema && !baseId.startsWith(\"#\")) {\n            // TODO atm it is allowed to overwrite schemas without id (instead of not adding them)\n            if (baseId)\n                this._checkUnique(baseId);\n            this.refs[baseId] = sch;\n        }\n        if (validateSchema)\n            this.validateSchema(schema, true);\n        return sch;\n    }\n    _checkUnique(id) {\n        if (this.schemas[id] || this.refs[id]) {\n            throw new Error(`schema with key or id \"${id}\" already exists`);\n        }\n    }\n    _compileSchemaEnv(sch) {\n        if (sch.meta)\n            this._compileMetaSchema(sch);\n        else\n            compile_1.compileSchema.call(this, sch);\n        /* istanbul ignore if */\n        if (!sch.validate)\n            throw new Error(\"ajv implementation error\");\n        return sch.validate;\n    }\n    _compileMetaSchema(sch) {\n        const currentOpts = this.opts;\n        this.opts = this._metaOpts;\n        try {\n            compile_1.compileSchema.call(this, sch);\n        }\n        finally {\n            this.opts = currentOpts;\n        }\n    }\n}\nAjv.ValidationError = validation_error_1.default;\nAjv.MissingRefError = ref_error_1.default;\nexports.default = Ajv;\nfunction checkOptions(checkOpts, options, msg, log = \"error\") {\n    for (const key in checkOpts) {\n        const opt = key;\n        if (opt in options)\n            this.logger[log](`${msg}: option ${key}. ${checkOpts[opt]}`);\n    }\n}\nfunction getSchEnv(keyRef) {\n    keyRef = (0, resolve_1.normalizeId)(keyRef); // TODO tests fail without this line\n    return this.schemas[keyRef] || this.refs[keyRef];\n}\nfunction addInitialSchemas() {\n    const optsSchemas = this.opts.schemas;\n    if (!optsSchemas)\n        return;\n    if (Array.isArray(optsSchemas))\n        this.addSchema(optsSchemas);\n    else\n        for (const key in optsSchemas)\n            this.addSchema(optsSchemas[key], key);\n}\nfunction addInitialFormats() {\n    for (const name in this.opts.formats) {\n        const format = this.opts.formats[name];\n        if (format)\n            this.addFormat(name, format);\n    }\n}\nfunction addInitialKeywords(defs) {\n    if (Array.isArray(defs)) {\n        this.addVocabulary(defs);\n        return;\n    }\n    this.logger.warn(\"keywords option as map is deprecated, pass array\");\n    for (const keyword in defs) {\n        const def = defs[keyword];\n        if (!def.keyword)\n            def.keyword = keyword;\n        this.addKeyword(def);\n    }\n}\nfunction getMetaSchemaOptions() {\n    const metaOpts = { ...this.opts };\n    for (const opt of META_IGNORE_OPTIONS)\n        delete metaOpts[opt];\n    return metaOpts;\n}\nconst noLogs = { log() { }, warn() { }, error() { } };\nfunction getLogger(logger) {\n    if (logger === false)\n        return noLogs;\n    if (logger === undefined)\n        return console;\n    if (logger.log && logger.warn && logger.error)\n        return logger;\n    throw new Error(\"logger must implement log, warn and error methods\");\n}\nconst KEYWORD_NAME = /^[a-z_$][a-z0-9_$:-]*$/i;\nfunction checkKeyword(keyword, def) {\n    const { RULES } = this;\n    (0, util_1.eachItem)(keyword, (kwd) => {\n        if (RULES.keywords[kwd])\n            throw new Error(`Keyword ${kwd} is already defined`);\n        if (!KEYWORD_NAME.test(kwd))\n            throw new Error(`Keyword ${kwd} has invalid name`);\n    });\n    if (!def)\n        return;\n    if (def.$data && !(\"code\" in def || \"validate\" in def)) {\n        throw new Error('$data keyword must have \"code\" or \"validate\" function');\n    }\n}\nfunction addRule(keyword, definition, dataType) {\n    var _a;\n    const post = definition === null || definition === void 0 ? void 0 : definition.post;\n    if (dataType && post)\n        throw new Error('keyword with \"post\" flag cannot have \"type\"');\n    const { RULES } = this;\n    let ruleGroup = post ? RULES.post : RULES.rules.find(({ type: t }) => t === dataType);\n    if (!ruleGroup) {\n        ruleGroup = { type: dataType, rules: [] };\n        RULES.rules.push(ruleGroup);\n    }\n    RULES.keywords[keyword] = true;\n    if (!definition)\n        return;\n    const rule = {\n        keyword,\n        definition: {\n            ...definition,\n            type: (0, dataType_1.getJSONTypes)(definition.type),\n            schemaType: (0, dataType_1.getJSONTypes)(definition.schemaType),\n        },\n    };\n    if (definition.before)\n        addBeforeRule.call(this, ruleGroup, rule, definition.before);\n    else\n        ruleGroup.rules.push(rule);\n    RULES.all[keyword] = rule;\n    (_a = definition.implements) === null || _a === void 0 ? void 0 : _a.forEach((kwd) => this.addKeyword(kwd));\n}\nfunction addBeforeRule(ruleGroup, rule, before) {\n    const i = ruleGroup.rules.findIndex((_rule) => _rule.keyword === before);\n    if (i >= 0) {\n        ruleGroup.rules.splice(i, 0, rule);\n    }\n    else {\n        ruleGroup.rules.push(rule);\n        this.logger.warn(`rule ${before} is not defined`);\n    }\n}\nfunction keywordMetaschema(def) {\n    let { metaSchema } = def;\n    if (metaSchema === undefined)\n        return;\n    if (def.$data && this.opts.$data)\n        metaSchema = schemaOrData(metaSchema);\n    def.validateSchema = this.compile(metaSchema, true);\n}\nconst $dataRef = {\n    $ref: \"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#\",\n};\nfunction schemaOrData(schema) {\n    return { anyOf: [schema, $dataRef] };\n}\n//# sourceMappingURL=core.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.checkStrictMode = exports.getErrorPath = exports.Type = exports.useFunc = exports.setEvaluated = exports.evaluatedPropsToName = exports.mergeEvaluated = exports.eachItem = exports.unescapeJsonPointer = exports.escapeJsonPointer = exports.escapeFragment = exports.unescapeFragment = exports.schemaRefOrVal = exports.schemaHasRulesButRef = exports.schemaHasRules = exports.checkUnknownRules = exports.alwaysValidSchema = exports.toHash = void 0;\nconst codegen_1 = require(\"./codegen\");\nconst code_1 = require(\"./codegen/code\");\n// TODO refactor to use Set\nfunction toHash(arr) {\n    const hash = {};\n    for (const item of arr)\n        hash[item] = true;\n    return hash;\n}\nexports.toHash = toHash;\nfunction alwaysValidSchema(it, schema) {\n    if (typeof schema == \"boolean\")\n        return schema;\n    if (Object.keys(schema).length === 0)\n        return true;\n    checkUnknownRules(it, schema);\n    return !schemaHasRules(schema, it.self.RULES.all);\n}\nexports.alwaysValidSchema = alwaysValidSchema;\nfunction checkUnknownRules(it, schema = it.schema) {\n    const { opts, self } = it;\n    if (!opts.strictSchema)\n        return;\n    if (typeof schema === \"boolean\")\n        return;\n    const rules = self.RULES.keywords;\n    for (const key in schema) {\n        if (!rules[key])\n            checkStrictMode(it, `unknown keyword: \"${key}\"`);\n    }\n}\nexports.checkUnknownRules = checkUnknownRules;\nfunction schemaHasRules(schema, rules) {\n    if (typeof schema == \"boolean\")\n        return !schema;\n    for (const key in schema)\n        if (rules[key])\n            return true;\n    return false;\n}\nexports.schemaHasRules = schemaHasRules;\nfunction schemaHasRulesButRef(schema, RULES) {\n    if (typeof schema == \"boolean\")\n        return !schema;\n    for (const key in schema)\n        if (key !== \"$ref\" && RULES.all[key])\n            return true;\n    return false;\n}\nexports.schemaHasRulesButRef = schemaHasRulesButRef;\nfunction schemaRefOrVal({ topSchemaRef, schemaPath }, schema, keyword, $data) {\n    if (!$data) {\n        if (typeof schema == \"number\" || typeof schema == \"boolean\")\n            return schema;\n        if (typeof schema == \"string\")\n            return (0, codegen_1._) `${schema}`;\n    }\n    return (0, codegen_1._) `${topSchemaRef}${schemaPath}${(0, codegen_1.getProperty)(keyword)}`;\n}\nexports.schemaRefOrVal = schemaRefOrVal;\nfunction unescapeFragment(str) {\n    return unescapeJsonPointer(decodeURIComponent(str));\n}\nexports.unescapeFragment = unescapeFragment;\nfunction escapeFragment(str) {\n    return encodeURIComponent(escapeJsonPointer(str));\n}\nexports.escapeFragment = escapeFragment;\nfunction escapeJsonPointer(str) {\n    if (typeof str == \"number\")\n        return `${str}`;\n    return str.replace(/~/g, \"~0\").replace(/\\//g, \"~1\");\n}\nexports.escapeJsonPointer = escapeJsonPointer;\nfunction unescapeJsonPointer(str) {\n    return str.replace(/~1/g, \"/\").replace(/~0/g, \"~\");\n}\nexports.unescapeJsonPointer = unescapeJsonPointer;\nfunction eachItem(xs, f) {\n    if (Array.isArray(xs)) {\n        for (const x of xs)\n            f(x);\n    }\n    else {\n        f(xs);\n    }\n}\nexports.eachItem = eachItem;\nfunction makeMergeEvaluated({ mergeNames, mergeToName, mergeValues, resultToName, }) {\n    return (gen, from, to, toName) => {\n        const res = to === undefined\n            ? from\n            : to instanceof codegen_1.Name\n                ? (from instanceof codegen_1.Name ? mergeNames(gen, from, to) : mergeToName(gen, from, to), to)\n                : from instanceof codegen_1.Name\n                    ? (mergeToName(gen, to, from), from)\n                    : mergeValues(from, to);\n        return toName === codegen_1.Name && !(res instanceof codegen_1.Name) ? resultToName(gen, res) : res;\n    };\n}\nexports.mergeEvaluated = {\n    props: makeMergeEvaluated({\n        mergeNames: (gen, from, to) => gen.if((0, codegen_1._) `${to} !== true && ${from} !== undefined`, () => {\n            gen.if((0, codegen_1._) `${from} === true`, () => gen.assign(to, true), () => gen.assign(to, (0, codegen_1._) `${to} || {}`).code((0, codegen_1._) `Object.assign(${to}, ${from})`));\n        }),\n        mergeToName: (gen, from, to) => gen.if((0, codegen_1._) `${to} !== true`, () => {\n            if (from === true) {\n                gen.assign(to, true);\n            }\n            else {\n                gen.assign(to, (0, codegen_1._) `${to} || {}`);\n                setEvaluated(gen, to, from);\n            }\n        }),\n        mergeValues: (from, to) => (from === true ? true : { ...from, ...to }),\n        resultToName: evaluatedPropsToName,\n    }),\n    items: makeMergeEvaluated({\n        mergeNames: (gen, from, to) => gen.if((0, codegen_1._) `${to} !== true && ${from} !== undefined`, () => gen.assign(to, (0, codegen_1._) `${from} === true ? true : ${to} > ${from} ? ${to} : ${from}`)),\n        mergeToName: (gen, from, to) => gen.if((0, codegen_1._) `${to} !== true`, () => gen.assign(to, from === true ? true : (0, codegen_1._) `${to} > ${from} ? ${to} : ${from}`)),\n        mergeValues: (from, to) => (from === true ? true : Math.max(from, to)),\n        resultToName: (gen, items) => gen.var(\"items\", items),\n    }),\n};\nfunction evaluatedPropsToName(gen, ps) {\n    if (ps === true)\n        return gen.var(\"props\", true);\n    const props = gen.var(\"props\", (0, codegen_1._) `{}`);\n    if (ps !== undefined)\n        setEvaluated(gen, props, ps);\n    return props;\n}\nexports.evaluatedPropsToName = evaluatedPropsToName;\nfunction setEvaluated(gen, props, ps) {\n    Object.keys(ps).forEach((p) => gen.assign((0, codegen_1._) `${props}${(0, codegen_1.getProperty)(p)}`, true));\n}\nexports.setEvaluated = setEvaluated;\nconst snippets = {};\nfunction useFunc(gen, f) {\n    return gen.scopeValue(\"func\", {\n        ref: f,\n        code: snippets[f.code] || (snippets[f.code] = new code_1._Code(f.code)),\n    });\n}\nexports.useFunc = useFunc;\nvar Type;\n(function (Type) {\n    Type[Type[\"Num\"] = 0] = \"Num\";\n    Type[Type[\"Str\"] = 1] = \"Str\";\n})(Type || (exports.Type = Type = {}));\nfunction getErrorPath(dataProp, dataPropType, jsPropertySyntax) {\n    // let path\n    if (dataProp instanceof codegen_1.Name) {\n        const isNumber = dataPropType === Type.Num;\n        return jsPropertySyntax\n            ? isNumber\n                ? (0, codegen_1._) `\"[\" + ${dataProp} + \"]\"`\n                : (0, codegen_1._) `\"['\" + ${dataProp} + \"']\"`\n            : isNumber\n                ? (0, codegen_1._) `\"/\" + ${dataProp}`\n                : (0, codegen_1._) `\"/\" + ${dataProp}.replace(/~/g, \"~0\").replace(/\\\\//g, \"~1\")`; // TODO maybe use global escapePointer\n    }\n    return jsPropertySyntax ? (0, codegen_1.getProperty)(dataProp).toString() : \"/\" + escapeJsonPointer(dataProp);\n}\nexports.getErrorPath = getErrorPath;\nfunction checkStrictMode(it, msg, mode = it.opts.strictSchema) {\n    if (!mode)\n        return;\n    msg = `strict mode: ${msg}`;\n    if (mode === true)\n        throw new Error(msg);\n    it.self.logger.warn(msg);\n}\nexports.checkStrictMode = checkStrictMode;\n//# sourceMappingURL=util.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util_1 = require(\"../../compile/util\");\nconst def = {\n    keyword: [\"then\", \"else\"],\n    schemaType: [\"object\", \"boolean\"],\n    code({ keyword, parentSchema, it }) {\n        if (parentSchema.if === undefined)\n            (0, util_1.checkStrictMode)(it, `\"${keyword}\" without \"if\" is ignored`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=thenElse.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message({ keyword, schemaCode }) {\n        const comp = keyword === \"maxProperties\" ? \"more\" : \"fewer\";\n        return (0, codegen_1.str) `must NOT have ${comp} than ${schemaCode} properties`;\n    },\n    params: ({ schemaCode }) => (0, codegen_1._) `{limit: ${schemaCode}}`,\n};\nconst def = {\n    keyword: [\"maxProperties\", \"minProperties\"],\n    type: \"object\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { keyword, data, schemaCode } = cxt;\n        const op = keyword === \"maxProperties\" ? codegen_1.operators.GT : codegen_1.operators.LT;\n        cxt.fail$data((0, codegen_1._) `Object.keys(${data}).length ${op} ${schemaCode}`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=limitProperties.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.extendSubschemaMode = exports.extendSubschemaData = exports.getSubschema = void 0;\nconst codegen_1 = require(\"../codegen\");\nconst util_1 = require(\"../util\");\nfunction getSubschema(it, { keyword, schemaProp, schema, schemaPath, errSchemaPath, topSchemaRef }) {\n    if (keyword !== undefined && schema !== undefined) {\n        throw new Error('both \"keyword\" and \"schema\" passed, only one allowed');\n    }\n    if (keyword !== undefined) {\n        const sch = it.schema[keyword];\n        return schemaProp === undefined\n            ? {\n                schema: sch,\n                schemaPath: (0, codegen_1._) `${it.schemaPath}${(0, codegen_1.getProperty)(keyword)}`,\n                errSchemaPath: `${it.errSchemaPath}/${keyword}`,\n            }\n            : {\n                schema: sch[schemaProp],\n                schemaPath: (0, codegen_1._) `${it.schemaPath}${(0, codegen_1.getProperty)(keyword)}${(0, codegen_1.getProperty)(schemaProp)}`,\n                errSchemaPath: `${it.errSchemaPath}/${keyword}/${(0, util_1.escapeFragment)(schemaProp)}`,\n            };\n    }\n    if (schema !== undefined) {\n        if (schemaPath === undefined || errSchemaPath === undefined || topSchemaRef === undefined) {\n            throw new Error('\"schemaPath\", \"errSchemaPath\" and \"topSchemaRef\" are required with \"schema\"');\n        }\n        return {\n            schema,\n            schemaPath,\n            topSchemaRef,\n            errSchemaPath,\n        };\n    }\n    throw new Error('either \"keyword\" or \"schema\" must be passed');\n}\nexports.getSubschema = getSubschema;\nfunction extendSubschemaData(subschema, it, { dataProp, dataPropType: dpType, data, dataTypes, propertyName }) {\n    if (data !== undefined && dataProp !== undefined) {\n        throw new Error('both \"data\" and \"dataProp\" passed, only one allowed');\n    }\n    const { gen } = it;\n    if (dataProp !== undefined) {\n        const { errorPath, dataPathArr, opts } = it;\n        const nextData = gen.let(\"data\", (0, codegen_1._) `${it.data}${(0, codegen_1.getProperty)(dataProp)}`, true);\n        dataContextProps(nextData);\n        subschema.errorPath = (0, codegen_1.str) `${errorPath}${(0, util_1.getErrorPath)(dataProp, dpType, opts.jsPropertySyntax)}`;\n        subschema.parentDataProperty = (0, codegen_1._) `${dataProp}`;\n        subschema.dataPathArr = [...dataPathArr, subschema.parentDataProperty];\n    }\n    if (data !== undefined) {\n        const nextData = data instanceof codegen_1.Name ? data : gen.let(\"data\", data, true); // replaceable if used once?\n        dataContextProps(nextData);\n        if (propertyName !== undefined)\n            subschema.propertyName = propertyName;\n        // TODO something is possibly wrong here with not changing parentDataProperty and not appending dataPathArr\n    }\n    if (dataTypes)\n        subschema.dataTypes = dataTypes;\n    function dataContextProps(_nextData) {\n        subschema.data = _nextData;\n        subschema.dataLevel = it.dataLevel + 1;\n        subschema.dataTypes = [];\n        it.definedProperties = new Set();\n        subschema.parentData = it.data;\n        subschema.dataNames = [...it.dataNames, _nextData];\n    }\n}\nexports.extendSubschemaData = extendSubschemaData;\nfunction extendSubschemaMode(subschema, { jtdDiscriminator, jtdMetadata, compositeRule, createErrors, allErrors }) {\n    if (compositeRule !== undefined)\n        subschema.compositeRule = compositeRule;\n    if (createErrors !== undefined)\n        subschema.createErrors = createErrors;\n    if (allErrors !== undefined)\n        subschema.allErrors = allErrors;\n    subschema.jtdDiscriminator = jtdDiscriminator; // not inherited\n    subschema.jtdMetadata = jtdMetadata; // not inherited\n}\nexports.extendSubschemaMode = extendSubschemaMode;\n//# sourceMappingURL=subschema.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst resolve_1 = require(\"./resolve\");\nclass MissingRefError extends Error {\n    constructor(resolver, baseId, ref, msg) {\n        super(msg || `can't resolve reference ${ref} from id ${baseId}`);\n        this.missingRef = (0, resolve_1.resolveUrl)(resolver, baseId, ref);\n        this.missingSchema = (0, resolve_1.normalizeId)((0, resolve_1.getFullPath)(resolver, this.missingRef));\n    }\n}\nexports.default = MissingRefError;\n//# sourceMappingURL=ref_error.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message: ({ schemaCode }) => (0, codegen_1.str) `must match format \"${schemaCode}\"`,\n    params: ({ schemaCode }) => (0, codegen_1._) `{format: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"format\",\n    type: [\"number\", \"string\"],\n    schemaType: \"string\",\n    $data: true,\n    error,\n    code(cxt, ruleType) {\n        const { gen, data, $data, schema, schemaCode, it } = cxt;\n        const { opts, errSchemaPath, schemaEnv, self } = it;\n        if (!opts.validateFormats)\n            return;\n        if ($data)\n            validate$DataFormat();\n        else\n            validateFormat();\n        function validate$DataFormat() {\n            const fmts = gen.scopeValue(\"formats\", {\n                ref: self.formats,\n                code: opts.code.formats,\n            });\n            const fDef = gen.const(\"fDef\", (0, codegen_1._) `${fmts}[${schemaCode}]`);\n            const fType = gen.let(\"fType\");\n            const format = gen.let(\"format\");\n            // TODO simplify\n            gen.if((0, codegen_1._) `typeof ${fDef} == \"object\" && !(${fDef} instanceof RegExp)`, () => gen.assign(fType, (0, codegen_1._) `${fDef}.type || \"string\"`).assign(format, (0, codegen_1._) `${fDef}.validate`), () => gen.assign(fType, (0, codegen_1._) `\"string\"`).assign(format, fDef));\n            cxt.fail$data((0, codegen_1.or)(unknownFmt(), invalidFmt()));\n            function unknownFmt() {\n                if (opts.strictSchema === false)\n                    return codegen_1.nil;\n                return (0, codegen_1._) `${schemaCode} && !${format}`;\n            }\n            function invalidFmt() {\n                const callFormat = schemaEnv.$async\n                    ? (0, codegen_1._) `(${fDef}.async ? await ${format}(${data}) : ${format}(${data}))`\n                    : (0, codegen_1._) `${format}(${data})`;\n                const validData = (0, codegen_1._) `(typeof ${format} == \"function\" ? ${callFormat} : ${format}.test(${data}))`;\n                return (0, codegen_1._) `${format} && ${format} !== true && ${fType} === ${ruleType} && !${validData}`;\n            }\n        }\n        function validateFormat() {\n            const formatDef = self.formats[schema];\n            if (!formatDef) {\n                unknownFormat();\n                return;\n            }\n            if (formatDef === true)\n                return;\n            const [fmtType, format, fmtRef] = getFormat(formatDef);\n            if (fmtType === ruleType)\n                cxt.pass(validCondition());\n            function unknownFormat() {\n                if (opts.strictSchema === false) {\n                    self.logger.warn(unknownMsg());\n                    return;\n                }\n                throw new Error(unknownMsg());\n                function unknownMsg() {\n                    return `unknown format \"${schema}\" ignored in schema at path \"${errSchemaPath}\"`;\n                }\n            }\n            function getFormat(fmtDef) {\n                const code = fmtDef instanceof RegExp\n                    ? (0, codegen_1.regexpCode)(fmtDef)\n                    : opts.code.formats\n                        ? (0, codegen_1._) `${opts.code.formats}${(0, codegen_1.getProperty)(schema)}`\n                        : undefined;\n                const fmt = gen.scopeValue(\"formats\", { key: schema, ref: fmtDef, code });\n                if (typeof fmtDef == \"object\" && !(fmtDef instanceof RegExp)) {\n                    return [fmtDef.type || \"string\", fmtDef.validate, (0, codegen_1._) `${fmt}.validate`];\n                }\n                return [\"string\", fmtDef, fmt];\n            }\n            function validCondition() {\n                if (typeof formatDef == \"object\" && !(formatDef instanceof RegExp) && formatDef.async) {\n                    if (!schemaEnv.$async)\n                        throw new Error(\"async format in sync schema\");\n                    return (0, codegen_1._) `await ${fmtRef}(${data})`;\n                }\n                return typeof format == \"function\" ? (0, codegen_1._) `${fmtRef}(${data})` : (0, codegen_1._) `${fmtRef}.test(${data})`;\n            }\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=format.js.map","import Ajv from 'ajv';\nimport { correctionResponseSchema } from '../schemas/correctionResponseSchema';\nimport { CorrectionResponse } from '../models/CorrectionResponse';\n\nexport class ValidationService {\n    private ajv: Ajv;\n\n    constructor() {\n        this.ajv = new Ajv();\n    }\n\n    validateCorrectionResponse(data: any): { isValid: boolean; errors?: string[] } {\n        const validate = this.ajv.compile(correctionResponseSchema);\n        const isValid = validate(data);\n        \n        if (!isValid) {\n            const errors = validate.errors?.map(error => \n                `${error.instancePath} ${error.message}`\n            ) || ['Unknown validation error'];\n            return { isValid: false, errors };\n        }\n        \n        return { isValid: true };\n    }\n\n    isValidCorrectionResponse(data: any): data is CorrectionResponse {\n        return this.validateCorrectionResponse(data).isValid;\n    }\n}","'use strict'\n\n/** @type {(value: string) => boolean} */\nconst isUUID = RegExp.prototype.test.bind(/^[\\da-f]{8}-[\\da-f]{4}-[\\da-f]{4}-[\\da-f]{4}-[\\da-f]{12}$/iu)\n\n/** @type {(value: string) => boolean} */\nconst isIPv4 = RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\\d|1\\d{2}|[1-9]\\d|\\d)\\.){3}(?:25[0-5]|2[0-4]\\d|1\\d{2}|[1-9]\\d|\\d)$/u)\n\n/**\n * @param {Array<string>} input\n * @returns {string}\n */\nfunction stringArrayToHexStripped (input) {\n  let acc = ''\n  let code = 0\n  let i = 0\n\n  for (i = 0; i < input.length; i++) {\n    code = input[i].charCodeAt(0)\n    if (code === 48) {\n      continue\n    }\n    if (!((code >= 48 && code <= 57) || (code >= 65 && code <= 70) || (code >= 97 && code <= 102))) {\n      return ''\n    }\n    acc += input[i]\n    break\n  }\n\n  for (i += 1; i < input.length; i++) {\n    code = input[i].charCodeAt(0)\n    if (!((code >= 48 && code <= 57) || (code >= 65 && code <= 70) || (code >= 97 && code <= 102))) {\n      return ''\n    }\n    acc += input[i]\n  }\n  return acc\n}\n\n/**\n * @typedef {Object} GetIPV6Result\n * @property {boolean} error - Indicates if there was an error parsing the IPv6 address.\n * @property {string} address - The parsed IPv6 address.\n * @property {string} [zone] - The zone identifier, if present.\n */\n\n/**\n * @param {string} value\n * @returns {boolean}\n */\nconst nonSimpleDomain = RegExp.prototype.test.bind(/[^!\"$&'()*+,\\-.;=_`a-z{}~]/u)\n\n/**\n * @param {Array<string>} buffer\n * @returns {boolean}\n */\nfunction consumeIsZone (buffer) {\n  buffer.length = 0\n  return true\n}\n\n/**\n * @param {Array<string>} buffer\n * @param {Array<string>} address\n * @param {GetIPV6Result} output\n * @returns {boolean}\n */\nfunction consumeHextets (buffer, address, output) {\n  if (buffer.length) {\n    const hex = stringArrayToHexStripped(buffer)\n    if (hex !== '') {\n      address.push(hex)\n    } else {\n      output.error = true\n      return false\n    }\n    buffer.length = 0\n  }\n  return true\n}\n\n/**\n * @param {string} input\n * @returns {GetIPV6Result}\n */\nfunction getIPV6 (input) {\n  let tokenCount = 0\n  const output = { error: false, address: '', zone: '' }\n  /** @type {Array<string>} */\n  const address = []\n  /** @type {Array<string>} */\n  const buffer = []\n  let endipv6Encountered = false\n  let endIpv6 = false\n\n  let consume = consumeHextets\n\n  for (let i = 0; i < input.length; i++) {\n    const cursor = input[i]\n    if (cursor === '[' || cursor === ']') { continue }\n    if (cursor === ':') {\n      if (endipv6Encountered === true) {\n        endIpv6 = true\n      }\n      if (!consume(buffer, address, output)) { break }\n      if (++tokenCount > 7) {\n        // not valid\n        output.error = true\n        break\n      }\n      if (i > 0 && input[i - 1] === ':') {\n        endipv6Encountered = true\n      }\n      address.push(':')\n      continue\n    } else if (cursor === '%') {\n      if (!consume(buffer, address, output)) { break }\n      // switch to zone detection\n      consume = consumeIsZone\n    } else {\n      buffer.push(cursor)\n      continue\n    }\n  }\n  if (buffer.length) {\n    if (consume === consumeIsZone) {\n      output.zone = buffer.join('')\n    } else if (endIpv6) {\n      address.push(buffer.join(''))\n    } else {\n      address.push(stringArrayToHexStripped(buffer))\n    }\n  }\n  output.address = address.join('')\n  return output\n}\n\n/**\n * @typedef {Object} NormalizeIPv6Result\n * @property {string} host - The normalized host.\n * @property {string} [escapedHost] - The escaped host.\n * @property {boolean} isIPV6 - Indicates if the host is an IPv6 address.\n */\n\n/**\n * @param {string} host\n * @returns {NormalizeIPv6Result}\n */\nfunction normalizeIPv6 (host) {\n  if (findToken(host, ':') < 2) { return { host, isIPV6: false } }\n  const ipv6 = getIPV6(host)\n\n  if (!ipv6.error) {\n    let newHost = ipv6.address\n    let escapedHost = ipv6.address\n    if (ipv6.zone) {\n      newHost += '%' + ipv6.zone\n      escapedHost += '%25' + ipv6.zone\n    }\n    return { host: newHost, isIPV6: true, escapedHost }\n  } else {\n    return { host, isIPV6: false }\n  }\n}\n\n/**\n * @param {string} str\n * @param {string} token\n * @returns {number}\n */\nfunction findToken (str, token) {\n  let ind = 0\n  for (let i = 0; i < str.length; i++) {\n    if (str[i] === token) ind++\n  }\n  return ind\n}\n\n/**\n * @param {string} path\n * @returns {string}\n *\n * @see https://datatracker.ietf.org/doc/html/rfc3986#section-5.2.4\n */\nfunction removeDotSegments (path) {\n  let input = path\n  const output = []\n  let nextSlash = -1\n  let len = 0\n\n  // eslint-disable-next-line no-cond-assign\n  while (len = input.length) {\n    if (len === 1) {\n      if (input === '.') {\n        break\n      } else if (input === '/') {\n        output.push('/')\n        break\n      } else {\n        output.push(input)\n        break\n      }\n    } else if (len === 2) {\n      if (input[0] === '.') {\n        if (input[1] === '.') {\n          break\n        } else if (input[1] === '/') {\n          input = input.slice(2)\n          continue\n        }\n      } else if (input[0] === '/') {\n        if (input[1] === '.' || input[1] === '/') {\n          output.push('/')\n          break\n        }\n      }\n    } else if (len === 3) {\n      if (input === '/..') {\n        if (output.length !== 0) {\n          output.pop()\n        }\n        output.push('/')\n        break\n      }\n    }\n    if (input[0] === '.') {\n      if (input[1] === '.') {\n        if (input[2] === '/') {\n          input = input.slice(3)\n          continue\n        }\n      } else if (input[1] === '/') {\n        input = input.slice(2)\n        continue\n      }\n    } else if (input[0] === '/') {\n      if (input[1] === '.') {\n        if (input[2] === '/') {\n          input = input.slice(2)\n          continue\n        } else if (input[2] === '.') {\n          if (input[3] === '/') {\n            input = input.slice(3)\n            if (output.length !== 0) {\n              output.pop()\n            }\n            continue\n          }\n        }\n      }\n    }\n\n    // Rule 2E: Move normal path segment to output\n    if ((nextSlash = input.indexOf('/', 1)) === -1) {\n      output.push(input)\n      break\n    } else {\n      output.push(input.slice(0, nextSlash))\n      input = input.slice(nextSlash)\n    }\n  }\n\n  return output.join('')\n}\n\n/**\n * @param {import('../types/index').URIComponent} component\n * @param {boolean} esc\n * @returns {import('../types/index').URIComponent}\n */\nfunction normalizeComponentEncoding (component, esc) {\n  const func = esc !== true ? escape : unescape\n  if (component.scheme !== undefined) {\n    component.scheme = func(component.scheme)\n  }\n  if (component.userinfo !== undefined) {\n    component.userinfo = func(component.userinfo)\n  }\n  if (component.host !== undefined) {\n    component.host = func(component.host)\n  }\n  if (component.path !== undefined) {\n    component.path = func(component.path)\n  }\n  if (component.query !== undefined) {\n    component.query = func(component.query)\n  }\n  if (component.fragment !== undefined) {\n    component.fragment = func(component.fragment)\n  }\n  return component\n}\n\n/**\n * @param {import('../types/index').URIComponent} component\n * @returns {string|undefined}\n */\nfunction recomposeAuthority (component) {\n  const uriTokens = []\n\n  if (component.userinfo !== undefined) {\n    uriTokens.push(component.userinfo)\n    uriTokens.push('@')\n  }\n\n  if (component.host !== undefined) {\n    let host = unescape(component.host)\n    if (!isIPv4(host)) {\n      const ipV6res = normalizeIPv6(host)\n      if (ipV6res.isIPV6 === true) {\n        host = `[${ipV6res.escapedHost}]`\n      } else {\n        host = component.host\n      }\n    }\n    uriTokens.push(host)\n  }\n\n  if (typeof component.port === 'number' || typeof component.port === 'string') {\n    uriTokens.push(':')\n    uriTokens.push(String(component.port))\n  }\n\n  return uriTokens.length ? uriTokens.join('') : undefined\n};\n\nmodule.exports = {\n  nonSimpleDomain,\n  recomposeAuthority,\n  normalizeComponentEncoding,\n  removeDotSegments,\n  isIPv4,\n  isUUID,\n  normalizeIPv6,\n  stringArrayToHexStripped\n}\n","/**\n * @license\n * web-streams-polyfill v3.3.3\n * Copyright 2024 Mattias Buelens, Diwank Singh Tomer and other contributors.\n * This code is released under the MIT license.\n * SPDX-License-Identifier: MIT\n */\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.WebStreamsPolyfill = {}));\n})(this, (function (exports) { 'use strict';\n\n    function noop() {\n        return undefined;\n    }\n\n    function typeIsObject(x) {\n        return (typeof x === 'object' && x !== null) || typeof x === 'function';\n    }\n    const rethrowAssertionErrorRejection = noop;\n    function setFunctionName(fn, name) {\n        try {\n            Object.defineProperty(fn, 'name', {\n                value: name,\n                configurable: true\n            });\n        }\n        catch (_a) {\n            // This property is non-configurable in older browsers, so ignore if this throws.\n            // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/name#browser_compatibility\n        }\n    }\n\n    const originalPromise = Promise;\n    const originalPromiseThen = Promise.prototype.then;\n    const originalPromiseReject = Promise.reject.bind(originalPromise);\n    // https://webidl.spec.whatwg.org/#a-new-promise\n    function newPromise(executor) {\n        return new originalPromise(executor);\n    }\n    // https://webidl.spec.whatwg.org/#a-promise-resolved-with\n    function promiseResolvedWith(value) {\n        return newPromise(resolve => resolve(value));\n    }\n    // https://webidl.spec.whatwg.org/#a-promise-rejected-with\n    function promiseRejectedWith(reason) {\n        return originalPromiseReject(reason);\n    }\n    function PerformPromiseThen(promise, onFulfilled, onRejected) {\n        // There doesn't appear to be any way to correctly emulate the behaviour from JavaScript, so this is just an\n        // approximation.\n        return originalPromiseThen.call(promise, onFulfilled, onRejected);\n    }\n    // Bluebird logs a warning when a promise is created within a fulfillment handler, but then isn't returned\n    // from that handler. To prevent this, return null instead of void from all handlers.\n    // http://bluebirdjs.com/docs/warning-explanations.html#warning-a-promise-was-created-in-a-handler-but-was-not-returned-from-it\n    function uponPromise(promise, onFulfilled, onRejected) {\n        PerformPromiseThen(PerformPromiseThen(promise, onFulfilled, onRejected), undefined, rethrowAssertionErrorRejection);\n    }\n    function uponFulfillment(promise, onFulfilled) {\n        uponPromise(promise, onFulfilled);\n    }\n    function uponRejection(promise, onRejected) {\n        uponPromise(promise, undefined, onRejected);\n    }\n    function transformPromiseWith(promise, fulfillmentHandler, rejectionHandler) {\n        return PerformPromiseThen(promise, fulfillmentHandler, rejectionHandler);\n    }\n    function setPromiseIsHandledToTrue(promise) {\n        PerformPromiseThen(promise, undefined, rethrowAssertionErrorRejection);\n    }\n    let _queueMicrotask = callback => {\n        if (typeof queueMicrotask === 'function') {\n            _queueMicrotask = queueMicrotask;\n        }\n        else {\n            const resolvedPromise = promiseResolvedWith(undefined);\n            _queueMicrotask = cb => PerformPromiseThen(resolvedPromise, cb);\n        }\n        return _queueMicrotask(callback);\n    };\n    function reflectCall(F, V, args) {\n        if (typeof F !== 'function') {\n            throw new TypeError('Argument is not a function');\n        }\n        return Function.prototype.apply.call(F, V, args);\n    }\n    function promiseCall(F, V, args) {\n        try {\n            return promiseResolvedWith(reflectCall(F, V, args));\n        }\n        catch (value) {\n            return promiseRejectedWith(value);\n        }\n    }\n\n    // Original from Chromium\n    // https://chromium.googlesource.com/chromium/src/+/0aee4434a4dba42a42abaea9bfbc0cd196a63bc1/third_party/blink/renderer/core/streams/SimpleQueue.js\n    const QUEUE_MAX_ARRAY_SIZE = 16384;\n    /**\n     * Simple queue structure.\n     *\n     * Avoids scalability issues with using a packed array directly by using\n     * multiple arrays in a linked list and keeping the array size bounded.\n     */\n    class SimpleQueue {\n        constructor() {\n            this._cursor = 0;\n            this._size = 0;\n            // _front and _back are always defined.\n            this._front = {\n                _elements: [],\n                _next: undefined\n            };\n            this._back = this._front;\n            // The cursor is used to avoid calling Array.shift().\n            // It contains the index of the front element of the array inside the\n            // front-most node. It is always in the range [0, QUEUE_MAX_ARRAY_SIZE).\n            this._cursor = 0;\n            // When there is only one node, size === elements.length - cursor.\n            this._size = 0;\n        }\n        get length() {\n            return this._size;\n        }\n        // For exception safety, this method is structured in order:\n        // 1. Read state\n        // 2. Calculate required state mutations\n        // 3. Perform state mutations\n        push(element) {\n            const oldBack = this._back;\n            let newBack = oldBack;\n            if (oldBack._elements.length === QUEUE_MAX_ARRAY_SIZE - 1) {\n                newBack = {\n                    _elements: [],\n                    _next: undefined\n                };\n            }\n            // push() is the mutation most likely to throw an exception, so it\n            // goes first.\n            oldBack._elements.push(element);\n            if (newBack !== oldBack) {\n                this._back = newBack;\n                oldBack._next = newBack;\n            }\n            ++this._size;\n        }\n        // Like push(), shift() follows the read -> calculate -> mutate pattern for\n        // exception safety.\n        shift() { // must not be called on an empty queue\n            const oldFront = this._front;\n            let newFront = oldFront;\n            const oldCursor = this._cursor;\n            let newCursor = oldCursor + 1;\n            const elements = oldFront._elements;\n            const element = elements[oldCursor];\n            if (newCursor === QUEUE_MAX_ARRAY_SIZE) {\n                newFront = oldFront._next;\n                newCursor = 0;\n            }\n            // No mutations before this point.\n            --this._size;\n            this._cursor = newCursor;\n            if (oldFront !== newFront) {\n                this._front = newFront;\n            }\n            // Permit shifted element to be garbage collected.\n            elements[oldCursor] = undefined;\n            return element;\n        }\n        // The tricky thing about forEach() is that it can be called\n        // re-entrantly. The queue may be mutated inside the callback. It is easy to\n        // see that push() within the callback has no negative effects since the end\n        // of the queue is checked for on every iteration. If shift() is called\n        // repeatedly within the callback then the next iteration may return an\n        // element that has been removed. In this case the callback will be called\n        // with undefined values until we either \"catch up\" with elements that still\n        // exist or reach the back of the queue.\n        forEach(callback) {\n            let i = this._cursor;\n            let node = this._front;\n            let elements = node._elements;\n            while (i !== elements.length || node._next !== undefined) {\n                if (i === elements.length) {\n                    node = node._next;\n                    elements = node._elements;\n                    i = 0;\n                    if (elements.length === 0) {\n                        break;\n                    }\n                }\n                callback(elements[i]);\n                ++i;\n            }\n        }\n        // Return the element that would be returned if shift() was called now,\n        // without modifying the queue.\n        peek() { // must not be called on an empty queue\n            const front = this._front;\n            const cursor = this._cursor;\n            return front._elements[cursor];\n        }\n    }\n\n    const AbortSteps = Symbol('[[AbortSteps]]');\n    const ErrorSteps = Symbol('[[ErrorSteps]]');\n    const CancelSteps = Symbol('[[CancelSteps]]');\n    const PullSteps = Symbol('[[PullSteps]]');\n    const ReleaseSteps = Symbol('[[ReleaseSteps]]');\n\n    function ReadableStreamReaderGenericInitialize(reader, stream) {\n        reader._ownerReadableStream = stream;\n        stream._reader = reader;\n        if (stream._state === 'readable') {\n            defaultReaderClosedPromiseInitialize(reader);\n        }\n        else if (stream._state === 'closed') {\n            defaultReaderClosedPromiseInitializeAsResolved(reader);\n        }\n        else {\n            defaultReaderClosedPromiseInitializeAsRejected(reader, stream._storedError);\n        }\n    }\n    // A client of ReadableStreamDefaultReader and ReadableStreamBYOBReader may use these functions directly to bypass state\n    // check.\n    function ReadableStreamReaderGenericCancel(reader, reason) {\n        const stream = reader._ownerReadableStream;\n        return ReadableStreamCancel(stream, reason);\n    }\n    function ReadableStreamReaderGenericRelease(reader) {\n        const stream = reader._ownerReadableStream;\n        if (stream._state === 'readable') {\n            defaultReaderClosedPromiseReject(reader, new TypeError(`Reader was released and can no longer be used to monitor the stream's closedness`));\n        }\n        else {\n            defaultReaderClosedPromiseResetToRejected(reader, new TypeError(`Reader was released and can no longer be used to monitor the stream's closedness`));\n        }\n        stream._readableStreamController[ReleaseSteps]();\n        stream._reader = undefined;\n        reader._ownerReadableStream = undefined;\n    }\n    // Helper functions for the readers.\n    function readerLockException(name) {\n        return new TypeError('Cannot ' + name + ' a stream using a released reader');\n    }\n    // Helper functions for the ReadableStreamDefaultReader.\n    function defaultReaderClosedPromiseInitialize(reader) {\n        reader._closedPromise = newPromise((resolve, reject) => {\n            reader._closedPromise_resolve = resolve;\n            reader._closedPromise_reject = reject;\n        });\n    }\n    function defaultReaderClosedPromiseInitializeAsRejected(reader, reason) {\n        defaultReaderClosedPromiseInitialize(reader);\n        defaultReaderClosedPromiseReject(reader, reason);\n    }\n    function defaultReaderClosedPromiseInitializeAsResolved(reader) {\n        defaultReaderClosedPromiseInitialize(reader);\n        defaultReaderClosedPromiseResolve(reader);\n    }\n    function defaultReaderClosedPromiseReject(reader, reason) {\n        if (reader._closedPromise_reject === undefined) {\n            return;\n        }\n        setPromiseIsHandledToTrue(reader._closedPromise);\n        reader._closedPromise_reject(reason);\n        reader._closedPromise_resolve = undefined;\n        reader._closedPromise_reject = undefined;\n    }\n    function defaultReaderClosedPromiseResetToRejected(reader, reason) {\n        defaultReaderClosedPromiseInitializeAsRejected(reader, reason);\n    }\n    function defaultReaderClosedPromiseResolve(reader) {\n        if (reader._closedPromise_resolve === undefined) {\n            return;\n        }\n        reader._closedPromise_resolve(undefined);\n        reader._closedPromise_resolve = undefined;\n        reader._closedPromise_reject = undefined;\n    }\n\n    /// <reference lib=\"es2015.core\" />\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isFinite#Polyfill\n    const NumberIsFinite = Number.isFinite || function (x) {\n        return typeof x === 'number' && isFinite(x);\n    };\n\n    /// <reference lib=\"es2015.core\" />\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/trunc#Polyfill\n    const MathTrunc = Math.trunc || function (v) {\n        return v < 0 ? Math.ceil(v) : Math.floor(v);\n    };\n\n    // https://heycam.github.io/webidl/#idl-dictionaries\n    function isDictionary(x) {\n        return typeof x === 'object' || typeof x === 'function';\n    }\n    function assertDictionary(obj, context) {\n        if (obj !== undefined && !isDictionary(obj)) {\n            throw new TypeError(`${context} is not an object.`);\n        }\n    }\n    // https://heycam.github.io/webidl/#idl-callback-functions\n    function assertFunction(x, context) {\n        if (typeof x !== 'function') {\n            throw new TypeError(`${context} is not a function.`);\n        }\n    }\n    // https://heycam.github.io/webidl/#idl-object\n    function isObject(x) {\n        return (typeof x === 'object' && x !== null) || typeof x === 'function';\n    }\n    function assertObject(x, context) {\n        if (!isObject(x)) {\n            throw new TypeError(`${context} is not an object.`);\n        }\n    }\n    function assertRequiredArgument(x, position, context) {\n        if (x === undefined) {\n            throw new TypeError(`Parameter ${position} is required in '${context}'.`);\n        }\n    }\n    function assertRequiredField(x, field, context) {\n        if (x === undefined) {\n            throw new TypeError(`${field} is required in '${context}'.`);\n        }\n    }\n    // https://heycam.github.io/webidl/#idl-unrestricted-double\n    function convertUnrestrictedDouble(value) {\n        return Number(value);\n    }\n    function censorNegativeZero(x) {\n        return x === 0 ? 0 : x;\n    }\n    function integerPart(x) {\n        return censorNegativeZero(MathTrunc(x));\n    }\n    // https://heycam.github.io/webidl/#idl-unsigned-long-long\n    function convertUnsignedLongLongWithEnforceRange(value, context) {\n        const lowerBound = 0;\n        const upperBound = Number.MAX_SAFE_INTEGER;\n        let x = Number(value);\n        x = censorNegativeZero(x);\n        if (!NumberIsFinite(x)) {\n            throw new TypeError(`${context} is not a finite number`);\n        }\n        x = integerPart(x);\n        if (x < lowerBound || x > upperBound) {\n            throw new TypeError(`${context} is outside the accepted range of ${lowerBound} to ${upperBound}, inclusive`);\n        }\n        if (!NumberIsFinite(x) || x === 0) {\n            return 0;\n        }\n        // TODO Use BigInt if supported?\n        // let xBigInt = BigInt(integerPart(x));\n        // xBigInt = BigInt.asUintN(64, xBigInt);\n        // return Number(xBigInt);\n        return x;\n    }\n\n    function assertReadableStream(x, context) {\n        if (!IsReadableStream(x)) {\n            throw new TypeError(`${context} is not a ReadableStream.`);\n        }\n    }\n\n    // Abstract operations for the ReadableStream.\n    function AcquireReadableStreamDefaultReader(stream) {\n        return new ReadableStreamDefaultReader(stream);\n    }\n    // ReadableStream API exposed for controllers.\n    function ReadableStreamAddReadRequest(stream, readRequest) {\n        stream._reader._readRequests.push(readRequest);\n    }\n    function ReadableStreamFulfillReadRequest(stream, chunk, done) {\n        const reader = stream._reader;\n        const readRequest = reader._readRequests.shift();\n        if (done) {\n            readRequest._closeSteps();\n        }\n        else {\n            readRequest._chunkSteps(chunk);\n        }\n    }\n    function ReadableStreamGetNumReadRequests(stream) {\n        return stream._reader._readRequests.length;\n    }\n    function ReadableStreamHasDefaultReader(stream) {\n        const reader = stream._reader;\n        if (reader === undefined) {\n            return false;\n        }\n        if (!IsReadableStreamDefaultReader(reader)) {\n            return false;\n        }\n        return true;\n    }\n    /**\n     * A default reader vended by a {@link ReadableStream}.\n     *\n     * @public\n     */\n    class ReadableStreamDefaultReader {\n        constructor(stream) {\n            assertRequiredArgument(stream, 1, 'ReadableStreamDefaultReader');\n            assertReadableStream(stream, 'First parameter');\n            if (IsReadableStreamLocked(stream)) {\n                throw new TypeError('This stream has already been locked for exclusive reading by another reader');\n            }\n            ReadableStreamReaderGenericInitialize(this, stream);\n            this._readRequests = new SimpleQueue();\n        }\n        /**\n         * Returns a promise that will be fulfilled when the stream becomes closed,\n         * or rejected if the stream ever errors or the reader's lock is released before the stream finishes closing.\n         */\n        get closed() {\n            if (!IsReadableStreamDefaultReader(this)) {\n                return promiseRejectedWith(defaultReaderBrandCheckException('closed'));\n            }\n            return this._closedPromise;\n        }\n        /**\n         * If the reader is active, behaves the same as {@link ReadableStream.cancel | stream.cancel(reason)}.\n         */\n        cancel(reason = undefined) {\n            if (!IsReadableStreamDefaultReader(this)) {\n                return promiseRejectedWith(defaultReaderBrandCheckException('cancel'));\n            }\n            if (this._ownerReadableStream === undefined) {\n                return promiseRejectedWith(readerLockException('cancel'));\n            }\n            return ReadableStreamReaderGenericCancel(this, reason);\n        }\n        /**\n         * Returns a promise that allows access to the next chunk from the stream's internal queue, if available.\n         *\n         * If reading a chunk causes the queue to become empty, more data will be pulled from the underlying source.\n         */\n        read() {\n            if (!IsReadableStreamDefaultReader(this)) {\n                return promiseRejectedWith(defaultReaderBrandCheckException('read'));\n            }\n            if (this._ownerReadableStream === undefined) {\n                return promiseRejectedWith(readerLockException('read from'));\n            }\n            let resolvePromise;\n            let rejectPromise;\n            const promise = newPromise((resolve, reject) => {\n                resolvePromise = resolve;\n                rejectPromise = reject;\n            });\n            const readRequest = {\n                _chunkSteps: chunk => resolvePromise({ value: chunk, done: false }),\n                _closeSteps: () => resolvePromise({ value: undefined, done: true }),\n                _errorSteps: e => rejectPromise(e)\n            };\n            ReadableStreamDefaultReaderRead(this, readRequest);\n            return promise;\n        }\n        /**\n         * Releases the reader's lock on the corresponding stream. After the lock is released, the reader is no longer active.\n         * If the associated stream is errored when the lock is released, the reader will appear errored in the same way\n         * from now on; otherwise, the reader will appear closed.\n         *\n         * A reader's lock cannot be released while it still has a pending read request, i.e., if a promise returned by\n         * the reader's {@link ReadableStreamDefaultReader.read | read()} method has not yet been settled. Attempting to\n         * do so will throw a `TypeError` and leave the reader locked to the stream.\n         */\n        releaseLock() {\n            if (!IsReadableStreamDefaultReader(this)) {\n                throw defaultReaderBrandCheckException('releaseLock');\n            }\n            if (this._ownerReadableStream === undefined) {\n                return;\n            }\n            ReadableStreamDefaultReaderRelease(this);\n        }\n    }\n    Object.defineProperties(ReadableStreamDefaultReader.prototype, {\n        cancel: { enumerable: true },\n        read: { enumerable: true },\n        releaseLock: { enumerable: true },\n        closed: { enumerable: true }\n    });\n    setFunctionName(ReadableStreamDefaultReader.prototype.cancel, 'cancel');\n    setFunctionName(ReadableStreamDefaultReader.prototype.read, 'read');\n    setFunctionName(ReadableStreamDefaultReader.prototype.releaseLock, 'releaseLock');\n    if (typeof Symbol.toStringTag === 'symbol') {\n        Object.defineProperty(ReadableStreamDefaultReader.prototype, Symbol.toStringTag, {\n            value: 'ReadableStreamDefaultReader',\n            configurable: true\n        });\n    }\n    // Abstract operations for the readers.\n    function IsReadableStreamDefaultReader(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_readRequests')) {\n            return false;\n        }\n        return x instanceof ReadableStreamDefaultReader;\n    }\n    function ReadableStreamDefaultReaderRead(reader, readRequest) {\n        const stream = reader._ownerReadableStream;\n        stream._disturbed = true;\n        if (stream._state === 'closed') {\n            readRequest._closeSteps();\n        }\n        else if (stream._state === 'errored') {\n            readRequest._errorSteps(stream._storedError);\n        }\n        else {\n            stream._readableStreamController[PullSteps](readRequest);\n        }\n    }\n    function ReadableStreamDefaultReaderRelease(reader) {\n        ReadableStreamReaderGenericRelease(reader);\n        const e = new TypeError('Reader was released');\n        ReadableStreamDefaultReaderErrorReadRequests(reader, e);\n    }\n    function ReadableStreamDefaultReaderErrorReadRequests(reader, e) {\n        const readRequests = reader._readRequests;\n        reader._readRequests = new SimpleQueue();\n        readRequests.forEach(readRequest => {\n            readRequest._errorSteps(e);\n        });\n    }\n    // Helper functions for the ReadableStreamDefaultReader.\n    function defaultReaderBrandCheckException(name) {\n        return new TypeError(`ReadableStreamDefaultReader.prototype.${name} can only be used on a ReadableStreamDefaultReader`);\n    }\n\n    /// <reference lib=\"es2018.asynciterable\" />\n    /* eslint-disable @typescript-eslint/no-empty-function */\n    const AsyncIteratorPrototype = Object.getPrototypeOf(Object.getPrototypeOf(async function* () { }).prototype);\n\n    /// <reference lib=\"es2018.asynciterable\" />\n    class ReadableStreamAsyncIteratorImpl {\n        constructor(reader, preventCancel) {\n            this._ongoingPromise = undefined;\n            this._isFinished = false;\n            this._reader = reader;\n            this._preventCancel = preventCancel;\n        }\n        next() {\n            const nextSteps = () => this._nextSteps();\n            this._ongoingPromise = this._ongoingPromise ?\n                transformPromiseWith(this._ongoingPromise, nextSteps, nextSteps) :\n                nextSteps();\n            return this._ongoingPromise;\n        }\n        return(value) {\n            const returnSteps = () => this._returnSteps(value);\n            return this._ongoingPromise ?\n                transformPromiseWith(this._ongoingPromise, returnSteps, returnSteps) :\n                returnSteps();\n        }\n        _nextSteps() {\n            if (this._isFinished) {\n                return Promise.resolve({ value: undefined, done: true });\n            }\n            const reader = this._reader;\n            let resolvePromise;\n            let rejectPromise;\n            const promise = newPromise((resolve, reject) => {\n                resolvePromise = resolve;\n                rejectPromise = reject;\n            });\n            const readRequest = {\n                _chunkSteps: chunk => {\n                    this._ongoingPromise = undefined;\n                    // This needs to be delayed by one microtask, otherwise we stop pulling too early which breaks a test.\n                    // FIXME Is this a bug in the specification, or in the test?\n                    _queueMicrotask(() => resolvePromise({ value: chunk, done: false }));\n                },\n                _closeSteps: () => {\n                    this._ongoingPromise = undefined;\n                    this._isFinished = true;\n                    ReadableStreamReaderGenericRelease(reader);\n                    resolvePromise({ value: undefined, done: true });\n                },\n                _errorSteps: reason => {\n                    this._ongoingPromise = undefined;\n                    this._isFinished = true;\n                    ReadableStreamReaderGenericRelease(reader);\n                    rejectPromise(reason);\n                }\n            };\n            ReadableStreamDefaultReaderRead(reader, readRequest);\n            return promise;\n        }\n        _returnSteps(value) {\n            if (this._isFinished) {\n                return Promise.resolve({ value, done: true });\n            }\n            this._isFinished = true;\n            const reader = this._reader;\n            if (!this._preventCancel) {\n                const result = ReadableStreamReaderGenericCancel(reader, value);\n                ReadableStreamReaderGenericRelease(reader);\n                return transformPromiseWith(result, () => ({ value, done: true }));\n            }\n            ReadableStreamReaderGenericRelease(reader);\n            return promiseResolvedWith({ value, done: true });\n        }\n    }\n    const ReadableStreamAsyncIteratorPrototype = {\n        next() {\n            if (!IsReadableStreamAsyncIterator(this)) {\n                return promiseRejectedWith(streamAsyncIteratorBrandCheckException('next'));\n            }\n            return this._asyncIteratorImpl.next();\n        },\n        return(value) {\n            if (!IsReadableStreamAsyncIterator(this)) {\n                return promiseRejectedWith(streamAsyncIteratorBrandCheckException('return'));\n            }\n            return this._asyncIteratorImpl.return(value);\n        }\n    };\n    Object.setPrototypeOf(ReadableStreamAsyncIteratorPrototype, AsyncIteratorPrototype);\n    // Abstract operations for the ReadableStream.\n    function AcquireReadableStreamAsyncIterator(stream, preventCancel) {\n        const reader = AcquireReadableStreamDefaultReader(stream);\n        const impl = new ReadableStreamAsyncIteratorImpl(reader, preventCancel);\n        const iterator = Object.create(ReadableStreamAsyncIteratorPrototype);\n        iterator._asyncIteratorImpl = impl;\n        return iterator;\n    }\n    function IsReadableStreamAsyncIterator(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_asyncIteratorImpl')) {\n            return false;\n        }\n        try {\n            // noinspection SuspiciousTypeOfGuard\n            return x._asyncIteratorImpl instanceof\n                ReadableStreamAsyncIteratorImpl;\n        }\n        catch (_a) {\n            return false;\n        }\n    }\n    // Helper functions for the ReadableStream.\n    function streamAsyncIteratorBrandCheckException(name) {\n        return new TypeError(`ReadableStreamAsyncIterator.${name} can only be used on a ReadableSteamAsyncIterator`);\n    }\n\n    /// <reference lib=\"es2015.core\" />\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isNaN#Polyfill\n    const NumberIsNaN = Number.isNaN || function (x) {\n        // eslint-disable-next-line no-self-compare\n        return x !== x;\n    };\n\n    var _a, _b, _c;\n    function CreateArrayFromList(elements) {\n        // We use arrays to represent lists, so this is basically a no-op.\n        // Do a slice though just in case we happen to depend on the unique-ness.\n        return elements.slice();\n    }\n    function CopyDataBlockBytes(dest, destOffset, src, srcOffset, n) {\n        new Uint8Array(dest).set(new Uint8Array(src, srcOffset, n), destOffset);\n    }\n    let TransferArrayBuffer = (O) => {\n        if (typeof O.transfer === 'function') {\n            TransferArrayBuffer = buffer => buffer.transfer();\n        }\n        else if (typeof structuredClone === 'function') {\n            TransferArrayBuffer = buffer => structuredClone(buffer, { transfer: [buffer] });\n        }\n        else {\n            // Not implemented correctly\n            TransferArrayBuffer = buffer => buffer;\n        }\n        return TransferArrayBuffer(O);\n    };\n    let IsDetachedBuffer = (O) => {\n        if (typeof O.detached === 'boolean') {\n            IsDetachedBuffer = buffer => buffer.detached;\n        }\n        else {\n            // Not implemented correctly\n            IsDetachedBuffer = buffer => buffer.byteLength === 0;\n        }\n        return IsDetachedBuffer(O);\n    };\n    function ArrayBufferSlice(buffer, begin, end) {\n        // ArrayBuffer.prototype.slice is not available on IE10\n        // https://www.caniuse.com/mdn-javascript_builtins_arraybuffer_slice\n        if (buffer.slice) {\n            return buffer.slice(begin, end);\n        }\n        const length = end - begin;\n        const slice = new ArrayBuffer(length);\n        CopyDataBlockBytes(slice, 0, buffer, begin, length);\n        return slice;\n    }\n    function GetMethod(receiver, prop) {\n        const func = receiver[prop];\n        if (func === undefined || func === null) {\n            return undefined;\n        }\n        if (typeof func !== 'function') {\n            throw new TypeError(`${String(prop)} is not a function`);\n        }\n        return func;\n    }\n    function CreateAsyncFromSyncIterator(syncIteratorRecord) {\n        // Instead of re-implementing CreateAsyncFromSyncIterator and %AsyncFromSyncIteratorPrototype%,\n        // we use yield* inside an async generator function to achieve the same result.\n        // Wrap the sync iterator inside a sync iterable, so we can use it with yield*.\n        const syncIterable = {\n            [Symbol.iterator]: () => syncIteratorRecord.iterator\n        };\n        // Create an async generator function and immediately invoke it.\n        const asyncIterator = (async function* () {\n            return yield* syncIterable;\n        }());\n        // Return as an async iterator record.\n        const nextMethod = asyncIterator.next;\n        return { iterator: asyncIterator, nextMethod, done: false };\n    }\n    // Aligns with core-js/modules/es.symbol.async-iterator.js\n    const SymbolAsyncIterator = (_c = (_a = Symbol.asyncIterator) !== null && _a !== void 0 ? _a : (_b = Symbol.for) === null || _b === void 0 ? void 0 : _b.call(Symbol, 'Symbol.asyncIterator')) !== null && _c !== void 0 ? _c : '@@asyncIterator';\n    function GetIterator(obj, hint = 'sync', method) {\n        if (method === undefined) {\n            if (hint === 'async') {\n                method = GetMethod(obj, SymbolAsyncIterator);\n                if (method === undefined) {\n                    const syncMethod = GetMethod(obj, Symbol.iterator);\n                    const syncIteratorRecord = GetIterator(obj, 'sync', syncMethod);\n                    return CreateAsyncFromSyncIterator(syncIteratorRecord);\n                }\n            }\n            else {\n                method = GetMethod(obj, Symbol.iterator);\n            }\n        }\n        if (method === undefined) {\n            throw new TypeError('The object is not iterable');\n        }\n        const iterator = reflectCall(method, obj, []);\n        if (!typeIsObject(iterator)) {\n            throw new TypeError('The iterator method must return an object');\n        }\n        const nextMethod = iterator.next;\n        return { iterator, nextMethod, done: false };\n    }\n    function IteratorNext(iteratorRecord) {\n        const result = reflectCall(iteratorRecord.nextMethod, iteratorRecord.iterator, []);\n        if (!typeIsObject(result)) {\n            throw new TypeError('The iterator.next() method must return an object');\n        }\n        return result;\n    }\n    function IteratorComplete(iterResult) {\n        return Boolean(iterResult.done);\n    }\n    function IteratorValue(iterResult) {\n        return iterResult.value;\n    }\n\n    function IsNonNegativeNumber(v) {\n        if (typeof v !== 'number') {\n            return false;\n        }\n        if (NumberIsNaN(v)) {\n            return false;\n        }\n        if (v < 0) {\n            return false;\n        }\n        return true;\n    }\n    function CloneAsUint8Array(O) {\n        const buffer = ArrayBufferSlice(O.buffer, O.byteOffset, O.byteOffset + O.byteLength);\n        return new Uint8Array(buffer);\n    }\n\n    function DequeueValue(container) {\n        const pair = container._queue.shift();\n        container._queueTotalSize -= pair.size;\n        if (container._queueTotalSize < 0) {\n            container._queueTotalSize = 0;\n        }\n        return pair.value;\n    }\n    function EnqueueValueWithSize(container, value, size) {\n        if (!IsNonNegativeNumber(size) || size === Infinity) {\n            throw new RangeError('Size must be a finite, non-NaN, non-negative number.');\n        }\n        container._queue.push({ value, size });\n        container._queueTotalSize += size;\n    }\n    function PeekQueueValue(container) {\n        const pair = container._queue.peek();\n        return pair.value;\n    }\n    function ResetQueue(container) {\n        container._queue = new SimpleQueue();\n        container._queueTotalSize = 0;\n    }\n\n    function isDataViewConstructor(ctor) {\n        return ctor === DataView;\n    }\n    function isDataView(view) {\n        return isDataViewConstructor(view.constructor);\n    }\n    function arrayBufferViewElementSize(ctor) {\n        if (isDataViewConstructor(ctor)) {\n            return 1;\n        }\n        return ctor.BYTES_PER_ELEMENT;\n    }\n\n    /**\n     * A pull-into request in a {@link ReadableByteStreamController}.\n     *\n     * @public\n     */\n    class ReadableStreamBYOBRequest {\n        constructor() {\n            throw new TypeError('Illegal constructor');\n        }\n        /**\n         * Returns the view for writing in to, or `null` if the BYOB request has already been responded to.\n         */\n        get view() {\n            if (!IsReadableStreamBYOBRequest(this)) {\n                throw byobRequestBrandCheckException('view');\n            }\n            return this._view;\n        }\n        respond(bytesWritten) {\n            if (!IsReadableStreamBYOBRequest(this)) {\n                throw byobRequestBrandCheckException('respond');\n            }\n            assertRequiredArgument(bytesWritten, 1, 'respond');\n            bytesWritten = convertUnsignedLongLongWithEnforceRange(bytesWritten, 'First parameter');\n            if (this._associatedReadableByteStreamController === undefined) {\n                throw new TypeError('This BYOB request has been invalidated');\n            }\n            if (IsDetachedBuffer(this._view.buffer)) {\n                throw new TypeError(`The BYOB request's buffer has been detached and so cannot be used as a response`);\n            }\n            ReadableByteStreamControllerRespond(this._associatedReadableByteStreamController, bytesWritten);\n        }\n        respondWithNewView(view) {\n            if (!IsReadableStreamBYOBRequest(this)) {\n                throw byobRequestBrandCheckException('respondWithNewView');\n            }\n            assertRequiredArgument(view, 1, 'respondWithNewView');\n            if (!ArrayBuffer.isView(view)) {\n                throw new TypeError('You can only respond with array buffer views');\n            }\n            if (this._associatedReadableByteStreamController === undefined) {\n                throw new TypeError('This BYOB request has been invalidated');\n            }\n            if (IsDetachedBuffer(view.buffer)) {\n                throw new TypeError('The given view\\'s buffer has been detached and so cannot be used as a response');\n            }\n            ReadableByteStreamControllerRespondWithNewView(this._associatedReadableByteStreamController, view);\n        }\n    }\n    Object.defineProperties(ReadableStreamBYOBRequest.prototype, {\n        respond: { enumerable: true },\n        respondWithNewView: { enumerable: true },\n        view: { enumerable: true }\n    });\n    setFunctionName(ReadableStreamBYOBRequest.prototype.respond, 'respond');\n    setFunctionName(ReadableStreamBYOBRequest.prototype.respondWithNewView, 'respondWithNewView');\n    if (typeof Symbol.toStringTag === 'symbol') {\n        Object.defineProperty(ReadableStreamBYOBRequest.prototype, Symbol.toStringTag, {\n            value: 'ReadableStreamBYOBRequest',\n            configurable: true\n        });\n    }\n    /**\n     * Allows control of a {@link ReadableStream | readable byte stream}'s state and internal queue.\n     *\n     * @public\n     */\n    class ReadableByteStreamController {\n        constructor() {\n            throw new TypeError('Illegal constructor');\n        }\n        /**\n         * Returns the current BYOB pull request, or `null` if there isn't one.\n         */\n        get byobRequest() {\n            if (!IsReadableByteStreamController(this)) {\n                throw byteStreamControllerBrandCheckException('byobRequest');\n            }\n            return ReadableByteStreamControllerGetBYOBRequest(this);\n        }\n        /**\n         * Returns the desired size to fill the controlled stream's internal queue. It can be negative, if the queue is\n         * over-full. An underlying byte source ought to use this information to determine when and how to apply backpressure.\n         */\n        get desiredSize() {\n            if (!IsReadableByteStreamController(this)) {\n                throw byteStreamControllerBrandCheckException('desiredSize');\n            }\n            return ReadableByteStreamControllerGetDesiredSize(this);\n        }\n        /**\n         * Closes the controlled readable stream. Consumers will still be able to read any previously-enqueued chunks from\n         * the stream, but once those are read, the stream will become closed.\n         */\n        close() {\n            if (!IsReadableByteStreamController(this)) {\n                throw byteStreamControllerBrandCheckException('close');\n            }\n            if (this._closeRequested) {\n                throw new TypeError('The stream has already been closed; do not close it again!');\n            }\n            const state = this._controlledReadableByteStream._state;\n            if (state !== 'readable') {\n                throw new TypeError(`The stream (in ${state} state) is not in the readable state and cannot be closed`);\n            }\n            ReadableByteStreamControllerClose(this);\n        }\n        enqueue(chunk) {\n            if (!IsReadableByteStreamController(this)) {\n                throw byteStreamControllerBrandCheckException('enqueue');\n            }\n            assertRequiredArgument(chunk, 1, 'enqueue');\n            if (!ArrayBuffer.isView(chunk)) {\n                throw new TypeError('chunk must be an array buffer view');\n            }\n            if (chunk.byteLength === 0) {\n                throw new TypeError('chunk must have non-zero byteLength');\n            }\n            if (chunk.buffer.byteLength === 0) {\n                throw new TypeError(`chunk's buffer must have non-zero byteLength`);\n            }\n            if (this._closeRequested) {\n                throw new TypeError('stream is closed or draining');\n            }\n            const state = this._controlledReadableByteStream._state;\n            if (state !== 'readable') {\n                throw new TypeError(`The stream (in ${state} state) is not in the readable state and cannot be enqueued to`);\n            }\n            ReadableByteStreamControllerEnqueue(this, chunk);\n        }\n        /**\n         * Errors the controlled readable stream, making all future interactions with it fail with the given error `e`.\n         */\n        error(e = undefined) {\n            if (!IsReadableByteStreamController(this)) {\n                throw byteStreamControllerBrandCheckException('error');\n            }\n            ReadableByteStreamControllerError(this, e);\n        }\n        /** @internal */\n        [CancelSteps](reason) {\n            ReadableByteStreamControllerClearPendingPullIntos(this);\n            ResetQueue(this);\n            const result = this._cancelAlgorithm(reason);\n            ReadableByteStreamControllerClearAlgorithms(this);\n            return result;\n        }\n        /** @internal */\n        [PullSteps](readRequest) {\n            const stream = this._controlledReadableByteStream;\n            if (this._queueTotalSize > 0) {\n                ReadableByteStreamControllerFillReadRequestFromQueue(this, readRequest);\n                return;\n            }\n            const autoAllocateChunkSize = this._autoAllocateChunkSize;\n            if (autoAllocateChunkSize !== undefined) {\n                let buffer;\n                try {\n                    buffer = new ArrayBuffer(autoAllocateChunkSize);\n                }\n                catch (bufferE) {\n                    readRequest._errorSteps(bufferE);\n                    return;\n                }\n                const pullIntoDescriptor = {\n                    buffer,\n                    bufferByteLength: autoAllocateChunkSize,\n                    byteOffset: 0,\n                    byteLength: autoAllocateChunkSize,\n                    bytesFilled: 0,\n                    minimumFill: 1,\n                    elementSize: 1,\n                    viewConstructor: Uint8Array,\n                    readerType: 'default'\n                };\n                this._pendingPullIntos.push(pullIntoDescriptor);\n            }\n            ReadableStreamAddReadRequest(stream, readRequest);\n            ReadableByteStreamControllerCallPullIfNeeded(this);\n        }\n        /** @internal */\n        [ReleaseSteps]() {\n            if (this._pendingPullIntos.length > 0) {\n                const firstPullInto = this._pendingPullIntos.peek();\n                firstPullInto.readerType = 'none';\n                this._pendingPullIntos = new SimpleQueue();\n                this._pendingPullIntos.push(firstPullInto);\n            }\n        }\n    }\n    Object.defineProperties(ReadableByteStreamController.prototype, {\n        close: { enumerable: true },\n        enqueue: { enumerable: true },\n        error: { enumerable: true },\n        byobRequest: { enumerable: true },\n        desiredSize: { enumerable: true }\n    });\n    setFunctionName(ReadableByteStreamController.prototype.close, 'close');\n    setFunctionName(ReadableByteStreamController.prototype.enqueue, 'enqueue');\n    setFunctionName(ReadableByteStreamController.prototype.error, 'error');\n    if (typeof Symbol.toStringTag === 'symbol') {\n        Object.defineProperty(ReadableByteStreamController.prototype, Symbol.toStringTag, {\n            value: 'ReadableByteStreamController',\n            configurable: true\n        });\n    }\n    // Abstract operations for the ReadableByteStreamController.\n    function IsReadableByteStreamController(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_controlledReadableByteStream')) {\n            return false;\n        }\n        return x instanceof ReadableByteStreamController;\n    }\n    function IsReadableStreamBYOBRequest(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_associatedReadableByteStreamController')) {\n            return false;\n        }\n        return x instanceof ReadableStreamBYOBRequest;\n    }\n    function ReadableByteStreamControllerCallPullIfNeeded(controller) {\n        const shouldPull = ReadableByteStreamControllerShouldCallPull(controller);\n        if (!shouldPull) {\n            return;\n        }\n        if (controller._pulling) {\n            controller._pullAgain = true;\n            return;\n        }\n        controller._pulling = true;\n        // TODO: Test controller argument\n        const pullPromise = controller._pullAlgorithm();\n        uponPromise(pullPromise, () => {\n            controller._pulling = false;\n            if (controller._pullAgain) {\n                controller._pullAgain = false;\n                ReadableByteStreamControllerCallPullIfNeeded(controller);\n            }\n            return null;\n        }, e => {\n            ReadableByteStreamControllerError(controller, e);\n            return null;\n        });\n    }\n    function ReadableByteStreamControllerClearPendingPullIntos(controller) {\n        ReadableByteStreamControllerInvalidateBYOBRequest(controller);\n        controller._pendingPullIntos = new SimpleQueue();\n    }\n    function ReadableByteStreamControllerCommitPullIntoDescriptor(stream, pullIntoDescriptor) {\n        let done = false;\n        if (stream._state === 'closed') {\n            done = true;\n        }\n        const filledView = ReadableByteStreamControllerConvertPullIntoDescriptor(pullIntoDescriptor);\n        if (pullIntoDescriptor.readerType === 'default') {\n            ReadableStreamFulfillReadRequest(stream, filledView, done);\n        }\n        else {\n            ReadableStreamFulfillReadIntoRequest(stream, filledView, done);\n        }\n    }\n    function ReadableByteStreamControllerConvertPullIntoDescriptor(pullIntoDescriptor) {\n        const bytesFilled = pullIntoDescriptor.bytesFilled;\n        const elementSize = pullIntoDescriptor.elementSize;\n        return new pullIntoDescriptor.viewConstructor(pullIntoDescriptor.buffer, pullIntoDescriptor.byteOffset, bytesFilled / elementSize);\n    }\n    function ReadableByteStreamControllerEnqueueChunkToQueue(controller, buffer, byteOffset, byteLength) {\n        controller._queue.push({ buffer, byteOffset, byteLength });\n        controller._queueTotalSize += byteLength;\n    }\n    function ReadableByteStreamControllerEnqueueClonedChunkToQueue(controller, buffer, byteOffset, byteLength) {\n        let clonedChunk;\n        try {\n            clonedChunk = ArrayBufferSlice(buffer, byteOffset, byteOffset + byteLength);\n        }\n        catch (cloneE) {\n            ReadableByteStreamControllerError(controller, cloneE);\n            throw cloneE;\n        }\n        ReadableByteStreamControllerEnqueueChunkToQueue(controller, clonedChunk, 0, byteLength);\n    }\n    function ReadableByteStreamControllerEnqueueDetachedPullIntoToQueue(controller, firstDescriptor) {\n        if (firstDescriptor.bytesFilled > 0) {\n            ReadableByteStreamControllerEnqueueClonedChunkToQueue(controller, firstDescriptor.buffer, firstDescriptor.byteOffset, firstDescriptor.bytesFilled);\n        }\n        ReadableByteStreamControllerShiftPendingPullInto(controller);\n    }\n    function ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(controller, pullIntoDescriptor) {\n        const maxBytesToCopy = Math.min(controller._queueTotalSize, pullIntoDescriptor.byteLength - pullIntoDescriptor.bytesFilled);\n        const maxBytesFilled = pullIntoDescriptor.bytesFilled + maxBytesToCopy;\n        let totalBytesToCopyRemaining = maxBytesToCopy;\n        let ready = false;\n        const remainderBytes = maxBytesFilled % pullIntoDescriptor.elementSize;\n        const maxAlignedBytes = maxBytesFilled - remainderBytes;\n        // A descriptor for a read() request that is not yet filled up to its minimum length will stay at the head\n        // of the queue, so the underlying source can keep filling it.\n        if (maxAlignedBytes >= pullIntoDescriptor.minimumFill) {\n            totalBytesToCopyRemaining = maxAlignedBytes - pullIntoDescriptor.bytesFilled;\n            ready = true;\n        }\n        const queue = controller._queue;\n        while (totalBytesToCopyRemaining > 0) {\n            const headOfQueue = queue.peek();\n            const bytesToCopy = Math.min(totalBytesToCopyRemaining, headOfQueue.byteLength);\n            const destStart = pullIntoDescriptor.byteOffset + pullIntoDescriptor.bytesFilled;\n            CopyDataBlockBytes(pullIntoDescriptor.buffer, destStart, headOfQueue.buffer, headOfQueue.byteOffset, bytesToCopy);\n            if (headOfQueue.byteLength === bytesToCopy) {\n                queue.shift();\n            }\n            else {\n                headOfQueue.byteOffset += bytesToCopy;\n                headOfQueue.byteLength -= bytesToCopy;\n            }\n            controller._queueTotalSize -= bytesToCopy;\n            ReadableByteStreamControllerFillHeadPullIntoDescriptor(controller, bytesToCopy, pullIntoDescriptor);\n            totalBytesToCopyRemaining -= bytesToCopy;\n        }\n        return ready;\n    }\n    function ReadableByteStreamControllerFillHeadPullIntoDescriptor(controller, size, pullIntoDescriptor) {\n        pullIntoDescriptor.bytesFilled += size;\n    }\n    function ReadableByteStreamControllerHandleQueueDrain(controller) {\n        if (controller._queueTotalSize === 0 && controller._closeRequested) {\n            ReadableByteStreamControllerClearAlgorithms(controller);\n            ReadableStreamClose(controller._controlledReadableByteStream);\n        }\n        else {\n            ReadableByteStreamControllerCallPullIfNeeded(controller);\n        }\n    }\n    function ReadableByteStreamControllerInvalidateBYOBRequest(controller) {\n        if (controller._byobRequest === null) {\n            return;\n        }\n        controller._byobRequest._associatedReadableByteStreamController = undefined;\n        controller._byobRequest._view = null;\n        controller._byobRequest = null;\n    }\n    function ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(controller) {\n        while (controller._pendingPullIntos.length > 0) {\n            if (controller._queueTotalSize === 0) {\n                return;\n            }\n            const pullIntoDescriptor = controller._pendingPullIntos.peek();\n            if (ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(controller, pullIntoDescriptor)) {\n                ReadableByteStreamControllerShiftPendingPullInto(controller);\n                ReadableByteStreamControllerCommitPullIntoDescriptor(controller._controlledReadableByteStream, pullIntoDescriptor);\n            }\n        }\n    }\n    function ReadableByteStreamControllerProcessReadRequestsUsingQueue(controller) {\n        const reader = controller._controlledReadableByteStream._reader;\n        while (reader._readRequests.length > 0) {\n            if (controller._queueTotalSize === 0) {\n                return;\n            }\n            const readRequest = reader._readRequests.shift();\n            ReadableByteStreamControllerFillReadRequestFromQueue(controller, readRequest);\n        }\n    }\n    function ReadableByteStreamControllerPullInto(controller, view, min, readIntoRequest) {\n        const stream = controller._controlledReadableByteStream;\n        const ctor = view.constructor;\n        const elementSize = arrayBufferViewElementSize(ctor);\n        const { byteOffset, byteLength } = view;\n        const minimumFill = min * elementSize;\n        let buffer;\n        try {\n            buffer = TransferArrayBuffer(view.buffer);\n        }\n        catch (e) {\n            readIntoRequest._errorSteps(e);\n            return;\n        }\n        const pullIntoDescriptor = {\n            buffer,\n            bufferByteLength: buffer.byteLength,\n            byteOffset,\n            byteLength,\n            bytesFilled: 0,\n            minimumFill,\n            elementSize,\n            viewConstructor: ctor,\n            readerType: 'byob'\n        };\n        if (controller._pendingPullIntos.length > 0) {\n            controller._pendingPullIntos.push(pullIntoDescriptor);\n            // No ReadableByteStreamControllerCallPullIfNeeded() call since:\n            // - No change happens on desiredSize\n            // - The source has already been notified of that there's at least 1 pending read(view)\n            ReadableStreamAddReadIntoRequest(stream, readIntoRequest);\n            return;\n        }\n        if (stream._state === 'closed') {\n            const emptyView = new ctor(pullIntoDescriptor.buffer, pullIntoDescriptor.byteOffset, 0);\n            readIntoRequest._closeSteps(emptyView);\n            return;\n        }\n        if (controller._queueTotalSize > 0) {\n            if (ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(controller, pullIntoDescriptor)) {\n                const filledView = ReadableByteStreamControllerConvertPullIntoDescriptor(pullIntoDescriptor);\n                ReadableByteStreamControllerHandleQueueDrain(controller);\n                readIntoRequest._chunkSteps(filledView);\n                return;\n            }\n            if (controller._closeRequested) {\n                const e = new TypeError('Insufficient bytes to fill elements in the given buffer');\n                ReadableByteStreamControllerError(controller, e);\n                readIntoRequest._errorSteps(e);\n                return;\n            }\n        }\n        controller._pendingPullIntos.push(pullIntoDescriptor);\n        ReadableStreamAddReadIntoRequest(stream, readIntoRequest);\n        ReadableByteStreamControllerCallPullIfNeeded(controller);\n    }\n    function ReadableByteStreamControllerRespondInClosedState(controller, firstDescriptor) {\n        if (firstDescriptor.readerType === 'none') {\n            ReadableByteStreamControllerShiftPendingPullInto(controller);\n        }\n        const stream = controller._controlledReadableByteStream;\n        if (ReadableStreamHasBYOBReader(stream)) {\n            while (ReadableStreamGetNumReadIntoRequests(stream) > 0) {\n                const pullIntoDescriptor = ReadableByteStreamControllerShiftPendingPullInto(controller);\n                ReadableByteStreamControllerCommitPullIntoDescriptor(stream, pullIntoDescriptor);\n            }\n        }\n    }\n    function ReadableByteStreamControllerRespondInReadableState(controller, bytesWritten, pullIntoDescriptor) {\n        ReadableByteStreamControllerFillHeadPullIntoDescriptor(controller, bytesWritten, pullIntoDescriptor);\n        if (pullIntoDescriptor.readerType === 'none') {\n            ReadableByteStreamControllerEnqueueDetachedPullIntoToQueue(controller, pullIntoDescriptor);\n            ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(controller);\n            return;\n        }\n        if (pullIntoDescriptor.bytesFilled < pullIntoDescriptor.minimumFill) {\n            // A descriptor for a read() request that is not yet filled up to its minimum length will stay at the head\n            // of the queue, so the underlying source can keep filling it.\n            return;\n        }\n        ReadableByteStreamControllerShiftPendingPullInto(controller);\n        const remainderSize = pullIntoDescriptor.bytesFilled % pullIntoDescriptor.elementSize;\n        if (remainderSize > 0) {\n            const end = pullIntoDescriptor.byteOffset + pullIntoDescriptor.bytesFilled;\n            ReadableByteStreamControllerEnqueueClonedChunkToQueue(controller, pullIntoDescriptor.buffer, end - remainderSize, remainderSize);\n        }\n        pullIntoDescriptor.bytesFilled -= remainderSize;\n        ReadableByteStreamControllerCommitPullIntoDescriptor(controller._controlledReadableByteStream, pullIntoDescriptor);\n        ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(controller);\n    }\n    function ReadableByteStreamControllerRespondInternal(controller, bytesWritten) {\n        const firstDescriptor = controller._pendingPullIntos.peek();\n        ReadableByteStreamControllerInvalidateBYOBRequest(controller);\n        const state = controller._controlledReadableByteStream._state;\n        if (state === 'closed') {\n            ReadableByteStreamControllerRespondInClosedState(controller, firstDescriptor);\n        }\n        else {\n            ReadableByteStreamControllerRespondInReadableState(controller, bytesWritten, firstDescriptor);\n        }\n        ReadableByteStreamControllerCallPullIfNeeded(controller);\n    }\n    function ReadableByteStreamControllerShiftPendingPullInto(controller) {\n        const descriptor = controller._pendingPullIntos.shift();\n        return descriptor;\n    }\n    function ReadableByteStreamControllerShouldCallPull(controller) {\n        const stream = controller._controlledReadableByteStream;\n        if (stream._state !== 'readable') {\n            return false;\n        }\n        if (controller._closeRequested) {\n            return false;\n        }\n        if (!controller._started) {\n            return false;\n        }\n        if (ReadableStreamHasDefaultReader(stream) && ReadableStreamGetNumReadRequests(stream) > 0) {\n            return true;\n        }\n        if (ReadableStreamHasBYOBReader(stream) && ReadableStreamGetNumReadIntoRequests(stream) > 0) {\n            return true;\n        }\n        const desiredSize = ReadableByteStreamControllerGetDesiredSize(controller);\n        if (desiredSize > 0) {\n            return true;\n        }\n        return false;\n    }\n    function ReadableByteStreamControllerClearAlgorithms(controller) {\n        controller._pullAlgorithm = undefined;\n        controller._cancelAlgorithm = undefined;\n    }\n    // A client of ReadableByteStreamController may use these functions directly to bypass state check.\n    function ReadableByteStreamControllerClose(controller) {\n        const stream = controller._controlledReadableByteStream;\n        if (controller._closeRequested || stream._state !== 'readable') {\n            return;\n        }\n        if (controller._queueTotalSize > 0) {\n            controller._closeRequested = true;\n            return;\n        }\n        if (controller._pendingPullIntos.length > 0) {\n            const firstPendingPullInto = controller._pendingPullIntos.peek();\n            if (firstPendingPullInto.bytesFilled % firstPendingPullInto.elementSize !== 0) {\n                const e = new TypeError('Insufficient bytes to fill elements in the given buffer');\n                ReadableByteStreamControllerError(controller, e);\n                throw e;\n            }\n        }\n        ReadableByteStreamControllerClearAlgorithms(controller);\n        ReadableStreamClose(stream);\n    }\n    function ReadableByteStreamControllerEnqueue(controller, chunk) {\n        const stream = controller._controlledReadableByteStream;\n        if (controller._closeRequested || stream._state !== 'readable') {\n            return;\n        }\n        const { buffer, byteOffset, byteLength } = chunk;\n        if (IsDetachedBuffer(buffer)) {\n            throw new TypeError('chunk\\'s buffer is detached and so cannot be enqueued');\n        }\n        const transferredBuffer = TransferArrayBuffer(buffer);\n        if (controller._pendingPullIntos.length > 0) {\n            const firstPendingPullInto = controller._pendingPullIntos.peek();\n            if (IsDetachedBuffer(firstPendingPullInto.buffer)) {\n                throw new TypeError('The BYOB request\\'s buffer has been detached and so cannot be filled with an enqueued chunk');\n            }\n            ReadableByteStreamControllerInvalidateBYOBRequest(controller);\n            firstPendingPullInto.buffer = TransferArrayBuffer(firstPendingPullInto.buffer);\n            if (firstPendingPullInto.readerType === 'none') {\n                ReadableByteStreamControllerEnqueueDetachedPullIntoToQueue(controller, firstPendingPullInto);\n            }\n        }\n        if (ReadableStreamHasDefaultReader(stream)) {\n            ReadableByteStreamControllerProcessReadRequestsUsingQueue(controller);\n            if (ReadableStreamGetNumReadRequests(stream) === 0) {\n                ReadableByteStreamControllerEnqueueChunkToQueue(controller, transferredBuffer, byteOffset, byteLength);\n            }\n            else {\n                if (controller._pendingPullIntos.length > 0) {\n                    ReadableByteStreamControllerShiftPendingPullInto(controller);\n                }\n                const transferredView = new Uint8Array(transferredBuffer, byteOffset, byteLength);\n                ReadableStreamFulfillReadRequest(stream, transferredView, false);\n            }\n        }\n        else if (ReadableStreamHasBYOBReader(stream)) {\n            // TODO: Ideally in this branch detaching should happen only if the buffer is not consumed fully.\n            ReadableByteStreamControllerEnqueueChunkToQueue(controller, transferredBuffer, byteOffset, byteLength);\n            ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(controller);\n        }\n        else {\n            ReadableByteStreamControllerEnqueueChunkToQueue(controller, transferredBuffer, byteOffset, byteLength);\n        }\n        ReadableByteStreamControllerCallPullIfNeeded(controller);\n    }\n    function ReadableByteStreamControllerError(controller, e) {\n        const stream = controller._controlledReadableByteStream;\n        if (stream._state !== 'readable') {\n            return;\n        }\n        ReadableByteStreamControllerClearPendingPullIntos(controller);\n        ResetQueue(controller);\n        ReadableByteStreamControllerClearAlgorithms(controller);\n        ReadableStreamError(stream, e);\n    }\n    function ReadableByteStreamControllerFillReadRequestFromQueue(controller, readRequest) {\n        const entry = controller._queue.shift();\n        controller._queueTotalSize -= entry.byteLength;\n        ReadableByteStreamControllerHandleQueueDrain(controller);\n        const view = new Uint8Array(entry.buffer, entry.byteOffset, entry.byteLength);\n        readRequest._chunkSteps(view);\n    }\n    function ReadableByteStreamControllerGetBYOBRequest(controller) {\n        if (controller._byobRequest === null && controller._pendingPullIntos.length > 0) {\n            const firstDescriptor = controller._pendingPullIntos.peek();\n            const view = new Uint8Array(firstDescriptor.buffer, firstDescriptor.byteOffset + firstDescriptor.bytesFilled, firstDescriptor.byteLength - firstDescriptor.bytesFilled);\n            const byobRequest = Object.create(ReadableStreamBYOBRequest.prototype);\n            SetUpReadableStreamBYOBRequest(byobRequest, controller, view);\n            controller._byobRequest = byobRequest;\n        }\n        return controller._byobRequest;\n    }\n    function ReadableByteStreamControllerGetDesiredSize(controller) {\n        const state = controller._controlledReadableByteStream._state;\n        if (state === 'errored') {\n            return null;\n        }\n        if (state === 'closed') {\n            return 0;\n        }\n        return controller._strategyHWM - controller._queueTotalSize;\n    }\n    function ReadableByteStreamControllerRespond(controller, bytesWritten) {\n        const firstDescriptor = controller._pendingPullIntos.peek();\n        const state = controller._controlledReadableByteStream._state;\n        if (state === 'closed') {\n            if (bytesWritten !== 0) {\n                throw new TypeError('bytesWritten must be 0 when calling respond() on a closed stream');\n            }\n        }\n        else {\n            if (bytesWritten === 0) {\n                throw new TypeError('bytesWritten must be greater than 0 when calling respond() on a readable stream');\n            }\n            if (firstDescriptor.bytesFilled + bytesWritten > firstDescriptor.byteLength) {\n                throw new RangeError('bytesWritten out of range');\n            }\n        }\n        firstDescriptor.buffer = TransferArrayBuffer(firstDescriptor.buffer);\n        ReadableByteStreamControllerRespondInternal(controller, bytesWritten);\n    }\n    function ReadableByteStreamControllerRespondWithNewView(controller, view) {\n        const firstDescriptor = controller._pendingPullIntos.peek();\n        const state = controller._controlledReadableByteStream._state;\n        if (state === 'closed') {\n            if (view.byteLength !== 0) {\n                throw new TypeError('The view\\'s length must be 0 when calling respondWithNewView() on a closed stream');\n            }\n        }\n        else {\n            if (view.byteLength === 0) {\n                throw new TypeError('The view\\'s length must be greater than 0 when calling respondWithNewView() on a readable stream');\n            }\n        }\n        if (firstDescriptor.byteOffset + firstDescriptor.bytesFilled !== view.byteOffset) {\n            throw new RangeError('The region specified by view does not match byobRequest');\n        }\n        if (firstDescriptor.bufferByteLength !== view.buffer.byteLength) {\n            throw new RangeError('The buffer of view has different capacity than byobRequest');\n        }\n        if (firstDescriptor.bytesFilled + view.byteLength > firstDescriptor.byteLength) {\n            throw new RangeError('The region specified by view is larger than byobRequest');\n        }\n        const viewByteLength = view.byteLength;\n        firstDescriptor.buffer = TransferArrayBuffer(view.buffer);\n        ReadableByteStreamControllerRespondInternal(controller, viewByteLength);\n    }\n    function SetUpReadableByteStreamController(stream, controller, startAlgorithm, pullAlgorithm, cancelAlgorithm, highWaterMark, autoAllocateChunkSize) {\n        controller._controlledReadableByteStream = stream;\n        controller._pullAgain = false;\n        controller._pulling = false;\n        controller._byobRequest = null;\n        // Need to set the slots so that the assert doesn't fire. In the spec the slots already exist implicitly.\n        controller._queue = controller._queueTotalSize = undefined;\n        ResetQueue(controller);\n        controller._closeRequested = false;\n        controller._started = false;\n        controller._strategyHWM = highWaterMark;\n        controller._pullAlgorithm = pullAlgorithm;\n        controller._cancelAlgorithm = cancelAlgorithm;\n        controller._autoAllocateChunkSize = autoAllocateChunkSize;\n        controller._pendingPullIntos = new SimpleQueue();\n        stream._readableStreamController = controller;\n        const startResult = startAlgorithm();\n        uponPromise(promiseResolvedWith(startResult), () => {\n            controller._started = true;\n            ReadableByteStreamControllerCallPullIfNeeded(controller);\n            return null;\n        }, r => {\n            ReadableByteStreamControllerError(controller, r);\n            return null;\n        });\n    }\n    function SetUpReadableByteStreamControllerFromUnderlyingSource(stream, underlyingByteSource, highWaterMark) {\n        const controller = Object.create(ReadableByteStreamController.prototype);\n        let startAlgorithm;\n        let pullAlgorithm;\n        let cancelAlgorithm;\n        if (underlyingByteSource.start !== undefined) {\n            startAlgorithm = () => underlyingByteSource.start(controller);\n        }\n        else {\n            startAlgorithm = () => undefined;\n        }\n        if (underlyingByteSource.pull !== undefined) {\n            pullAlgorithm = () => underlyingByteSource.pull(controller);\n        }\n        else {\n            pullAlgorithm = () => promiseResolvedWith(undefined);\n        }\n        if (underlyingByteSource.cancel !== undefined) {\n            cancelAlgorithm = reason => underlyingByteSource.cancel(reason);\n        }\n        else {\n            cancelAlgorithm = () => promiseResolvedWith(undefined);\n        }\n        const autoAllocateChunkSize = underlyingByteSource.autoAllocateChunkSize;\n        if (autoAllocateChunkSize === 0) {\n            throw new TypeError('autoAllocateChunkSize must be greater than 0');\n        }\n        SetUpReadableByteStreamController(stream, controller, startAlgorithm, pullAlgorithm, cancelAlgorithm, highWaterMark, autoAllocateChunkSize);\n    }\n    function SetUpReadableStreamBYOBRequest(request, controller, view) {\n        request._associatedReadableByteStreamController = controller;\n        request._view = view;\n    }\n    // Helper functions for the ReadableStreamBYOBRequest.\n    function byobRequestBrandCheckException(name) {\n        return new TypeError(`ReadableStreamBYOBRequest.prototype.${name} can only be used on a ReadableStreamBYOBRequest`);\n    }\n    // Helper functions for the ReadableByteStreamController.\n    function byteStreamControllerBrandCheckException(name) {\n        return new TypeError(`ReadableByteStreamController.prototype.${name} can only be used on a ReadableByteStreamController`);\n    }\n\n    function convertReaderOptions(options, context) {\n        assertDictionary(options, context);\n        const mode = options === null || options === void 0 ? void 0 : options.mode;\n        return {\n            mode: mode === undefined ? undefined : convertReadableStreamReaderMode(mode, `${context} has member 'mode' that`)\n        };\n    }\n    function convertReadableStreamReaderMode(mode, context) {\n        mode = `${mode}`;\n        if (mode !== 'byob') {\n            throw new TypeError(`${context} '${mode}' is not a valid enumeration value for ReadableStreamReaderMode`);\n        }\n        return mode;\n    }\n    function convertByobReadOptions(options, context) {\n        var _a;\n        assertDictionary(options, context);\n        const min = (_a = options === null || options === void 0 ? void 0 : options.min) !== null && _a !== void 0 ? _a : 1;\n        return {\n            min: convertUnsignedLongLongWithEnforceRange(min, `${context} has member 'min' that`)\n        };\n    }\n\n    // Abstract operations for the ReadableStream.\n    function AcquireReadableStreamBYOBReader(stream) {\n        return new ReadableStreamBYOBReader(stream);\n    }\n    // ReadableStream API exposed for controllers.\n    function ReadableStreamAddReadIntoRequest(stream, readIntoRequest) {\n        stream._reader._readIntoRequests.push(readIntoRequest);\n    }\n    function ReadableStreamFulfillReadIntoRequest(stream, chunk, done) {\n        const reader = stream._reader;\n        const readIntoRequest = reader._readIntoRequests.shift();\n        if (done) {\n            readIntoRequest._closeSteps(chunk);\n        }\n        else {\n            readIntoRequest._chunkSteps(chunk);\n        }\n    }\n    function ReadableStreamGetNumReadIntoRequests(stream) {\n        return stream._reader._readIntoRequests.length;\n    }\n    function ReadableStreamHasBYOBReader(stream) {\n        const reader = stream._reader;\n        if (reader === undefined) {\n            return false;\n        }\n        if (!IsReadableStreamBYOBReader(reader)) {\n            return false;\n        }\n        return true;\n    }\n    /**\n     * A BYOB reader vended by a {@link ReadableStream}.\n     *\n     * @public\n     */\n    class ReadableStreamBYOBReader {\n        constructor(stream) {\n            assertRequiredArgument(stream, 1, 'ReadableStreamBYOBReader');\n            assertReadableStream(stream, 'First parameter');\n            if (IsReadableStreamLocked(stream)) {\n                throw new TypeError('This stream has already been locked for exclusive reading by another reader');\n            }\n            if (!IsReadableByteStreamController(stream._readableStreamController)) {\n                throw new TypeError('Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte ' +\n                    'source');\n            }\n            ReadableStreamReaderGenericInitialize(this, stream);\n            this._readIntoRequests = new SimpleQueue();\n        }\n        /**\n         * Returns a promise that will be fulfilled when the stream becomes closed, or rejected if the stream ever errors or\n         * the reader's lock is released before the stream finishes closing.\n         */\n        get closed() {\n            if (!IsReadableStreamBYOBReader(this)) {\n                return promiseRejectedWith(byobReaderBrandCheckException('closed'));\n            }\n            return this._closedPromise;\n        }\n        /**\n         * If the reader is active, behaves the same as {@link ReadableStream.cancel | stream.cancel(reason)}.\n         */\n        cancel(reason = undefined) {\n            if (!IsReadableStreamBYOBReader(this)) {\n                return promiseRejectedWith(byobReaderBrandCheckException('cancel'));\n            }\n            if (this._ownerReadableStream === undefined) {\n                return promiseRejectedWith(readerLockException('cancel'));\n            }\n            return ReadableStreamReaderGenericCancel(this, reason);\n        }\n        read(view, rawOptions = {}) {\n            if (!IsReadableStreamBYOBReader(this)) {\n                return promiseRejectedWith(byobReaderBrandCheckException('read'));\n            }\n            if (!ArrayBuffer.isView(view)) {\n                return promiseRejectedWith(new TypeError('view must be an array buffer view'));\n            }\n            if (view.byteLength === 0) {\n                return promiseRejectedWith(new TypeError('view must have non-zero byteLength'));\n            }\n            if (view.buffer.byteLength === 0) {\n                return promiseRejectedWith(new TypeError(`view's buffer must have non-zero byteLength`));\n            }\n            if (IsDetachedBuffer(view.buffer)) {\n                return promiseRejectedWith(new TypeError('view\\'s buffer has been detached'));\n            }\n            let options;\n            try {\n                options = convertByobReadOptions(rawOptions, 'options');\n            }\n            catch (e) {\n                return promiseRejectedWith(e);\n            }\n            const min = options.min;\n            if (min === 0) {\n                return promiseRejectedWith(new TypeError('options.min must be greater than 0'));\n            }\n            if (!isDataView(view)) {\n                if (min > view.length) {\n                    return promiseRejectedWith(new RangeError('options.min must be less than or equal to view\\'s length'));\n                }\n            }\n            else if (min > view.byteLength) {\n                return promiseRejectedWith(new RangeError('options.min must be less than or equal to view\\'s byteLength'));\n            }\n            if (this._ownerReadableStream === undefined) {\n                return promiseRejectedWith(readerLockException('read from'));\n            }\n            let resolvePromise;\n            let rejectPromise;\n            const promise = newPromise((resolve, reject) => {\n                resolvePromise = resolve;\n                rejectPromise = reject;\n            });\n            const readIntoRequest = {\n                _chunkSteps: chunk => resolvePromise({ value: chunk, done: false }),\n                _closeSteps: chunk => resolvePromise({ value: chunk, done: true }),\n                _errorSteps: e => rejectPromise(e)\n            };\n            ReadableStreamBYOBReaderRead(this, view, min, readIntoRequest);\n            return promise;\n        }\n        /**\n         * Releases the reader's lock on the corresponding stream. After the lock is released, the reader is no longer active.\n         * If the associated stream is errored when the lock is released, the reader will appear errored in the same way\n         * from now on; otherwise, the reader will appear closed.\n         *\n         * A reader's lock cannot be released while it still has a pending read request, i.e., if a promise returned by\n         * the reader's {@link ReadableStreamBYOBReader.read | read()} method has not yet been settled. Attempting to\n         * do so will throw a `TypeError` and leave the reader locked to the stream.\n         */\n        releaseLock() {\n            if (!IsReadableStreamBYOBReader(this)) {\n                throw byobReaderBrandCheckException('releaseLock');\n            }\n            if (this._ownerReadableStream === undefined) {\n                return;\n            }\n            ReadableStreamBYOBReaderRelease(this);\n        }\n    }\n    Object.defineProperties(ReadableStreamBYOBReader.prototype, {\n        cancel: { enumerable: true },\n        read: { enumerable: true },\n        releaseLock: { enumerable: true },\n        closed: { enumerable: true }\n    });\n    setFunctionName(ReadableStreamBYOBReader.prototype.cancel, 'cancel');\n    setFunctionName(ReadableStreamBYOBReader.prototype.read, 'read');\n    setFunctionName(ReadableStreamBYOBReader.prototype.releaseLock, 'releaseLock');\n    if (typeof Symbol.toStringTag === 'symbol') {\n        Object.defineProperty(ReadableStreamBYOBReader.prototype, Symbol.toStringTag, {\n            value: 'ReadableStreamBYOBReader',\n            configurable: true\n        });\n    }\n    // Abstract operations for the readers.\n    function IsReadableStreamBYOBReader(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_readIntoRequests')) {\n            return false;\n        }\n        return x instanceof ReadableStreamBYOBReader;\n    }\n    function ReadableStreamBYOBReaderRead(reader, view, min, readIntoRequest) {\n        const stream = reader._ownerReadableStream;\n        stream._disturbed = true;\n        if (stream._state === 'errored') {\n            readIntoRequest._errorSteps(stream._storedError);\n        }\n        else {\n            ReadableByteStreamControllerPullInto(stream._readableStreamController, view, min, readIntoRequest);\n        }\n    }\n    function ReadableStreamBYOBReaderRelease(reader) {\n        ReadableStreamReaderGenericRelease(reader);\n        const e = new TypeError('Reader was released');\n        ReadableStreamBYOBReaderErrorReadIntoRequests(reader, e);\n    }\n    function ReadableStreamBYOBReaderErrorReadIntoRequests(reader, e) {\n        const readIntoRequests = reader._readIntoRequests;\n        reader._readIntoRequests = new SimpleQueue();\n        readIntoRequests.forEach(readIntoRequest => {\n            readIntoRequest._errorSteps(e);\n        });\n    }\n    // Helper functions for the ReadableStreamBYOBReader.\n    function byobReaderBrandCheckException(name) {\n        return new TypeError(`ReadableStreamBYOBReader.prototype.${name} can only be used on a ReadableStreamBYOBReader`);\n    }\n\n    function ExtractHighWaterMark(strategy, defaultHWM) {\n        const { highWaterMark } = strategy;\n        if (highWaterMark === undefined) {\n            return defaultHWM;\n        }\n        if (NumberIsNaN(highWaterMark) || highWaterMark < 0) {\n            throw new RangeError('Invalid highWaterMark');\n        }\n        return highWaterMark;\n    }\n    function ExtractSizeAlgorithm(strategy) {\n        const { size } = strategy;\n        if (!size) {\n            return () => 1;\n        }\n        return size;\n    }\n\n    function convertQueuingStrategy(init, context) {\n        assertDictionary(init, context);\n        const highWaterMark = init === null || init === void 0 ? void 0 : init.highWaterMark;\n        const size = init === null || init === void 0 ? void 0 : init.size;\n        return {\n            highWaterMark: highWaterMark === undefined ? undefined : convertUnrestrictedDouble(highWaterMark),\n            size: size === undefined ? undefined : convertQueuingStrategySize(size, `${context} has member 'size' that`)\n        };\n    }\n    function convertQueuingStrategySize(fn, context) {\n        assertFunction(fn, context);\n        return chunk => convertUnrestrictedDouble(fn(chunk));\n    }\n\n    function convertUnderlyingSink(original, context) {\n        assertDictionary(original, context);\n        const abort = original === null || original === void 0 ? void 0 : original.abort;\n        const close = original === null || original === void 0 ? void 0 : original.close;\n        const start = original === null || original === void 0 ? void 0 : original.start;\n        const type = original === null || original === void 0 ? void 0 : original.type;\n        const write = original === null || original === void 0 ? void 0 : original.write;\n        return {\n            abort: abort === undefined ?\n                undefined :\n                convertUnderlyingSinkAbortCallback(abort, original, `${context} has member 'abort' that`),\n            close: close === undefined ?\n                undefined :\n                convertUnderlyingSinkCloseCallback(close, original, `${context} has member 'close' that`),\n            start: start === undefined ?\n                undefined :\n                convertUnderlyingSinkStartCallback(start, original, `${context} has member 'start' that`),\n            write: write === undefined ?\n                undefined :\n                convertUnderlyingSinkWriteCallback(write, original, `${context} has member 'write' that`),\n            type\n        };\n    }\n    function convertUnderlyingSinkAbortCallback(fn, original, context) {\n        assertFunction(fn, context);\n        return (reason) => promiseCall(fn, original, [reason]);\n    }\n    function convertUnderlyingSinkCloseCallback(fn, original, context) {\n        assertFunction(fn, context);\n        return () => promiseCall(fn, original, []);\n    }\n    function convertUnderlyingSinkStartCallback(fn, original, context) {\n        assertFunction(fn, context);\n        return (controller) => reflectCall(fn, original, [controller]);\n    }\n    function convertUnderlyingSinkWriteCallback(fn, original, context) {\n        assertFunction(fn, context);\n        return (chunk, controller) => promiseCall(fn, original, [chunk, controller]);\n    }\n\n    function assertWritableStream(x, context) {\n        if (!IsWritableStream(x)) {\n            throw new TypeError(`${context} is not a WritableStream.`);\n        }\n    }\n\n    function isAbortSignal(value) {\n        if (typeof value !== 'object' || value === null) {\n            return false;\n        }\n        try {\n            return typeof value.aborted === 'boolean';\n        }\n        catch (_a) {\n            // AbortSignal.prototype.aborted throws if its brand check fails\n            return false;\n        }\n    }\n    const supportsAbortController = typeof AbortController === 'function';\n    /**\n     * Construct a new AbortController, if supported by the platform.\n     *\n     * @internal\n     */\n    function createAbortController() {\n        if (supportsAbortController) {\n            return new AbortController();\n        }\n        return undefined;\n    }\n\n    /**\n     * A writable stream represents a destination for data, into which you can write.\n     *\n     * @public\n     */\n    class WritableStream {\n        constructor(rawUnderlyingSink = {}, rawStrategy = {}) {\n            if (rawUnderlyingSink === undefined) {\n                rawUnderlyingSink = null;\n            }\n            else {\n                assertObject(rawUnderlyingSink, 'First parameter');\n            }\n            const strategy = convertQueuingStrategy(rawStrategy, 'Second parameter');\n            const underlyingSink = convertUnderlyingSink(rawUnderlyingSink, 'First parameter');\n            InitializeWritableStream(this);\n            const type = underlyingSink.type;\n            if (type !== undefined) {\n                throw new RangeError('Invalid type is specified');\n            }\n            const sizeAlgorithm = ExtractSizeAlgorithm(strategy);\n            const highWaterMark = ExtractHighWaterMark(strategy, 1);\n            SetUpWritableStreamDefaultControllerFromUnderlyingSink(this, underlyingSink, highWaterMark, sizeAlgorithm);\n        }\n        /**\n         * Returns whether or not the writable stream is locked to a writer.\n         */\n        get locked() {\n            if (!IsWritableStream(this)) {\n                throw streamBrandCheckException$2('locked');\n            }\n            return IsWritableStreamLocked(this);\n        }\n        /**\n         * Aborts the stream, signaling that the producer can no longer successfully write to the stream and it is to be\n         * immediately moved to an errored state, with any queued-up writes discarded. This will also execute any abort\n         * mechanism of the underlying sink.\n         *\n         * The returned promise will fulfill if the stream shuts down successfully, or reject if the underlying sink signaled\n         * that there was an error doing so. Additionally, it will reject with a `TypeError` (without attempting to cancel\n         * the stream) if the stream is currently locked.\n         */\n        abort(reason = undefined) {\n            if (!IsWritableStream(this)) {\n                return promiseRejectedWith(streamBrandCheckException$2('abort'));\n            }\n            if (IsWritableStreamLocked(this)) {\n                return promiseRejectedWith(new TypeError('Cannot abort a stream that already has a writer'));\n            }\n            return WritableStreamAbort(this, reason);\n        }\n        /**\n         * Closes the stream. The underlying sink will finish processing any previously-written chunks, before invoking its\n         * close behavior. During this time any further attempts to write will fail (without erroring the stream).\n         *\n         * The method returns a promise that will fulfill if all remaining chunks are successfully written and the stream\n         * successfully closes, or rejects if an error is encountered during this process. Additionally, it will reject with\n         * a `TypeError` (without attempting to cancel the stream) if the stream is currently locked.\n         */\n        close() {\n            if (!IsWritableStream(this)) {\n                return promiseRejectedWith(streamBrandCheckException$2('close'));\n            }\n            if (IsWritableStreamLocked(this)) {\n                return promiseRejectedWith(new TypeError('Cannot close a stream that already has a writer'));\n            }\n            if (WritableStreamCloseQueuedOrInFlight(this)) {\n                return promiseRejectedWith(new TypeError('Cannot close an already-closing stream'));\n            }\n            return WritableStreamClose(this);\n        }\n        /**\n         * Creates a {@link WritableStreamDefaultWriter | writer} and locks the stream to the new writer. While the stream\n         * is locked, no other writer can be acquired until this one is released.\n         *\n         * This functionality is especially useful for creating abstractions that desire the ability to write to a stream\n         * without interruption or interleaving. By getting a writer for the stream, you can ensure nobody else can write at\n         * the same time, which would cause the resulting written data to be unpredictable and probably useless.\n         */\n        getWriter() {\n            if (!IsWritableStream(this)) {\n                throw streamBrandCheckException$2('getWriter');\n            }\n            return AcquireWritableStreamDefaultWriter(this);\n        }\n    }\n    Object.defineProperties(WritableStream.prototype, {\n        abort: { enumerable: true },\n        close: { enumerable: true },\n        getWriter: { enumerable: true },\n        locked: { enumerable: true }\n    });\n    setFunctionName(WritableStream.prototype.abort, 'abort');\n    setFunctionName(WritableStream.prototype.close, 'close');\n    setFunctionName(WritableStream.prototype.getWriter, 'getWriter');\n    if (typeof Symbol.toStringTag === 'symbol') {\n        Object.defineProperty(WritableStream.prototype, Symbol.toStringTag, {\n            value: 'WritableStream',\n            configurable: true\n        });\n    }\n    // Abstract operations for the WritableStream.\n    function AcquireWritableStreamDefaultWriter(stream) {\n        return new WritableStreamDefaultWriter(stream);\n    }\n    // Throws if and only if startAlgorithm throws.\n    function CreateWritableStream(startAlgorithm, writeAlgorithm, closeAlgorithm, abortAlgorithm, highWaterMark = 1, sizeAlgorithm = () => 1) {\n        const stream = Object.create(WritableStream.prototype);\n        InitializeWritableStream(stream);\n        const controller = Object.create(WritableStreamDefaultController.prototype);\n        SetUpWritableStreamDefaultController(stream, controller, startAlgorithm, writeAlgorithm, closeAlgorithm, abortAlgorithm, highWaterMark, sizeAlgorithm);\n        return stream;\n    }\n    function InitializeWritableStream(stream) {\n        stream._state = 'writable';\n        // The error that will be reported by new method calls once the state becomes errored. Only set when [[state]] is\n        // 'erroring' or 'errored'. May be set to an undefined value.\n        stream._storedError = undefined;\n        stream._writer = undefined;\n        // Initialize to undefined first because the constructor of the controller checks this\n        // variable to validate the caller.\n        stream._writableStreamController = undefined;\n        // This queue is placed here instead of the writer class in order to allow for passing a writer to the next data\n        // producer without waiting for the queued writes to finish.\n        stream._writeRequests = new SimpleQueue();\n        // Write requests are removed from _writeRequests when write() is called on the underlying sink. This prevents\n        // them from being erroneously rejected on error. If a write() call is in-flight, the request is stored here.\n        stream._inFlightWriteRequest = undefined;\n        // The promise that was returned from writer.close(). Stored here because it may be fulfilled after the writer\n        // has been detached.\n        stream._closeRequest = undefined;\n        // Close request is removed from _closeRequest when close() is called on the underlying sink. This prevents it\n        // from being erroneously rejected on error. If a close() call is in-flight, the request is stored here.\n        stream._inFlightCloseRequest = undefined;\n        // The promise that was returned from writer.abort(). This may also be fulfilled after the writer has detached.\n        stream._pendingAbortRequest = undefined;\n        // The backpressure signal set by the controller.\n        stream._backpressure = false;\n    }\n    function IsWritableStream(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_writableStreamController')) {\n            return false;\n        }\n        return x instanceof WritableStream;\n    }\n    function IsWritableStreamLocked(stream) {\n        if (stream._writer === undefined) {\n            return false;\n        }\n        return true;\n    }\n    function WritableStreamAbort(stream, reason) {\n        var _a;\n        if (stream._state === 'closed' || stream._state === 'errored') {\n            return promiseResolvedWith(undefined);\n        }\n        stream._writableStreamController._abortReason = reason;\n        (_a = stream._writableStreamController._abortController) === null || _a === void 0 ? void 0 : _a.abort(reason);\n        // TypeScript narrows the type of `stream._state` down to 'writable' | 'erroring',\n        // but it doesn't know that signaling abort runs author code that might have changed the state.\n        // Widen the type again by casting to WritableStreamState.\n        const state = stream._state;\n        if (state === 'closed' || state === 'errored') {\n            return promiseResolvedWith(undefined);\n        }\n        if (stream._pendingAbortRequest !== undefined) {\n            return stream._pendingAbortRequest._promise;\n        }\n        let wasAlreadyErroring = false;\n        if (state === 'erroring') {\n            wasAlreadyErroring = true;\n            // reason will not be used, so don't keep a reference to it.\n            reason = undefined;\n        }\n        const promise = newPromise((resolve, reject) => {\n            stream._pendingAbortRequest = {\n                _promise: undefined,\n                _resolve: resolve,\n                _reject: reject,\n                _reason: reason,\n                _wasAlreadyErroring: wasAlreadyErroring\n            };\n        });\n        stream._pendingAbortRequest._promise = promise;\n        if (!wasAlreadyErroring) {\n            WritableStreamStartErroring(stream, reason);\n        }\n        return promise;\n    }\n    function WritableStreamClose(stream) {\n        const state = stream._state;\n        if (state === 'closed' || state === 'errored') {\n            return promiseRejectedWith(new TypeError(`The stream (in ${state} state) is not in the writable state and cannot be closed`));\n        }\n        const promise = newPromise((resolve, reject) => {\n            const closeRequest = {\n                _resolve: resolve,\n                _reject: reject\n            };\n            stream._closeRequest = closeRequest;\n        });\n        const writer = stream._writer;\n        if (writer !== undefined && stream._backpressure && state === 'writable') {\n            defaultWriterReadyPromiseResolve(writer);\n        }\n        WritableStreamDefaultControllerClose(stream._writableStreamController);\n        return promise;\n    }\n    // WritableStream API exposed for controllers.\n    function WritableStreamAddWriteRequest(stream) {\n        const promise = newPromise((resolve, reject) => {\n            const writeRequest = {\n                _resolve: resolve,\n                _reject: reject\n            };\n            stream._writeRequests.push(writeRequest);\n        });\n        return promise;\n    }\n    function WritableStreamDealWithRejection(stream, error) {\n        const state = stream._state;\n        if (state === 'writable') {\n            WritableStreamStartErroring(stream, error);\n            return;\n        }\n        WritableStreamFinishErroring(stream);\n    }\n    function WritableStreamStartErroring(stream, reason) {\n        const controller = stream._writableStreamController;\n        stream._state = 'erroring';\n        stream._storedError = reason;\n        const writer = stream._writer;\n        if (writer !== undefined) {\n            WritableStreamDefaultWriterEnsureReadyPromiseRejected(writer, reason);\n        }\n        if (!WritableStreamHasOperationMarkedInFlight(stream) && controller._started) {\n            WritableStreamFinishErroring(stream);\n        }\n    }\n    function WritableStreamFinishErroring(stream) {\n        stream._state = 'errored';\n        stream._writableStreamController[ErrorSteps]();\n        const storedError = stream._storedError;\n        stream._writeRequests.forEach(writeRequest => {\n            writeRequest._reject(storedError);\n        });\n        stream._writeRequests = new SimpleQueue();\n        if (stream._pendingAbortRequest === undefined) {\n            WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream);\n            return;\n        }\n        const abortRequest = stream._pendingAbortRequest;\n        stream._pendingAbortRequest = undefined;\n        if (abortRequest._wasAlreadyErroring) {\n            abortRequest._reject(storedError);\n            WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream);\n            return;\n        }\n        const promise = stream._writableStreamController[AbortSteps](abortRequest._reason);\n        uponPromise(promise, () => {\n            abortRequest._resolve();\n            WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream);\n            return null;\n        }, (reason) => {\n            abortRequest._reject(reason);\n            WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream);\n            return null;\n        });\n    }\n    function WritableStreamFinishInFlightWrite(stream) {\n        stream._inFlightWriteRequest._resolve(undefined);\n        stream._inFlightWriteRequest = undefined;\n    }\n    function WritableStreamFinishInFlightWriteWithError(stream, error) {\n        stream._inFlightWriteRequest._reject(error);\n        stream._inFlightWriteRequest = undefined;\n        WritableStreamDealWithRejection(stream, error);\n    }\n    function WritableStreamFinishInFlightClose(stream) {\n        stream._inFlightCloseRequest._resolve(undefined);\n        stream._inFlightCloseRequest = undefined;\n        const state = stream._state;\n        if (state === 'erroring') {\n            // The error was too late to do anything, so it is ignored.\n            stream._storedError = undefined;\n            if (stream._pendingAbortRequest !== undefined) {\n                stream._pendingAbortRequest._resolve();\n                stream._pendingAbortRequest = undefined;\n            }\n        }\n        stream._state = 'closed';\n        const writer = stream._writer;\n        if (writer !== undefined) {\n            defaultWriterClosedPromiseResolve(writer);\n        }\n    }\n    function WritableStreamFinishInFlightCloseWithError(stream, error) {\n        stream._inFlightCloseRequest._reject(error);\n        stream._inFlightCloseRequest = undefined;\n        // Never execute sink abort() after sink close().\n        if (stream._pendingAbortRequest !== undefined) {\n            stream._pendingAbortRequest._reject(error);\n            stream._pendingAbortRequest = undefined;\n        }\n        WritableStreamDealWithRejection(stream, error);\n    }\n    // TODO(ricea): Fix alphabetical order.\n    function WritableStreamCloseQueuedOrInFlight(stream) {\n        if (stream._closeRequest === undefined && stream._inFlightCloseRequest === undefined) {\n            return false;\n        }\n        return true;\n    }\n    function WritableStreamHasOperationMarkedInFlight(stream) {\n        if (stream._inFlightWriteRequest === undefined && stream._inFlightCloseRequest === undefined) {\n            return false;\n        }\n        return true;\n    }\n    function WritableStreamMarkCloseRequestInFlight(stream) {\n        stream._inFlightCloseRequest = stream._closeRequest;\n        stream._closeRequest = undefined;\n    }\n    function WritableStreamMarkFirstWriteRequestInFlight(stream) {\n        stream._inFlightWriteRequest = stream._writeRequests.shift();\n    }\n    function WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream) {\n        if (stream._closeRequest !== undefined) {\n            stream._closeRequest._reject(stream._storedError);\n            stream._closeRequest = undefined;\n        }\n        const writer = stream._writer;\n        if (writer !== undefined) {\n            defaultWriterClosedPromiseReject(writer, stream._storedError);\n        }\n    }\n    function WritableStreamUpdateBackpressure(stream, backpressure) {\n        const writer = stream._writer;\n        if (writer !== undefined && backpressure !== stream._backpressure) {\n            if (backpressure) {\n                defaultWriterReadyPromiseReset(writer);\n            }\n            else {\n                defaultWriterReadyPromiseResolve(writer);\n            }\n        }\n        stream._backpressure = backpressure;\n    }\n    /**\n     * A default writer vended by a {@link WritableStream}.\n     *\n     * @public\n     */\n    class WritableStreamDefaultWriter {\n        constructor(stream) {\n            assertRequiredArgument(stream, 1, 'WritableStreamDefaultWriter');\n            assertWritableStream(stream, 'First parameter');\n            if (IsWritableStreamLocked(stream)) {\n                throw new TypeError('This stream has already been locked for exclusive writing by another writer');\n            }\n            this._ownerWritableStream = stream;\n            stream._writer = this;\n            const state = stream._state;\n            if (state === 'writable') {\n                if (!WritableStreamCloseQueuedOrInFlight(stream) && stream._backpressure) {\n                    defaultWriterReadyPromiseInitialize(this);\n                }\n                else {\n                    defaultWriterReadyPromiseInitializeAsResolved(this);\n                }\n                defaultWriterClosedPromiseInitialize(this);\n            }\n            else if (state === 'erroring') {\n                defaultWriterReadyPromiseInitializeAsRejected(this, stream._storedError);\n                defaultWriterClosedPromiseInitialize(this);\n            }\n            else if (state === 'closed') {\n                defaultWriterReadyPromiseInitializeAsResolved(this);\n                defaultWriterClosedPromiseInitializeAsResolved(this);\n            }\n            else {\n                const storedError = stream._storedError;\n                defaultWriterReadyPromiseInitializeAsRejected(this, storedError);\n                defaultWriterClosedPromiseInitializeAsRejected(this, storedError);\n            }\n        }\n        /**\n         * Returns a promise that will be fulfilled when the stream becomes closed, or rejected if the stream ever errors or\n         * the writers lock is released before the stream finishes closing.\n         */\n        get closed() {\n            if (!IsWritableStreamDefaultWriter(this)) {\n                return promiseRejectedWith(defaultWriterBrandCheckException('closed'));\n            }\n            return this._closedPromise;\n        }\n        /**\n         * Returns the desired size to fill the streams internal queue. It can be negative, if the queue is over-full.\n         * A producer can use this information to determine the right amount of data to write.\n         *\n         * It will be `null` if the stream cannot be successfully written to (due to either being errored, or having an abort\n         * queued up). It will return zero if the stream is closed. And the getter will throw an exception if invoked when\n         * the writers lock is released.\n         */\n        get desiredSize() {\n            if (!IsWritableStreamDefaultWriter(this)) {\n                throw defaultWriterBrandCheckException('desiredSize');\n            }\n            if (this._ownerWritableStream === undefined) {\n                throw defaultWriterLockException('desiredSize');\n            }\n            return WritableStreamDefaultWriterGetDesiredSize(this);\n        }\n        /**\n         * Returns a promise that will be fulfilled when the desired size to fill the streams internal queue transitions\n         * from non-positive to positive, signaling that it is no longer applying backpressure. Once the desired size dips\n         * back to zero or below, the getter will return a new promise that stays pending until the next transition.\n         *\n         * If the stream becomes errored or aborted, or the writers lock is released, the returned promise will become\n         * rejected.\n         */\n        get ready() {\n            if (!IsWritableStreamDefaultWriter(this)) {\n                return promiseRejectedWith(defaultWriterBrandCheckException('ready'));\n            }\n            return this._readyPromise;\n        }\n        /**\n         * If the reader is active, behaves the same as {@link WritableStream.abort | stream.abort(reason)}.\n         */\n        abort(reason = undefined) {\n            if (!IsWritableStreamDefaultWriter(this)) {\n                return promiseRejectedWith(defaultWriterBrandCheckException('abort'));\n            }\n            if (this._ownerWritableStream === undefined) {\n                return promiseRejectedWith(defaultWriterLockException('abort'));\n            }\n            return WritableStreamDefaultWriterAbort(this, reason);\n        }\n        /**\n         * If the reader is active, behaves the same as {@link WritableStream.close | stream.close()}.\n         */\n        close() {\n            if (!IsWritableStreamDefaultWriter(this)) {\n                return promiseRejectedWith(defaultWriterBrandCheckException('close'));\n            }\n            const stream = this._ownerWritableStream;\n            if (stream === undefined) {\n                return promiseRejectedWith(defaultWriterLockException('close'));\n            }\n            if (WritableStreamCloseQueuedOrInFlight(stream)) {\n                return promiseRejectedWith(new TypeError('Cannot close an already-closing stream'));\n            }\n            return WritableStreamDefaultWriterClose(this);\n        }\n        /**\n         * Releases the writers lock on the corresponding stream. After the lock is released, the writer is no longer active.\n         * If the associated stream is errored when the lock is released, the writer will appear errored in the same way from\n         * now on; otherwise, the writer will appear closed.\n         *\n         * Note that the lock can still be released even if some ongoing writes have not yet finished (i.e. even if the\n         * promises returned from previous calls to {@link WritableStreamDefaultWriter.write | write()} have not yet settled).\n         * Its not necessary to hold the lock on the writer for the duration of the write; the lock instead simply prevents\n         * other producers from writing in an interleaved manner.\n         */\n        releaseLock() {\n            if (!IsWritableStreamDefaultWriter(this)) {\n                throw defaultWriterBrandCheckException('releaseLock');\n            }\n            const stream = this._ownerWritableStream;\n            if (stream === undefined) {\n                return;\n            }\n            WritableStreamDefaultWriterRelease(this);\n        }\n        write(chunk = undefined) {\n            if (!IsWritableStreamDefaultWriter(this)) {\n                return promiseRejectedWith(defaultWriterBrandCheckException('write'));\n            }\n            if (this._ownerWritableStream === undefined) {\n                return promiseRejectedWith(defaultWriterLockException('write to'));\n            }\n            return WritableStreamDefaultWriterWrite(this, chunk);\n        }\n    }\n    Object.defineProperties(WritableStreamDefaultWriter.prototype, {\n        abort: { enumerable: true },\n        close: { enumerable: true },\n        releaseLock: { enumerable: true },\n        write: { enumerable: true },\n        closed: { enumerable: true },\n        desiredSize: { enumerable: true },\n        ready: { enumerable: true }\n    });\n    setFunctionName(WritableStreamDefaultWriter.prototype.abort, 'abort');\n    setFunctionName(WritableStreamDefaultWriter.prototype.close, 'close');\n    setFunctionName(WritableStreamDefaultWriter.prototype.releaseLock, 'releaseLock');\n    setFunctionName(WritableStreamDefaultWriter.prototype.write, 'write');\n    if (typeof Symbol.toStringTag === 'symbol') {\n        Object.defineProperty(WritableStreamDefaultWriter.prototype, Symbol.toStringTag, {\n            value: 'WritableStreamDefaultWriter',\n            configurable: true\n        });\n    }\n    // Abstract operations for the WritableStreamDefaultWriter.\n    function IsWritableStreamDefaultWriter(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_ownerWritableStream')) {\n            return false;\n        }\n        return x instanceof WritableStreamDefaultWriter;\n    }\n    // A client of WritableStreamDefaultWriter may use these functions directly to bypass state check.\n    function WritableStreamDefaultWriterAbort(writer, reason) {\n        const stream = writer._ownerWritableStream;\n        return WritableStreamAbort(stream, reason);\n    }\n    function WritableStreamDefaultWriterClose(writer) {\n        const stream = writer._ownerWritableStream;\n        return WritableStreamClose(stream);\n    }\n    function WritableStreamDefaultWriterCloseWithErrorPropagation(writer) {\n        const stream = writer._ownerWritableStream;\n        const state = stream._state;\n        if (WritableStreamCloseQueuedOrInFlight(stream) || state === 'closed') {\n            return promiseResolvedWith(undefined);\n        }\n        if (state === 'errored') {\n            return promiseRejectedWith(stream._storedError);\n        }\n        return WritableStreamDefaultWriterClose(writer);\n    }\n    function WritableStreamDefaultWriterEnsureClosedPromiseRejected(writer, error) {\n        if (writer._closedPromiseState === 'pending') {\n            defaultWriterClosedPromiseReject(writer, error);\n        }\n        else {\n            defaultWriterClosedPromiseResetToRejected(writer, error);\n        }\n    }\n    function WritableStreamDefaultWriterEnsureReadyPromiseRejected(writer, error) {\n        if (writer._readyPromiseState === 'pending') {\n            defaultWriterReadyPromiseReject(writer, error);\n        }\n        else {\n            defaultWriterReadyPromiseResetToRejected(writer, error);\n        }\n    }\n    function WritableStreamDefaultWriterGetDesiredSize(writer) {\n        const stream = writer._ownerWritableStream;\n        const state = stream._state;\n        if (state === 'errored' || state === 'erroring') {\n            return null;\n        }\n        if (state === 'closed') {\n            return 0;\n        }\n        return WritableStreamDefaultControllerGetDesiredSize(stream._writableStreamController);\n    }\n    function WritableStreamDefaultWriterRelease(writer) {\n        const stream = writer._ownerWritableStream;\n        const releasedError = new TypeError(`Writer was released and can no longer be used to monitor the stream's closedness`);\n        WritableStreamDefaultWriterEnsureReadyPromiseRejected(writer, releasedError);\n        // The state transitions to \"errored\" before the sink abort() method runs, but the writer.closed promise is not\n        // rejected until afterwards. This means that simply testing state will not work.\n        WritableStreamDefaultWriterEnsureClosedPromiseRejected(writer, releasedError);\n        stream._writer = undefined;\n        writer._ownerWritableStream = undefined;\n    }\n    function WritableStreamDefaultWriterWrite(writer, chunk) {\n        const stream = writer._ownerWritableStream;\n        const controller = stream._writableStreamController;\n        const chunkSize = WritableStreamDefaultControllerGetChunkSize(controller, chunk);\n        if (stream !== writer._ownerWritableStream) {\n            return promiseRejectedWith(defaultWriterLockException('write to'));\n        }\n        const state = stream._state;\n        if (state === 'errored') {\n            return promiseRejectedWith(stream._storedError);\n        }\n        if (WritableStreamCloseQueuedOrInFlight(stream) || state === 'closed') {\n            return promiseRejectedWith(new TypeError('The stream is closing or closed and cannot be written to'));\n        }\n        if (state === 'erroring') {\n            return promiseRejectedWith(stream._storedError);\n        }\n        const promise = WritableStreamAddWriteRequest(stream);\n        WritableStreamDefaultControllerWrite(controller, chunk, chunkSize);\n        return promise;\n    }\n    const closeSentinel = {};\n    /**\n     * Allows control of a {@link WritableStream | writable stream}'s state and internal queue.\n     *\n     * @public\n     */\n    class WritableStreamDefaultController {\n        constructor() {\n            throw new TypeError('Illegal constructor');\n        }\n        /**\n         * The reason which was passed to `WritableStream.abort(reason)` when the stream was aborted.\n         *\n         * @deprecated\n         *  This property has been removed from the specification, see https://github.com/whatwg/streams/pull/1177.\n         *  Use {@link WritableStreamDefaultController.signal}'s `reason` instead.\n         */\n        get abortReason() {\n            if (!IsWritableStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException$2('abortReason');\n            }\n            return this._abortReason;\n        }\n        /**\n         * An `AbortSignal` that can be used to abort the pending write or close operation when the stream is aborted.\n         */\n        get signal() {\n            if (!IsWritableStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException$2('signal');\n            }\n            if (this._abortController === undefined) {\n                // Older browsers or older Node versions may not support `AbortController` or `AbortSignal`.\n                // We don't want to bundle and ship an `AbortController` polyfill together with our polyfill,\n                // so instead we only implement support for `signal` if we find a global `AbortController` constructor.\n                throw new TypeError('WritableStreamDefaultController.prototype.signal is not supported');\n            }\n            return this._abortController.signal;\n        }\n        /**\n         * Closes the controlled writable stream, making all future interactions with it fail with the given error `e`.\n         *\n         * This method is rarely used, since usually it suffices to return a rejected promise from one of the underlying\n         * sink's methods. However, it can be useful for suddenly shutting down a stream in response to an event outside the\n         * normal lifecycle of interactions with the underlying sink.\n         */\n        error(e = undefined) {\n            if (!IsWritableStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException$2('error');\n            }\n            const state = this._controlledWritableStream._state;\n            if (state !== 'writable') {\n                // The stream is closed, errored or will be soon. The sink can't do anything useful if it gets an error here, so\n                // just treat it as a no-op.\n                return;\n            }\n            WritableStreamDefaultControllerError(this, e);\n        }\n        /** @internal */\n        [AbortSteps](reason) {\n            const result = this._abortAlgorithm(reason);\n            WritableStreamDefaultControllerClearAlgorithms(this);\n            return result;\n        }\n        /** @internal */\n        [ErrorSteps]() {\n            ResetQueue(this);\n        }\n    }\n    Object.defineProperties(WritableStreamDefaultController.prototype, {\n        abortReason: { enumerable: true },\n        signal: { enumerable: true },\n        error: { enumerable: true }\n    });\n    if (typeof Symbol.toStringTag === 'symbol') {\n        Object.defineProperty(WritableStreamDefaultController.prototype, Symbol.toStringTag, {\n            value: 'WritableStreamDefaultController',\n            configurable: true\n        });\n    }\n    // Abstract operations implementing interface required by the WritableStream.\n    function IsWritableStreamDefaultController(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_controlledWritableStream')) {\n            return false;\n        }\n        return x instanceof WritableStreamDefaultController;\n    }\n    function SetUpWritableStreamDefaultController(stream, controller, startAlgorithm, writeAlgorithm, closeAlgorithm, abortAlgorithm, highWaterMark, sizeAlgorithm) {\n        controller._controlledWritableStream = stream;\n        stream._writableStreamController = controller;\n        // Need to set the slots so that the assert doesn't fire. In the spec the slots already exist implicitly.\n        controller._queue = undefined;\n        controller._queueTotalSize = undefined;\n        ResetQueue(controller);\n        controller._abortReason = undefined;\n        controller._abortController = createAbortController();\n        controller._started = false;\n        controller._strategySizeAlgorithm = sizeAlgorithm;\n        controller._strategyHWM = highWaterMark;\n        controller._writeAlgorithm = writeAlgorithm;\n        controller._closeAlgorithm = closeAlgorithm;\n        controller._abortAlgorithm = abortAlgorithm;\n        const backpressure = WritableStreamDefaultControllerGetBackpressure(controller);\n        WritableStreamUpdateBackpressure(stream, backpressure);\n        const startResult = startAlgorithm();\n        const startPromise = promiseResolvedWith(startResult);\n        uponPromise(startPromise, () => {\n            controller._started = true;\n            WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller);\n            return null;\n        }, r => {\n            controller._started = true;\n            WritableStreamDealWithRejection(stream, r);\n            return null;\n        });\n    }\n    function SetUpWritableStreamDefaultControllerFromUnderlyingSink(stream, underlyingSink, highWaterMark, sizeAlgorithm) {\n        const controller = Object.create(WritableStreamDefaultController.prototype);\n        let startAlgorithm;\n        let writeAlgorithm;\n        let closeAlgorithm;\n        let abortAlgorithm;\n        if (underlyingSink.start !== undefined) {\n            startAlgorithm = () => underlyingSink.start(controller);\n        }\n        else {\n            startAlgorithm = () => undefined;\n        }\n        if (underlyingSink.write !== undefined) {\n            writeAlgorithm = chunk => underlyingSink.write(chunk, controller);\n        }\n        else {\n            writeAlgorithm = () => promiseResolvedWith(undefined);\n        }\n        if (underlyingSink.close !== undefined) {\n            closeAlgorithm = () => underlyingSink.close();\n        }\n        else {\n            closeAlgorithm = () => promiseResolvedWith(undefined);\n        }\n        if (underlyingSink.abort !== undefined) {\n            abortAlgorithm = reason => underlyingSink.abort(reason);\n        }\n        else {\n            abortAlgorithm = () => promiseResolvedWith(undefined);\n        }\n        SetUpWritableStreamDefaultController(stream, controller, startAlgorithm, writeAlgorithm, closeAlgorithm, abortAlgorithm, highWaterMark, sizeAlgorithm);\n    }\n    // ClearAlgorithms may be called twice. Erroring the same stream in multiple ways will often result in redundant calls.\n    function WritableStreamDefaultControllerClearAlgorithms(controller) {\n        controller._writeAlgorithm = undefined;\n        controller._closeAlgorithm = undefined;\n        controller._abortAlgorithm = undefined;\n        controller._strategySizeAlgorithm = undefined;\n    }\n    function WritableStreamDefaultControllerClose(controller) {\n        EnqueueValueWithSize(controller, closeSentinel, 0);\n        WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller);\n    }\n    function WritableStreamDefaultControllerGetChunkSize(controller, chunk) {\n        try {\n            return controller._strategySizeAlgorithm(chunk);\n        }\n        catch (chunkSizeE) {\n            WritableStreamDefaultControllerErrorIfNeeded(controller, chunkSizeE);\n            return 1;\n        }\n    }\n    function WritableStreamDefaultControllerGetDesiredSize(controller) {\n        return controller._strategyHWM - controller._queueTotalSize;\n    }\n    function WritableStreamDefaultControllerWrite(controller, chunk, chunkSize) {\n        try {\n            EnqueueValueWithSize(controller, chunk, chunkSize);\n        }\n        catch (enqueueE) {\n            WritableStreamDefaultControllerErrorIfNeeded(controller, enqueueE);\n            return;\n        }\n        const stream = controller._controlledWritableStream;\n        if (!WritableStreamCloseQueuedOrInFlight(stream) && stream._state === 'writable') {\n            const backpressure = WritableStreamDefaultControllerGetBackpressure(controller);\n            WritableStreamUpdateBackpressure(stream, backpressure);\n        }\n        WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller);\n    }\n    // Abstract operations for the WritableStreamDefaultController.\n    function WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller) {\n        const stream = controller._controlledWritableStream;\n        if (!controller._started) {\n            return;\n        }\n        if (stream._inFlightWriteRequest !== undefined) {\n            return;\n        }\n        const state = stream._state;\n        if (state === 'erroring') {\n            WritableStreamFinishErroring(stream);\n            return;\n        }\n        if (controller._queue.length === 0) {\n            return;\n        }\n        const value = PeekQueueValue(controller);\n        if (value === closeSentinel) {\n            WritableStreamDefaultControllerProcessClose(controller);\n        }\n        else {\n            WritableStreamDefaultControllerProcessWrite(controller, value);\n        }\n    }\n    function WritableStreamDefaultControllerErrorIfNeeded(controller, error) {\n        if (controller._controlledWritableStream._state === 'writable') {\n            WritableStreamDefaultControllerError(controller, error);\n        }\n    }\n    function WritableStreamDefaultControllerProcessClose(controller) {\n        const stream = controller._controlledWritableStream;\n        WritableStreamMarkCloseRequestInFlight(stream);\n        DequeueValue(controller);\n        const sinkClosePromise = controller._closeAlgorithm();\n        WritableStreamDefaultControllerClearAlgorithms(controller);\n        uponPromise(sinkClosePromise, () => {\n            WritableStreamFinishInFlightClose(stream);\n            return null;\n        }, reason => {\n            WritableStreamFinishInFlightCloseWithError(stream, reason);\n            return null;\n        });\n    }\n    function WritableStreamDefaultControllerProcessWrite(controller, chunk) {\n        const stream = controller._controlledWritableStream;\n        WritableStreamMarkFirstWriteRequestInFlight(stream);\n        const sinkWritePromise = controller._writeAlgorithm(chunk);\n        uponPromise(sinkWritePromise, () => {\n            WritableStreamFinishInFlightWrite(stream);\n            const state = stream._state;\n            DequeueValue(controller);\n            if (!WritableStreamCloseQueuedOrInFlight(stream) && state === 'writable') {\n                const backpressure = WritableStreamDefaultControllerGetBackpressure(controller);\n                WritableStreamUpdateBackpressure(stream, backpressure);\n            }\n            WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller);\n            return null;\n        }, reason => {\n            if (stream._state === 'writable') {\n                WritableStreamDefaultControllerClearAlgorithms(controller);\n            }\n            WritableStreamFinishInFlightWriteWithError(stream, reason);\n            return null;\n        });\n    }\n    function WritableStreamDefaultControllerGetBackpressure(controller) {\n        const desiredSize = WritableStreamDefaultControllerGetDesiredSize(controller);\n        return desiredSize <= 0;\n    }\n    // A client of WritableStreamDefaultController may use these functions directly to bypass state check.\n    function WritableStreamDefaultControllerError(controller, error) {\n        const stream = controller._controlledWritableStream;\n        WritableStreamDefaultControllerClearAlgorithms(controller);\n        WritableStreamStartErroring(stream, error);\n    }\n    // Helper functions for the WritableStream.\n    function streamBrandCheckException$2(name) {\n        return new TypeError(`WritableStream.prototype.${name} can only be used on a WritableStream`);\n    }\n    // Helper functions for the WritableStreamDefaultController.\n    function defaultControllerBrandCheckException$2(name) {\n        return new TypeError(`WritableStreamDefaultController.prototype.${name} can only be used on a WritableStreamDefaultController`);\n    }\n    // Helper functions for the WritableStreamDefaultWriter.\n    function defaultWriterBrandCheckException(name) {\n        return new TypeError(`WritableStreamDefaultWriter.prototype.${name} can only be used on a WritableStreamDefaultWriter`);\n    }\n    function defaultWriterLockException(name) {\n        return new TypeError('Cannot ' + name + ' a stream using a released writer');\n    }\n    function defaultWriterClosedPromiseInitialize(writer) {\n        writer._closedPromise = newPromise((resolve, reject) => {\n            writer._closedPromise_resolve = resolve;\n            writer._closedPromise_reject = reject;\n            writer._closedPromiseState = 'pending';\n        });\n    }\n    function defaultWriterClosedPromiseInitializeAsRejected(writer, reason) {\n        defaultWriterClosedPromiseInitialize(writer);\n        defaultWriterClosedPromiseReject(writer, reason);\n    }\n    function defaultWriterClosedPromiseInitializeAsResolved(writer) {\n        defaultWriterClosedPromiseInitialize(writer);\n        defaultWriterClosedPromiseResolve(writer);\n    }\n    function defaultWriterClosedPromiseReject(writer, reason) {\n        if (writer._closedPromise_reject === undefined) {\n            return;\n        }\n        setPromiseIsHandledToTrue(writer._closedPromise);\n        writer._closedPromise_reject(reason);\n        writer._closedPromise_resolve = undefined;\n        writer._closedPromise_reject = undefined;\n        writer._closedPromiseState = 'rejected';\n    }\n    function defaultWriterClosedPromiseResetToRejected(writer, reason) {\n        defaultWriterClosedPromiseInitializeAsRejected(writer, reason);\n    }\n    function defaultWriterClosedPromiseResolve(writer) {\n        if (writer._closedPromise_resolve === undefined) {\n            return;\n        }\n        writer._closedPromise_resolve(undefined);\n        writer._closedPromise_resolve = undefined;\n        writer._closedPromise_reject = undefined;\n        writer._closedPromiseState = 'resolved';\n    }\n    function defaultWriterReadyPromiseInitialize(writer) {\n        writer._readyPromise = newPromise((resolve, reject) => {\n            writer._readyPromise_resolve = resolve;\n            writer._readyPromise_reject = reject;\n        });\n        writer._readyPromiseState = 'pending';\n    }\n    function defaultWriterReadyPromiseInitializeAsRejected(writer, reason) {\n        defaultWriterReadyPromiseInitialize(writer);\n        defaultWriterReadyPromiseReject(writer, reason);\n    }\n    function defaultWriterReadyPromiseInitializeAsResolved(writer) {\n        defaultWriterReadyPromiseInitialize(writer);\n        defaultWriterReadyPromiseResolve(writer);\n    }\n    function defaultWriterReadyPromiseReject(writer, reason) {\n        if (writer._readyPromise_reject === undefined) {\n            return;\n        }\n        setPromiseIsHandledToTrue(writer._readyPromise);\n        writer._readyPromise_reject(reason);\n        writer._readyPromise_resolve = undefined;\n        writer._readyPromise_reject = undefined;\n        writer._readyPromiseState = 'rejected';\n    }\n    function defaultWriterReadyPromiseReset(writer) {\n        defaultWriterReadyPromiseInitialize(writer);\n    }\n    function defaultWriterReadyPromiseResetToRejected(writer, reason) {\n        defaultWriterReadyPromiseInitializeAsRejected(writer, reason);\n    }\n    function defaultWriterReadyPromiseResolve(writer) {\n        if (writer._readyPromise_resolve === undefined) {\n            return;\n        }\n        writer._readyPromise_resolve(undefined);\n        writer._readyPromise_resolve = undefined;\n        writer._readyPromise_reject = undefined;\n        writer._readyPromiseState = 'fulfilled';\n    }\n\n    /// <reference lib=\"dom\" />\n    function getGlobals() {\n        if (typeof globalThis !== 'undefined') {\n            return globalThis;\n        }\n        else if (typeof self !== 'undefined') {\n            return self;\n        }\n        else if (typeof global !== 'undefined') {\n            return global;\n        }\n        return undefined;\n    }\n    const globals = getGlobals();\n\n    /// <reference types=\"node\" />\n    function isDOMExceptionConstructor(ctor) {\n        if (!(typeof ctor === 'function' || typeof ctor === 'object')) {\n            return false;\n        }\n        if (ctor.name !== 'DOMException') {\n            return false;\n        }\n        try {\n            new ctor();\n            return true;\n        }\n        catch (_a) {\n            return false;\n        }\n    }\n    /**\n     * Support:\n     * - Web browsers\n     * - Node 18 and higher (https://github.com/nodejs/node/commit/e4b1fb5e6422c1ff151234bb9de792d45dd88d87)\n     */\n    function getFromGlobal() {\n        const ctor = globals === null || globals === void 0 ? void 0 : globals.DOMException;\n        return isDOMExceptionConstructor(ctor) ? ctor : undefined;\n    }\n    /**\n     * Support:\n     * - All platforms\n     */\n    function createPolyfill() {\n        // eslint-disable-next-line @typescript-eslint/no-shadow\n        const ctor = function DOMException(message, name) {\n            this.message = message || '';\n            this.name = name || 'Error';\n            if (Error.captureStackTrace) {\n                Error.captureStackTrace(this, this.constructor);\n            }\n        };\n        setFunctionName(ctor, 'DOMException');\n        ctor.prototype = Object.create(Error.prototype);\n        Object.defineProperty(ctor.prototype, 'constructor', { value: ctor, writable: true, configurable: true });\n        return ctor;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-redeclare\n    const DOMException = getFromGlobal() || createPolyfill();\n\n    function ReadableStreamPipeTo(source, dest, preventClose, preventAbort, preventCancel, signal) {\n        const reader = AcquireReadableStreamDefaultReader(source);\n        const writer = AcquireWritableStreamDefaultWriter(dest);\n        source._disturbed = true;\n        let shuttingDown = false;\n        // This is used to keep track of the spec's requirement that we wait for ongoing writes during shutdown.\n        let currentWrite = promiseResolvedWith(undefined);\n        return newPromise((resolve, reject) => {\n            let abortAlgorithm;\n            if (signal !== undefined) {\n                abortAlgorithm = () => {\n                    const error = signal.reason !== undefined ? signal.reason : new DOMException('Aborted', 'AbortError');\n                    const actions = [];\n                    if (!preventAbort) {\n                        actions.push(() => {\n                            if (dest._state === 'writable') {\n                                return WritableStreamAbort(dest, error);\n                            }\n                            return promiseResolvedWith(undefined);\n                        });\n                    }\n                    if (!preventCancel) {\n                        actions.push(() => {\n                            if (source._state === 'readable') {\n                                return ReadableStreamCancel(source, error);\n                            }\n                            return promiseResolvedWith(undefined);\n                        });\n                    }\n                    shutdownWithAction(() => Promise.all(actions.map(action => action())), true, error);\n                };\n                if (signal.aborted) {\n                    abortAlgorithm();\n                    return;\n                }\n                signal.addEventListener('abort', abortAlgorithm);\n            }\n            // Using reader and writer, read all chunks from this and write them to dest\n            // - Backpressure must be enforced\n            // - Shutdown must stop all activity\n            function pipeLoop() {\n                return newPromise((resolveLoop, rejectLoop) => {\n                    function next(done) {\n                        if (done) {\n                            resolveLoop();\n                        }\n                        else {\n                            // Use `PerformPromiseThen` instead of `uponPromise` to avoid\n                            // adding unnecessary `.catch(rethrowAssertionErrorRejection)` handlers\n                            PerformPromiseThen(pipeStep(), next, rejectLoop);\n                        }\n                    }\n                    next(false);\n                });\n            }\n            function pipeStep() {\n                if (shuttingDown) {\n                    return promiseResolvedWith(true);\n                }\n                return PerformPromiseThen(writer._readyPromise, () => {\n                    return newPromise((resolveRead, rejectRead) => {\n                        ReadableStreamDefaultReaderRead(reader, {\n                            _chunkSteps: chunk => {\n                                currentWrite = PerformPromiseThen(WritableStreamDefaultWriterWrite(writer, chunk), undefined, noop);\n                                resolveRead(false);\n                            },\n                            _closeSteps: () => resolveRead(true),\n                            _errorSteps: rejectRead\n                        });\n                    });\n                });\n            }\n            // Errors must be propagated forward\n            isOrBecomesErrored(source, reader._closedPromise, storedError => {\n                if (!preventAbort) {\n                    shutdownWithAction(() => WritableStreamAbort(dest, storedError), true, storedError);\n                }\n                else {\n                    shutdown(true, storedError);\n                }\n                return null;\n            });\n            // Errors must be propagated backward\n            isOrBecomesErrored(dest, writer._closedPromise, storedError => {\n                if (!preventCancel) {\n                    shutdownWithAction(() => ReadableStreamCancel(source, storedError), true, storedError);\n                }\n                else {\n                    shutdown(true, storedError);\n                }\n                return null;\n            });\n            // Closing must be propagated forward\n            isOrBecomesClosed(source, reader._closedPromise, () => {\n                if (!preventClose) {\n                    shutdownWithAction(() => WritableStreamDefaultWriterCloseWithErrorPropagation(writer));\n                }\n                else {\n                    shutdown();\n                }\n                return null;\n            });\n            // Closing must be propagated backward\n            if (WritableStreamCloseQueuedOrInFlight(dest) || dest._state === 'closed') {\n                const destClosed = new TypeError('the destination writable stream closed before all data could be piped to it');\n                if (!preventCancel) {\n                    shutdownWithAction(() => ReadableStreamCancel(source, destClosed), true, destClosed);\n                }\n                else {\n                    shutdown(true, destClosed);\n                }\n            }\n            setPromiseIsHandledToTrue(pipeLoop());\n            function waitForWritesToFinish() {\n                // Another write may have started while we were waiting on this currentWrite, so we have to be sure to wait\n                // for that too.\n                const oldCurrentWrite = currentWrite;\n                return PerformPromiseThen(currentWrite, () => oldCurrentWrite !== currentWrite ? waitForWritesToFinish() : undefined);\n            }\n            function isOrBecomesErrored(stream, promise, action) {\n                if (stream._state === 'errored') {\n                    action(stream._storedError);\n                }\n                else {\n                    uponRejection(promise, action);\n                }\n            }\n            function isOrBecomesClosed(stream, promise, action) {\n                if (stream._state === 'closed') {\n                    action();\n                }\n                else {\n                    uponFulfillment(promise, action);\n                }\n            }\n            function shutdownWithAction(action, originalIsError, originalError) {\n                if (shuttingDown) {\n                    return;\n                }\n                shuttingDown = true;\n                if (dest._state === 'writable' && !WritableStreamCloseQueuedOrInFlight(dest)) {\n                    uponFulfillment(waitForWritesToFinish(), doTheRest);\n                }\n                else {\n                    doTheRest();\n                }\n                function doTheRest() {\n                    uponPromise(action(), () => finalize(originalIsError, originalError), newError => finalize(true, newError));\n                    return null;\n                }\n            }\n            function shutdown(isError, error) {\n                if (shuttingDown) {\n                    return;\n                }\n                shuttingDown = true;\n                if (dest._state === 'writable' && !WritableStreamCloseQueuedOrInFlight(dest)) {\n                    uponFulfillment(waitForWritesToFinish(), () => finalize(isError, error));\n                }\n                else {\n                    finalize(isError, error);\n                }\n            }\n            function finalize(isError, error) {\n                WritableStreamDefaultWriterRelease(writer);\n                ReadableStreamReaderGenericRelease(reader);\n                if (signal !== undefined) {\n                    signal.removeEventListener('abort', abortAlgorithm);\n                }\n                if (isError) {\n                    reject(error);\n                }\n                else {\n                    resolve(undefined);\n                }\n                return null;\n            }\n        });\n    }\n\n    /**\n     * Allows control of a {@link ReadableStream | readable stream}'s state and internal queue.\n     *\n     * @public\n     */\n    class ReadableStreamDefaultController {\n        constructor() {\n            throw new TypeError('Illegal constructor');\n        }\n        /**\n         * Returns the desired size to fill the controlled stream's internal queue. It can be negative, if the queue is\n         * over-full. An underlying source ought to use this information to determine when and how to apply backpressure.\n         */\n        get desiredSize() {\n            if (!IsReadableStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException$1('desiredSize');\n            }\n            return ReadableStreamDefaultControllerGetDesiredSize(this);\n        }\n        /**\n         * Closes the controlled readable stream. Consumers will still be able to read any previously-enqueued chunks from\n         * the stream, but once those are read, the stream will become closed.\n         */\n        close() {\n            if (!IsReadableStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException$1('close');\n            }\n            if (!ReadableStreamDefaultControllerCanCloseOrEnqueue(this)) {\n                throw new TypeError('The stream is not in a state that permits close');\n            }\n            ReadableStreamDefaultControllerClose(this);\n        }\n        enqueue(chunk = undefined) {\n            if (!IsReadableStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException$1('enqueue');\n            }\n            if (!ReadableStreamDefaultControllerCanCloseOrEnqueue(this)) {\n                throw new TypeError('The stream is not in a state that permits enqueue');\n            }\n            return ReadableStreamDefaultControllerEnqueue(this, chunk);\n        }\n        /**\n         * Errors the controlled readable stream, making all future interactions with it fail with the given error `e`.\n         */\n        error(e = undefined) {\n            if (!IsReadableStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException$1('error');\n            }\n            ReadableStreamDefaultControllerError(this, e);\n        }\n        /** @internal */\n        [CancelSteps](reason) {\n            ResetQueue(this);\n            const result = this._cancelAlgorithm(reason);\n            ReadableStreamDefaultControllerClearAlgorithms(this);\n            return result;\n        }\n        /** @internal */\n        [PullSteps](readRequest) {\n            const stream = this._controlledReadableStream;\n            if (this._queue.length > 0) {\n                const chunk = DequeueValue(this);\n                if (this._closeRequested && this._queue.length === 0) {\n                    ReadableStreamDefaultControllerClearAlgorithms(this);\n                    ReadableStreamClose(stream);\n                }\n                else {\n                    ReadableStreamDefaultControllerCallPullIfNeeded(this);\n                }\n                readRequest._chunkSteps(chunk);\n            }\n            else {\n                ReadableStreamAddReadRequest(stream, readRequest);\n                ReadableStreamDefaultControllerCallPullIfNeeded(this);\n            }\n        }\n        /** @internal */\n        [ReleaseSteps]() {\n            // Do nothing.\n        }\n    }\n    Object.defineProperties(ReadableStreamDefaultController.prototype, {\n        close: { enumerable: true },\n        enqueue: { enumerable: true },\n        error: { enumerable: true },\n        desiredSize: { enumerable: true }\n    });\n    setFunctionName(ReadableStreamDefaultController.prototype.close, 'close');\n    setFunctionName(ReadableStreamDefaultController.prototype.enqueue, 'enqueue');\n    setFunctionName(ReadableStreamDefaultController.prototype.error, 'error');\n    if (typeof Symbol.toStringTag === 'symbol') {\n        Object.defineProperty(ReadableStreamDefaultController.prototype, Symbol.toStringTag, {\n            value: 'ReadableStreamDefaultController',\n            configurable: true\n        });\n    }\n    // Abstract operations for the ReadableStreamDefaultController.\n    function IsReadableStreamDefaultController(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_controlledReadableStream')) {\n            return false;\n        }\n        return x instanceof ReadableStreamDefaultController;\n    }\n    function ReadableStreamDefaultControllerCallPullIfNeeded(controller) {\n        const shouldPull = ReadableStreamDefaultControllerShouldCallPull(controller);\n        if (!shouldPull) {\n            return;\n        }\n        if (controller._pulling) {\n            controller._pullAgain = true;\n            return;\n        }\n        controller._pulling = true;\n        const pullPromise = controller._pullAlgorithm();\n        uponPromise(pullPromise, () => {\n            controller._pulling = false;\n            if (controller._pullAgain) {\n                controller._pullAgain = false;\n                ReadableStreamDefaultControllerCallPullIfNeeded(controller);\n            }\n            return null;\n        }, e => {\n            ReadableStreamDefaultControllerError(controller, e);\n            return null;\n        });\n    }\n    function ReadableStreamDefaultControllerShouldCallPull(controller) {\n        const stream = controller._controlledReadableStream;\n        if (!ReadableStreamDefaultControllerCanCloseOrEnqueue(controller)) {\n            return false;\n        }\n        if (!controller._started) {\n            return false;\n        }\n        if (IsReadableStreamLocked(stream) && ReadableStreamGetNumReadRequests(stream) > 0) {\n            return true;\n        }\n        const desiredSize = ReadableStreamDefaultControllerGetDesiredSize(controller);\n        if (desiredSize > 0) {\n            return true;\n        }\n        return false;\n    }\n    function ReadableStreamDefaultControllerClearAlgorithms(controller) {\n        controller._pullAlgorithm = undefined;\n        controller._cancelAlgorithm = undefined;\n        controller._strategySizeAlgorithm = undefined;\n    }\n    // A client of ReadableStreamDefaultController may use these functions directly to bypass state check.\n    function ReadableStreamDefaultControllerClose(controller) {\n        if (!ReadableStreamDefaultControllerCanCloseOrEnqueue(controller)) {\n            return;\n        }\n        const stream = controller._controlledReadableStream;\n        controller._closeRequested = true;\n        if (controller._queue.length === 0) {\n            ReadableStreamDefaultControllerClearAlgorithms(controller);\n            ReadableStreamClose(stream);\n        }\n    }\n    function ReadableStreamDefaultControllerEnqueue(controller, chunk) {\n        if (!ReadableStreamDefaultControllerCanCloseOrEnqueue(controller)) {\n            return;\n        }\n        const stream = controller._controlledReadableStream;\n        if (IsReadableStreamLocked(stream) && ReadableStreamGetNumReadRequests(stream) > 0) {\n            ReadableStreamFulfillReadRequest(stream, chunk, false);\n        }\n        else {\n            let chunkSize;\n            try {\n                chunkSize = controller._strategySizeAlgorithm(chunk);\n            }\n            catch (chunkSizeE) {\n                ReadableStreamDefaultControllerError(controller, chunkSizeE);\n                throw chunkSizeE;\n            }\n            try {\n                EnqueueValueWithSize(controller, chunk, chunkSize);\n            }\n            catch (enqueueE) {\n                ReadableStreamDefaultControllerError(controller, enqueueE);\n                throw enqueueE;\n            }\n        }\n        ReadableStreamDefaultControllerCallPullIfNeeded(controller);\n    }\n    function ReadableStreamDefaultControllerError(controller, e) {\n        const stream = controller._controlledReadableStream;\n        if (stream._state !== 'readable') {\n            return;\n        }\n        ResetQueue(controller);\n        ReadableStreamDefaultControllerClearAlgorithms(controller);\n        ReadableStreamError(stream, e);\n    }\n    function ReadableStreamDefaultControllerGetDesiredSize(controller) {\n        const state = controller._controlledReadableStream._state;\n        if (state === 'errored') {\n            return null;\n        }\n        if (state === 'closed') {\n            return 0;\n        }\n        return controller._strategyHWM - controller._queueTotalSize;\n    }\n    // This is used in the implementation of TransformStream.\n    function ReadableStreamDefaultControllerHasBackpressure(controller) {\n        if (ReadableStreamDefaultControllerShouldCallPull(controller)) {\n            return false;\n        }\n        return true;\n    }\n    function ReadableStreamDefaultControllerCanCloseOrEnqueue(controller) {\n        const state = controller._controlledReadableStream._state;\n        if (!controller._closeRequested && state === 'readable') {\n            return true;\n        }\n        return false;\n    }\n    function SetUpReadableStreamDefaultController(stream, controller, startAlgorithm, pullAlgorithm, cancelAlgorithm, highWaterMark, sizeAlgorithm) {\n        controller._controlledReadableStream = stream;\n        controller._queue = undefined;\n        controller._queueTotalSize = undefined;\n        ResetQueue(controller);\n        controller._started = false;\n        controller._closeRequested = false;\n        controller._pullAgain = false;\n        controller._pulling = false;\n        controller._strategySizeAlgorithm = sizeAlgorithm;\n        controller._strategyHWM = highWaterMark;\n        controller._pullAlgorithm = pullAlgorithm;\n        controller._cancelAlgorithm = cancelAlgorithm;\n        stream._readableStreamController = controller;\n        const startResult = startAlgorithm();\n        uponPromise(promiseResolvedWith(startResult), () => {\n            controller._started = true;\n            ReadableStreamDefaultControllerCallPullIfNeeded(controller);\n            return null;\n        }, r => {\n            ReadableStreamDefaultControllerError(controller, r);\n            return null;\n        });\n    }\n    function SetUpReadableStreamDefaultControllerFromUnderlyingSource(stream, underlyingSource, highWaterMark, sizeAlgorithm) {\n        const controller = Object.create(ReadableStreamDefaultController.prototype);\n        let startAlgorithm;\n        let pullAlgorithm;\n        let cancelAlgorithm;\n        if (underlyingSource.start !== undefined) {\n            startAlgorithm = () => underlyingSource.start(controller);\n        }\n        else {\n            startAlgorithm = () => undefined;\n        }\n        if (underlyingSource.pull !== undefined) {\n            pullAlgorithm = () => underlyingSource.pull(controller);\n        }\n        else {\n            pullAlgorithm = () => promiseResolvedWith(undefined);\n        }\n        if (underlyingSource.cancel !== undefined) {\n            cancelAlgorithm = reason => underlyingSource.cancel(reason);\n        }\n        else {\n            cancelAlgorithm = () => promiseResolvedWith(undefined);\n        }\n        SetUpReadableStreamDefaultController(stream, controller, startAlgorithm, pullAlgorithm, cancelAlgorithm, highWaterMark, sizeAlgorithm);\n    }\n    // Helper functions for the ReadableStreamDefaultController.\n    function defaultControllerBrandCheckException$1(name) {\n        return new TypeError(`ReadableStreamDefaultController.prototype.${name} can only be used on a ReadableStreamDefaultController`);\n    }\n\n    function ReadableStreamTee(stream, cloneForBranch2) {\n        if (IsReadableByteStreamController(stream._readableStreamController)) {\n            return ReadableByteStreamTee(stream);\n        }\n        return ReadableStreamDefaultTee(stream);\n    }\n    function ReadableStreamDefaultTee(stream, cloneForBranch2) {\n        const reader = AcquireReadableStreamDefaultReader(stream);\n        let reading = false;\n        let readAgain = false;\n        let canceled1 = false;\n        let canceled2 = false;\n        let reason1;\n        let reason2;\n        let branch1;\n        let branch2;\n        let resolveCancelPromise;\n        const cancelPromise = newPromise(resolve => {\n            resolveCancelPromise = resolve;\n        });\n        function pullAlgorithm() {\n            if (reading) {\n                readAgain = true;\n                return promiseResolvedWith(undefined);\n            }\n            reading = true;\n            const readRequest = {\n                _chunkSteps: chunk => {\n                    // This needs to be delayed a microtask because it takes at least a microtask to detect errors (using\n                    // reader._closedPromise below), and we want errors in stream to error both branches immediately. We cannot let\n                    // successful synchronously-available reads get ahead of asynchronously-available errors.\n                    _queueMicrotask(() => {\n                        readAgain = false;\n                        const chunk1 = chunk;\n                        const chunk2 = chunk;\n                        // There is no way to access the cloning code right now in the reference implementation.\n                        // If we add one then we'll need an implementation for serializable objects.\n                        // if (!canceled2 && cloneForBranch2) {\n                        //   chunk2 = StructuredDeserialize(StructuredSerialize(chunk2));\n                        // }\n                        if (!canceled1) {\n                            ReadableStreamDefaultControllerEnqueue(branch1._readableStreamController, chunk1);\n                        }\n                        if (!canceled2) {\n                            ReadableStreamDefaultControllerEnqueue(branch2._readableStreamController, chunk2);\n                        }\n                        reading = false;\n                        if (readAgain) {\n                            pullAlgorithm();\n                        }\n                    });\n                },\n                _closeSteps: () => {\n                    reading = false;\n                    if (!canceled1) {\n                        ReadableStreamDefaultControllerClose(branch1._readableStreamController);\n                    }\n                    if (!canceled2) {\n                        ReadableStreamDefaultControllerClose(branch2._readableStreamController);\n                    }\n                    if (!canceled1 || !canceled2) {\n                        resolveCancelPromise(undefined);\n                    }\n                },\n                _errorSteps: () => {\n                    reading = false;\n                }\n            };\n            ReadableStreamDefaultReaderRead(reader, readRequest);\n            return promiseResolvedWith(undefined);\n        }\n        function cancel1Algorithm(reason) {\n            canceled1 = true;\n            reason1 = reason;\n            if (canceled2) {\n                const compositeReason = CreateArrayFromList([reason1, reason2]);\n                const cancelResult = ReadableStreamCancel(stream, compositeReason);\n                resolveCancelPromise(cancelResult);\n            }\n            return cancelPromise;\n        }\n        function cancel2Algorithm(reason) {\n            canceled2 = true;\n            reason2 = reason;\n            if (canceled1) {\n                const compositeReason = CreateArrayFromList([reason1, reason2]);\n                const cancelResult = ReadableStreamCancel(stream, compositeReason);\n                resolveCancelPromise(cancelResult);\n            }\n            return cancelPromise;\n        }\n        function startAlgorithm() {\n            // do nothing\n        }\n        branch1 = CreateReadableStream(startAlgorithm, pullAlgorithm, cancel1Algorithm);\n        branch2 = CreateReadableStream(startAlgorithm, pullAlgorithm, cancel2Algorithm);\n        uponRejection(reader._closedPromise, (r) => {\n            ReadableStreamDefaultControllerError(branch1._readableStreamController, r);\n            ReadableStreamDefaultControllerError(branch2._readableStreamController, r);\n            if (!canceled1 || !canceled2) {\n                resolveCancelPromise(undefined);\n            }\n            return null;\n        });\n        return [branch1, branch2];\n    }\n    function ReadableByteStreamTee(stream) {\n        let reader = AcquireReadableStreamDefaultReader(stream);\n        let reading = false;\n        let readAgainForBranch1 = false;\n        let readAgainForBranch2 = false;\n        let canceled1 = false;\n        let canceled2 = false;\n        let reason1;\n        let reason2;\n        let branch1;\n        let branch2;\n        let resolveCancelPromise;\n        const cancelPromise = newPromise(resolve => {\n            resolveCancelPromise = resolve;\n        });\n        function forwardReaderError(thisReader) {\n            uponRejection(thisReader._closedPromise, r => {\n                if (thisReader !== reader) {\n                    return null;\n                }\n                ReadableByteStreamControllerError(branch1._readableStreamController, r);\n                ReadableByteStreamControllerError(branch2._readableStreamController, r);\n                if (!canceled1 || !canceled2) {\n                    resolveCancelPromise(undefined);\n                }\n                return null;\n            });\n        }\n        function pullWithDefaultReader() {\n            if (IsReadableStreamBYOBReader(reader)) {\n                ReadableStreamReaderGenericRelease(reader);\n                reader = AcquireReadableStreamDefaultReader(stream);\n                forwardReaderError(reader);\n            }\n            const readRequest = {\n                _chunkSteps: chunk => {\n                    // This needs to be delayed a microtask because it takes at least a microtask to detect errors (using\n                    // reader._closedPromise below), and we want errors in stream to error both branches immediately. We cannot let\n                    // successful synchronously-available reads get ahead of asynchronously-available errors.\n                    _queueMicrotask(() => {\n                        readAgainForBranch1 = false;\n                        readAgainForBranch2 = false;\n                        const chunk1 = chunk;\n                        let chunk2 = chunk;\n                        if (!canceled1 && !canceled2) {\n                            try {\n                                chunk2 = CloneAsUint8Array(chunk);\n                            }\n                            catch (cloneE) {\n                                ReadableByteStreamControllerError(branch1._readableStreamController, cloneE);\n                                ReadableByteStreamControllerError(branch2._readableStreamController, cloneE);\n                                resolveCancelPromise(ReadableStreamCancel(stream, cloneE));\n                                return;\n                            }\n                        }\n                        if (!canceled1) {\n                            ReadableByteStreamControllerEnqueue(branch1._readableStreamController, chunk1);\n                        }\n                        if (!canceled2) {\n                            ReadableByteStreamControllerEnqueue(branch2._readableStreamController, chunk2);\n                        }\n                        reading = false;\n                        if (readAgainForBranch1) {\n                            pull1Algorithm();\n                        }\n                        else if (readAgainForBranch2) {\n                            pull2Algorithm();\n                        }\n                    });\n                },\n                _closeSteps: () => {\n                    reading = false;\n                    if (!canceled1) {\n                        ReadableByteStreamControllerClose(branch1._readableStreamController);\n                    }\n                    if (!canceled2) {\n                        ReadableByteStreamControllerClose(branch2._readableStreamController);\n                    }\n                    if (branch1._readableStreamController._pendingPullIntos.length > 0) {\n                        ReadableByteStreamControllerRespond(branch1._readableStreamController, 0);\n                    }\n                    if (branch2._readableStreamController._pendingPullIntos.length > 0) {\n                        ReadableByteStreamControllerRespond(branch2._readableStreamController, 0);\n                    }\n                    if (!canceled1 || !canceled2) {\n                        resolveCancelPromise(undefined);\n                    }\n                },\n                _errorSteps: () => {\n                    reading = false;\n                }\n            };\n            ReadableStreamDefaultReaderRead(reader, readRequest);\n        }\n        function pullWithBYOBReader(view, forBranch2) {\n            if (IsReadableStreamDefaultReader(reader)) {\n                ReadableStreamReaderGenericRelease(reader);\n                reader = AcquireReadableStreamBYOBReader(stream);\n                forwardReaderError(reader);\n            }\n            const byobBranch = forBranch2 ? branch2 : branch1;\n            const otherBranch = forBranch2 ? branch1 : branch2;\n            const readIntoRequest = {\n                _chunkSteps: chunk => {\n                    // This needs to be delayed a microtask because it takes at least a microtask to detect errors (using\n                    // reader._closedPromise below), and we want errors in stream to error both branches immediately. We cannot let\n                    // successful synchronously-available reads get ahead of asynchronously-available errors.\n                    _queueMicrotask(() => {\n                        readAgainForBranch1 = false;\n                        readAgainForBranch2 = false;\n                        const byobCanceled = forBranch2 ? canceled2 : canceled1;\n                        const otherCanceled = forBranch2 ? canceled1 : canceled2;\n                        if (!otherCanceled) {\n                            let clonedChunk;\n                            try {\n                                clonedChunk = CloneAsUint8Array(chunk);\n                            }\n                            catch (cloneE) {\n                                ReadableByteStreamControllerError(byobBranch._readableStreamController, cloneE);\n                                ReadableByteStreamControllerError(otherBranch._readableStreamController, cloneE);\n                                resolveCancelPromise(ReadableStreamCancel(stream, cloneE));\n                                return;\n                            }\n                            if (!byobCanceled) {\n                                ReadableByteStreamControllerRespondWithNewView(byobBranch._readableStreamController, chunk);\n                            }\n                            ReadableByteStreamControllerEnqueue(otherBranch._readableStreamController, clonedChunk);\n                        }\n                        else if (!byobCanceled) {\n                            ReadableByteStreamControllerRespondWithNewView(byobBranch._readableStreamController, chunk);\n                        }\n                        reading = false;\n                        if (readAgainForBranch1) {\n                            pull1Algorithm();\n                        }\n                        else if (readAgainForBranch2) {\n                            pull2Algorithm();\n                        }\n                    });\n                },\n                _closeSteps: chunk => {\n                    reading = false;\n                    const byobCanceled = forBranch2 ? canceled2 : canceled1;\n                    const otherCanceled = forBranch2 ? canceled1 : canceled2;\n                    if (!byobCanceled) {\n                        ReadableByteStreamControllerClose(byobBranch._readableStreamController);\n                    }\n                    if (!otherCanceled) {\n                        ReadableByteStreamControllerClose(otherBranch._readableStreamController);\n                    }\n                    if (chunk !== undefined) {\n                        if (!byobCanceled) {\n                            ReadableByteStreamControllerRespondWithNewView(byobBranch._readableStreamController, chunk);\n                        }\n                        if (!otherCanceled && otherBranch._readableStreamController._pendingPullIntos.length > 0) {\n                            ReadableByteStreamControllerRespond(otherBranch._readableStreamController, 0);\n                        }\n                    }\n                    if (!byobCanceled || !otherCanceled) {\n                        resolveCancelPromise(undefined);\n                    }\n                },\n                _errorSteps: () => {\n                    reading = false;\n                }\n            };\n            ReadableStreamBYOBReaderRead(reader, view, 1, readIntoRequest);\n        }\n        function pull1Algorithm() {\n            if (reading) {\n                readAgainForBranch1 = true;\n                return promiseResolvedWith(undefined);\n            }\n            reading = true;\n            const byobRequest = ReadableByteStreamControllerGetBYOBRequest(branch1._readableStreamController);\n            if (byobRequest === null) {\n                pullWithDefaultReader();\n            }\n            else {\n                pullWithBYOBReader(byobRequest._view, false);\n            }\n            return promiseResolvedWith(undefined);\n        }\n        function pull2Algorithm() {\n            if (reading) {\n                readAgainForBranch2 = true;\n                return promiseResolvedWith(undefined);\n            }\n            reading = true;\n            const byobRequest = ReadableByteStreamControllerGetBYOBRequest(branch2._readableStreamController);\n            if (byobRequest === null) {\n                pullWithDefaultReader();\n            }\n            else {\n                pullWithBYOBReader(byobRequest._view, true);\n            }\n            return promiseResolvedWith(undefined);\n        }\n        function cancel1Algorithm(reason) {\n            canceled1 = true;\n            reason1 = reason;\n            if (canceled2) {\n                const compositeReason = CreateArrayFromList([reason1, reason2]);\n                const cancelResult = ReadableStreamCancel(stream, compositeReason);\n                resolveCancelPromise(cancelResult);\n            }\n            return cancelPromise;\n        }\n        function cancel2Algorithm(reason) {\n            canceled2 = true;\n            reason2 = reason;\n            if (canceled1) {\n                const compositeReason = CreateArrayFromList([reason1, reason2]);\n                const cancelResult = ReadableStreamCancel(stream, compositeReason);\n                resolveCancelPromise(cancelResult);\n            }\n            return cancelPromise;\n        }\n        function startAlgorithm() {\n            return;\n        }\n        branch1 = CreateReadableByteStream(startAlgorithm, pull1Algorithm, cancel1Algorithm);\n        branch2 = CreateReadableByteStream(startAlgorithm, pull2Algorithm, cancel2Algorithm);\n        forwardReaderError(reader);\n        return [branch1, branch2];\n    }\n\n    function isReadableStreamLike(stream) {\n        return typeIsObject(stream) && typeof stream.getReader !== 'undefined';\n    }\n\n    function ReadableStreamFrom(source) {\n        if (isReadableStreamLike(source)) {\n            return ReadableStreamFromDefaultReader(source.getReader());\n        }\n        return ReadableStreamFromIterable(source);\n    }\n    function ReadableStreamFromIterable(asyncIterable) {\n        let stream;\n        const iteratorRecord = GetIterator(asyncIterable, 'async');\n        const startAlgorithm = noop;\n        function pullAlgorithm() {\n            let nextResult;\n            try {\n                nextResult = IteratorNext(iteratorRecord);\n            }\n            catch (e) {\n                return promiseRejectedWith(e);\n            }\n            const nextPromise = promiseResolvedWith(nextResult);\n            return transformPromiseWith(nextPromise, iterResult => {\n                if (!typeIsObject(iterResult)) {\n                    throw new TypeError('The promise returned by the iterator.next() method must fulfill with an object');\n                }\n                const done = IteratorComplete(iterResult);\n                if (done) {\n                    ReadableStreamDefaultControllerClose(stream._readableStreamController);\n                }\n                else {\n                    const value = IteratorValue(iterResult);\n                    ReadableStreamDefaultControllerEnqueue(stream._readableStreamController, value);\n                }\n            });\n        }\n        function cancelAlgorithm(reason) {\n            const iterator = iteratorRecord.iterator;\n            let returnMethod;\n            try {\n                returnMethod = GetMethod(iterator, 'return');\n            }\n            catch (e) {\n                return promiseRejectedWith(e);\n            }\n            if (returnMethod === undefined) {\n                return promiseResolvedWith(undefined);\n            }\n            let returnResult;\n            try {\n                returnResult = reflectCall(returnMethod, iterator, [reason]);\n            }\n            catch (e) {\n                return promiseRejectedWith(e);\n            }\n            const returnPromise = promiseResolvedWith(returnResult);\n            return transformPromiseWith(returnPromise, iterResult => {\n                if (!typeIsObject(iterResult)) {\n                    throw new TypeError('The promise returned by the iterator.return() method must fulfill with an object');\n                }\n                return undefined;\n            });\n        }\n        stream = CreateReadableStream(startAlgorithm, pullAlgorithm, cancelAlgorithm, 0);\n        return stream;\n    }\n    function ReadableStreamFromDefaultReader(reader) {\n        let stream;\n        const startAlgorithm = noop;\n        function pullAlgorithm() {\n            let readPromise;\n            try {\n                readPromise = reader.read();\n            }\n            catch (e) {\n                return promiseRejectedWith(e);\n            }\n            return transformPromiseWith(readPromise, readResult => {\n                if (!typeIsObject(readResult)) {\n                    throw new TypeError('The promise returned by the reader.read() method must fulfill with an object');\n                }\n                if (readResult.done) {\n                    ReadableStreamDefaultControllerClose(stream._readableStreamController);\n                }\n                else {\n                    const value = readResult.value;\n                    ReadableStreamDefaultControllerEnqueue(stream._readableStreamController, value);\n                }\n            });\n        }\n        function cancelAlgorithm(reason) {\n            try {\n                return promiseResolvedWith(reader.cancel(reason));\n            }\n            catch (e) {\n                return promiseRejectedWith(e);\n            }\n        }\n        stream = CreateReadableStream(startAlgorithm, pullAlgorithm, cancelAlgorithm, 0);\n        return stream;\n    }\n\n    function convertUnderlyingDefaultOrByteSource(source, context) {\n        assertDictionary(source, context);\n        const original = source;\n        const autoAllocateChunkSize = original === null || original === void 0 ? void 0 : original.autoAllocateChunkSize;\n        const cancel = original === null || original === void 0 ? void 0 : original.cancel;\n        const pull = original === null || original === void 0 ? void 0 : original.pull;\n        const start = original === null || original === void 0 ? void 0 : original.start;\n        const type = original === null || original === void 0 ? void 0 : original.type;\n        return {\n            autoAllocateChunkSize: autoAllocateChunkSize === undefined ?\n                undefined :\n                convertUnsignedLongLongWithEnforceRange(autoAllocateChunkSize, `${context} has member 'autoAllocateChunkSize' that`),\n            cancel: cancel === undefined ?\n                undefined :\n                convertUnderlyingSourceCancelCallback(cancel, original, `${context} has member 'cancel' that`),\n            pull: pull === undefined ?\n                undefined :\n                convertUnderlyingSourcePullCallback(pull, original, `${context} has member 'pull' that`),\n            start: start === undefined ?\n                undefined :\n                convertUnderlyingSourceStartCallback(start, original, `${context} has member 'start' that`),\n            type: type === undefined ? undefined : convertReadableStreamType(type, `${context} has member 'type' that`)\n        };\n    }\n    function convertUnderlyingSourceCancelCallback(fn, original, context) {\n        assertFunction(fn, context);\n        return (reason) => promiseCall(fn, original, [reason]);\n    }\n    function convertUnderlyingSourcePullCallback(fn, original, context) {\n        assertFunction(fn, context);\n        return (controller) => promiseCall(fn, original, [controller]);\n    }\n    function convertUnderlyingSourceStartCallback(fn, original, context) {\n        assertFunction(fn, context);\n        return (controller) => reflectCall(fn, original, [controller]);\n    }\n    function convertReadableStreamType(type, context) {\n        type = `${type}`;\n        if (type !== 'bytes') {\n            throw new TypeError(`${context} '${type}' is not a valid enumeration value for ReadableStreamType`);\n        }\n        return type;\n    }\n\n    function convertIteratorOptions(options, context) {\n        assertDictionary(options, context);\n        const preventCancel = options === null || options === void 0 ? void 0 : options.preventCancel;\n        return { preventCancel: Boolean(preventCancel) };\n    }\n\n    function convertPipeOptions(options, context) {\n        assertDictionary(options, context);\n        const preventAbort = options === null || options === void 0 ? void 0 : options.preventAbort;\n        const preventCancel = options === null || options === void 0 ? void 0 : options.preventCancel;\n        const preventClose = options === null || options === void 0 ? void 0 : options.preventClose;\n        const signal = options === null || options === void 0 ? void 0 : options.signal;\n        if (signal !== undefined) {\n            assertAbortSignal(signal, `${context} has member 'signal' that`);\n        }\n        return {\n            preventAbort: Boolean(preventAbort),\n            preventCancel: Boolean(preventCancel),\n            preventClose: Boolean(preventClose),\n            signal\n        };\n    }\n    function assertAbortSignal(signal, context) {\n        if (!isAbortSignal(signal)) {\n            throw new TypeError(`${context} is not an AbortSignal.`);\n        }\n    }\n\n    function convertReadableWritablePair(pair, context) {\n        assertDictionary(pair, context);\n        const readable = pair === null || pair === void 0 ? void 0 : pair.readable;\n        assertRequiredField(readable, 'readable', 'ReadableWritablePair');\n        assertReadableStream(readable, `${context} has member 'readable' that`);\n        const writable = pair === null || pair === void 0 ? void 0 : pair.writable;\n        assertRequiredField(writable, 'writable', 'ReadableWritablePair');\n        assertWritableStream(writable, `${context} has member 'writable' that`);\n        return { readable, writable };\n    }\n\n    /**\n     * A readable stream represents a source of data, from which you can read.\n     *\n     * @public\n     */\n    class ReadableStream {\n        constructor(rawUnderlyingSource = {}, rawStrategy = {}) {\n            if (rawUnderlyingSource === undefined) {\n                rawUnderlyingSource = null;\n            }\n            else {\n                assertObject(rawUnderlyingSource, 'First parameter');\n            }\n            const strategy = convertQueuingStrategy(rawStrategy, 'Second parameter');\n            const underlyingSource = convertUnderlyingDefaultOrByteSource(rawUnderlyingSource, 'First parameter');\n            InitializeReadableStream(this);\n            if (underlyingSource.type === 'bytes') {\n                if (strategy.size !== undefined) {\n                    throw new RangeError('The strategy for a byte stream cannot have a size function');\n                }\n                const highWaterMark = ExtractHighWaterMark(strategy, 0);\n                SetUpReadableByteStreamControllerFromUnderlyingSource(this, underlyingSource, highWaterMark);\n            }\n            else {\n                const sizeAlgorithm = ExtractSizeAlgorithm(strategy);\n                const highWaterMark = ExtractHighWaterMark(strategy, 1);\n                SetUpReadableStreamDefaultControllerFromUnderlyingSource(this, underlyingSource, highWaterMark, sizeAlgorithm);\n            }\n        }\n        /**\n         * Whether or not the readable stream is locked to a {@link ReadableStreamDefaultReader | reader}.\n         */\n        get locked() {\n            if (!IsReadableStream(this)) {\n                throw streamBrandCheckException$1('locked');\n            }\n            return IsReadableStreamLocked(this);\n        }\n        /**\n         * Cancels the stream, signaling a loss of interest in the stream by a consumer.\n         *\n         * The supplied `reason` argument will be given to the underlying source's {@link UnderlyingSource.cancel | cancel()}\n         * method, which might or might not use it.\n         */\n        cancel(reason = undefined) {\n            if (!IsReadableStream(this)) {\n                return promiseRejectedWith(streamBrandCheckException$1('cancel'));\n            }\n            if (IsReadableStreamLocked(this)) {\n                return promiseRejectedWith(new TypeError('Cannot cancel a stream that already has a reader'));\n            }\n            return ReadableStreamCancel(this, reason);\n        }\n        getReader(rawOptions = undefined) {\n            if (!IsReadableStream(this)) {\n                throw streamBrandCheckException$1('getReader');\n            }\n            const options = convertReaderOptions(rawOptions, 'First parameter');\n            if (options.mode === undefined) {\n                return AcquireReadableStreamDefaultReader(this);\n            }\n            return AcquireReadableStreamBYOBReader(this);\n        }\n        pipeThrough(rawTransform, rawOptions = {}) {\n            if (!IsReadableStream(this)) {\n                throw streamBrandCheckException$1('pipeThrough');\n            }\n            assertRequiredArgument(rawTransform, 1, 'pipeThrough');\n            const transform = convertReadableWritablePair(rawTransform, 'First parameter');\n            const options = convertPipeOptions(rawOptions, 'Second parameter');\n            if (IsReadableStreamLocked(this)) {\n                throw new TypeError('ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream');\n            }\n            if (IsWritableStreamLocked(transform.writable)) {\n                throw new TypeError('ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream');\n            }\n            const promise = ReadableStreamPipeTo(this, transform.writable, options.preventClose, options.preventAbort, options.preventCancel, options.signal);\n            setPromiseIsHandledToTrue(promise);\n            return transform.readable;\n        }\n        pipeTo(destination, rawOptions = {}) {\n            if (!IsReadableStream(this)) {\n                return promiseRejectedWith(streamBrandCheckException$1('pipeTo'));\n            }\n            if (destination === undefined) {\n                return promiseRejectedWith(`Parameter 1 is required in 'pipeTo'.`);\n            }\n            if (!IsWritableStream(destination)) {\n                return promiseRejectedWith(new TypeError(`ReadableStream.prototype.pipeTo's first argument must be a WritableStream`));\n            }\n            let options;\n            try {\n                options = convertPipeOptions(rawOptions, 'Second parameter');\n            }\n            catch (e) {\n                return promiseRejectedWith(e);\n            }\n            if (IsReadableStreamLocked(this)) {\n                return promiseRejectedWith(new TypeError('ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream'));\n            }\n            if (IsWritableStreamLocked(destination)) {\n                return promiseRejectedWith(new TypeError('ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream'));\n            }\n            return ReadableStreamPipeTo(this, destination, options.preventClose, options.preventAbort, options.preventCancel, options.signal);\n        }\n        /**\n         * Tees this readable stream, returning a two-element array containing the two resulting branches as\n         * new {@link ReadableStream} instances.\n         *\n         * Teeing a stream will lock it, preventing any other consumer from acquiring a reader.\n         * To cancel the stream, cancel both of the resulting branches; a composite cancellation reason will then be\n         * propagated to the stream's underlying source.\n         *\n         * Note that the chunks seen in each branch will be the same object. If the chunks are not immutable,\n         * this could allow interference between the two branches.\n         */\n        tee() {\n            if (!IsReadableStream(this)) {\n                throw streamBrandCheckException$1('tee');\n            }\n            const branches = ReadableStreamTee(this);\n            return CreateArrayFromList(branches);\n        }\n        values(rawOptions = undefined) {\n            if (!IsReadableStream(this)) {\n                throw streamBrandCheckException$1('values');\n            }\n            const options = convertIteratorOptions(rawOptions, 'First parameter');\n            return AcquireReadableStreamAsyncIterator(this, options.preventCancel);\n        }\n        [SymbolAsyncIterator](options) {\n            // Stub implementation, overridden below\n            return this.values(options);\n        }\n        /**\n         * Creates a new ReadableStream wrapping the provided iterable or async iterable.\n         *\n         * This can be used to adapt various kinds of objects into a readable stream,\n         * such as an array, an async generator, or a Node.js readable stream.\n         */\n        static from(asyncIterable) {\n            return ReadableStreamFrom(asyncIterable);\n        }\n    }\n    Object.defineProperties(ReadableStream, {\n        from: { enumerable: true }\n    });\n    Object.defineProperties(ReadableStream.prototype, {\n        cancel: { enumerable: true },\n        getReader: { enumerable: true },\n        pipeThrough: { enumerable: true },\n        pipeTo: { enumerable: true },\n        tee: { enumerable: true },\n        values: { enumerable: true },\n        locked: { enumerable: true }\n    });\n    setFunctionName(ReadableStream.from, 'from');\n    setFunctionName(ReadableStream.prototype.cancel, 'cancel');\n    setFunctionName(ReadableStream.prototype.getReader, 'getReader');\n    setFunctionName(ReadableStream.prototype.pipeThrough, 'pipeThrough');\n    setFunctionName(ReadableStream.prototype.pipeTo, 'pipeTo');\n    setFunctionName(ReadableStream.prototype.tee, 'tee');\n    setFunctionName(ReadableStream.prototype.values, 'values');\n    if (typeof Symbol.toStringTag === 'symbol') {\n        Object.defineProperty(ReadableStream.prototype, Symbol.toStringTag, {\n            value: 'ReadableStream',\n            configurable: true\n        });\n    }\n    Object.defineProperty(ReadableStream.prototype, SymbolAsyncIterator, {\n        value: ReadableStream.prototype.values,\n        writable: true,\n        configurable: true\n    });\n    // Abstract operations for the ReadableStream.\n    // Throws if and only if startAlgorithm throws.\n    function CreateReadableStream(startAlgorithm, pullAlgorithm, cancelAlgorithm, highWaterMark = 1, sizeAlgorithm = () => 1) {\n        const stream = Object.create(ReadableStream.prototype);\n        InitializeReadableStream(stream);\n        const controller = Object.create(ReadableStreamDefaultController.prototype);\n        SetUpReadableStreamDefaultController(stream, controller, startAlgorithm, pullAlgorithm, cancelAlgorithm, highWaterMark, sizeAlgorithm);\n        return stream;\n    }\n    // Throws if and only if startAlgorithm throws.\n    function CreateReadableByteStream(startAlgorithm, pullAlgorithm, cancelAlgorithm) {\n        const stream = Object.create(ReadableStream.prototype);\n        InitializeReadableStream(stream);\n        const controller = Object.create(ReadableByteStreamController.prototype);\n        SetUpReadableByteStreamController(stream, controller, startAlgorithm, pullAlgorithm, cancelAlgorithm, 0, undefined);\n        return stream;\n    }\n    function InitializeReadableStream(stream) {\n        stream._state = 'readable';\n        stream._reader = undefined;\n        stream._storedError = undefined;\n        stream._disturbed = false;\n    }\n    function IsReadableStream(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_readableStreamController')) {\n            return false;\n        }\n        return x instanceof ReadableStream;\n    }\n    function IsReadableStreamLocked(stream) {\n        if (stream._reader === undefined) {\n            return false;\n        }\n        return true;\n    }\n    // ReadableStream API exposed for controllers.\n    function ReadableStreamCancel(stream, reason) {\n        stream._disturbed = true;\n        if (stream._state === 'closed') {\n            return promiseResolvedWith(undefined);\n        }\n        if (stream._state === 'errored') {\n            return promiseRejectedWith(stream._storedError);\n        }\n        ReadableStreamClose(stream);\n        const reader = stream._reader;\n        if (reader !== undefined && IsReadableStreamBYOBReader(reader)) {\n            const readIntoRequests = reader._readIntoRequests;\n            reader._readIntoRequests = new SimpleQueue();\n            readIntoRequests.forEach(readIntoRequest => {\n                readIntoRequest._closeSteps(undefined);\n            });\n        }\n        const sourceCancelPromise = stream._readableStreamController[CancelSteps](reason);\n        return transformPromiseWith(sourceCancelPromise, noop);\n    }\n    function ReadableStreamClose(stream) {\n        stream._state = 'closed';\n        const reader = stream._reader;\n        if (reader === undefined) {\n            return;\n        }\n        defaultReaderClosedPromiseResolve(reader);\n        if (IsReadableStreamDefaultReader(reader)) {\n            const readRequests = reader._readRequests;\n            reader._readRequests = new SimpleQueue();\n            readRequests.forEach(readRequest => {\n                readRequest._closeSteps();\n            });\n        }\n    }\n    function ReadableStreamError(stream, e) {\n        stream._state = 'errored';\n        stream._storedError = e;\n        const reader = stream._reader;\n        if (reader === undefined) {\n            return;\n        }\n        defaultReaderClosedPromiseReject(reader, e);\n        if (IsReadableStreamDefaultReader(reader)) {\n            ReadableStreamDefaultReaderErrorReadRequests(reader, e);\n        }\n        else {\n            ReadableStreamBYOBReaderErrorReadIntoRequests(reader, e);\n        }\n    }\n    // Helper functions for the ReadableStream.\n    function streamBrandCheckException$1(name) {\n        return new TypeError(`ReadableStream.prototype.${name} can only be used on a ReadableStream`);\n    }\n\n    function convertQueuingStrategyInit(init, context) {\n        assertDictionary(init, context);\n        const highWaterMark = init === null || init === void 0 ? void 0 : init.highWaterMark;\n        assertRequiredField(highWaterMark, 'highWaterMark', 'QueuingStrategyInit');\n        return {\n            highWaterMark: convertUnrestrictedDouble(highWaterMark)\n        };\n    }\n\n    // The size function must not have a prototype property nor be a constructor\n    const byteLengthSizeFunction = (chunk) => {\n        return chunk.byteLength;\n    };\n    setFunctionName(byteLengthSizeFunction, 'size');\n    /**\n     * A queuing strategy that counts the number of bytes in each chunk.\n     *\n     * @public\n     */\n    class ByteLengthQueuingStrategy {\n        constructor(options) {\n            assertRequiredArgument(options, 1, 'ByteLengthQueuingStrategy');\n            options = convertQueuingStrategyInit(options, 'First parameter');\n            this._byteLengthQueuingStrategyHighWaterMark = options.highWaterMark;\n        }\n        /**\n         * Returns the high water mark provided to the constructor.\n         */\n        get highWaterMark() {\n            if (!IsByteLengthQueuingStrategy(this)) {\n                throw byteLengthBrandCheckException('highWaterMark');\n            }\n            return this._byteLengthQueuingStrategyHighWaterMark;\n        }\n        /**\n         * Measures the size of `chunk` by returning the value of its `byteLength` property.\n         */\n        get size() {\n            if (!IsByteLengthQueuingStrategy(this)) {\n                throw byteLengthBrandCheckException('size');\n            }\n            return byteLengthSizeFunction;\n        }\n    }\n    Object.defineProperties(ByteLengthQueuingStrategy.prototype, {\n        highWaterMark: { enumerable: true },\n        size: { enumerable: true }\n    });\n    if (typeof Symbol.toStringTag === 'symbol') {\n        Object.defineProperty(ByteLengthQueuingStrategy.prototype, Symbol.toStringTag, {\n            value: 'ByteLengthQueuingStrategy',\n            configurable: true\n        });\n    }\n    // Helper functions for the ByteLengthQueuingStrategy.\n    function byteLengthBrandCheckException(name) {\n        return new TypeError(`ByteLengthQueuingStrategy.prototype.${name} can only be used on a ByteLengthQueuingStrategy`);\n    }\n    function IsByteLengthQueuingStrategy(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_byteLengthQueuingStrategyHighWaterMark')) {\n            return false;\n        }\n        return x instanceof ByteLengthQueuingStrategy;\n    }\n\n    // The size function must not have a prototype property nor be a constructor\n    const countSizeFunction = () => {\n        return 1;\n    };\n    setFunctionName(countSizeFunction, 'size');\n    /**\n     * A queuing strategy that counts the number of chunks.\n     *\n     * @public\n     */\n    class CountQueuingStrategy {\n        constructor(options) {\n            assertRequiredArgument(options, 1, 'CountQueuingStrategy');\n            options = convertQueuingStrategyInit(options, 'First parameter');\n            this._countQueuingStrategyHighWaterMark = options.highWaterMark;\n        }\n        /**\n         * Returns the high water mark provided to the constructor.\n         */\n        get highWaterMark() {\n            if (!IsCountQueuingStrategy(this)) {\n                throw countBrandCheckException('highWaterMark');\n            }\n            return this._countQueuingStrategyHighWaterMark;\n        }\n        /**\n         * Measures the size of `chunk` by always returning 1.\n         * This ensures that the total queue size is a count of the number of chunks in the queue.\n         */\n        get size() {\n            if (!IsCountQueuingStrategy(this)) {\n                throw countBrandCheckException('size');\n            }\n            return countSizeFunction;\n        }\n    }\n    Object.defineProperties(CountQueuingStrategy.prototype, {\n        highWaterMark: { enumerable: true },\n        size: { enumerable: true }\n    });\n    if (typeof Symbol.toStringTag === 'symbol') {\n        Object.defineProperty(CountQueuingStrategy.prototype, Symbol.toStringTag, {\n            value: 'CountQueuingStrategy',\n            configurable: true\n        });\n    }\n    // Helper functions for the CountQueuingStrategy.\n    function countBrandCheckException(name) {\n        return new TypeError(`CountQueuingStrategy.prototype.${name} can only be used on a CountQueuingStrategy`);\n    }\n    function IsCountQueuingStrategy(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_countQueuingStrategyHighWaterMark')) {\n            return false;\n        }\n        return x instanceof CountQueuingStrategy;\n    }\n\n    function convertTransformer(original, context) {\n        assertDictionary(original, context);\n        const cancel = original === null || original === void 0 ? void 0 : original.cancel;\n        const flush = original === null || original === void 0 ? void 0 : original.flush;\n        const readableType = original === null || original === void 0 ? void 0 : original.readableType;\n        const start = original === null || original === void 0 ? void 0 : original.start;\n        const transform = original === null || original === void 0 ? void 0 : original.transform;\n        const writableType = original === null || original === void 0 ? void 0 : original.writableType;\n        return {\n            cancel: cancel === undefined ?\n                undefined :\n                convertTransformerCancelCallback(cancel, original, `${context} has member 'cancel' that`),\n            flush: flush === undefined ?\n                undefined :\n                convertTransformerFlushCallback(flush, original, `${context} has member 'flush' that`),\n            readableType,\n            start: start === undefined ?\n                undefined :\n                convertTransformerStartCallback(start, original, `${context} has member 'start' that`),\n            transform: transform === undefined ?\n                undefined :\n                convertTransformerTransformCallback(transform, original, `${context} has member 'transform' that`),\n            writableType\n        };\n    }\n    function convertTransformerFlushCallback(fn, original, context) {\n        assertFunction(fn, context);\n        return (controller) => promiseCall(fn, original, [controller]);\n    }\n    function convertTransformerStartCallback(fn, original, context) {\n        assertFunction(fn, context);\n        return (controller) => reflectCall(fn, original, [controller]);\n    }\n    function convertTransformerTransformCallback(fn, original, context) {\n        assertFunction(fn, context);\n        return (chunk, controller) => promiseCall(fn, original, [chunk, controller]);\n    }\n    function convertTransformerCancelCallback(fn, original, context) {\n        assertFunction(fn, context);\n        return (reason) => promiseCall(fn, original, [reason]);\n    }\n\n    // Class TransformStream\n    /**\n     * A transform stream consists of a pair of streams: a {@link WritableStream | writable stream},\n     * known as its writable side, and a {@link ReadableStream | readable stream}, known as its readable side.\n     * In a manner specific to the transform stream in question, writes to the writable side result in new data being\n     * made available for reading from the readable side.\n     *\n     * @public\n     */\n    class TransformStream {\n        constructor(rawTransformer = {}, rawWritableStrategy = {}, rawReadableStrategy = {}) {\n            if (rawTransformer === undefined) {\n                rawTransformer = null;\n            }\n            const writableStrategy = convertQueuingStrategy(rawWritableStrategy, 'Second parameter');\n            const readableStrategy = convertQueuingStrategy(rawReadableStrategy, 'Third parameter');\n            const transformer = convertTransformer(rawTransformer, 'First parameter');\n            if (transformer.readableType !== undefined) {\n                throw new RangeError('Invalid readableType specified');\n            }\n            if (transformer.writableType !== undefined) {\n                throw new RangeError('Invalid writableType specified');\n            }\n            const readableHighWaterMark = ExtractHighWaterMark(readableStrategy, 0);\n            const readableSizeAlgorithm = ExtractSizeAlgorithm(readableStrategy);\n            const writableHighWaterMark = ExtractHighWaterMark(writableStrategy, 1);\n            const writableSizeAlgorithm = ExtractSizeAlgorithm(writableStrategy);\n            let startPromise_resolve;\n            const startPromise = newPromise(resolve => {\n                startPromise_resolve = resolve;\n            });\n            InitializeTransformStream(this, startPromise, writableHighWaterMark, writableSizeAlgorithm, readableHighWaterMark, readableSizeAlgorithm);\n            SetUpTransformStreamDefaultControllerFromTransformer(this, transformer);\n            if (transformer.start !== undefined) {\n                startPromise_resolve(transformer.start(this._transformStreamController));\n            }\n            else {\n                startPromise_resolve(undefined);\n            }\n        }\n        /**\n         * The readable side of the transform stream.\n         */\n        get readable() {\n            if (!IsTransformStream(this)) {\n                throw streamBrandCheckException('readable');\n            }\n            return this._readable;\n        }\n        /**\n         * The writable side of the transform stream.\n         */\n        get writable() {\n            if (!IsTransformStream(this)) {\n                throw streamBrandCheckException('writable');\n            }\n            return this._writable;\n        }\n    }\n    Object.defineProperties(TransformStream.prototype, {\n        readable: { enumerable: true },\n        writable: { enumerable: true }\n    });\n    if (typeof Symbol.toStringTag === 'symbol') {\n        Object.defineProperty(TransformStream.prototype, Symbol.toStringTag, {\n            value: 'TransformStream',\n            configurable: true\n        });\n    }\n    function InitializeTransformStream(stream, startPromise, writableHighWaterMark, writableSizeAlgorithm, readableHighWaterMark, readableSizeAlgorithm) {\n        function startAlgorithm() {\n            return startPromise;\n        }\n        function writeAlgorithm(chunk) {\n            return TransformStreamDefaultSinkWriteAlgorithm(stream, chunk);\n        }\n        function abortAlgorithm(reason) {\n            return TransformStreamDefaultSinkAbortAlgorithm(stream, reason);\n        }\n        function closeAlgorithm() {\n            return TransformStreamDefaultSinkCloseAlgorithm(stream);\n        }\n        stream._writable = CreateWritableStream(startAlgorithm, writeAlgorithm, closeAlgorithm, abortAlgorithm, writableHighWaterMark, writableSizeAlgorithm);\n        function pullAlgorithm() {\n            return TransformStreamDefaultSourcePullAlgorithm(stream);\n        }\n        function cancelAlgorithm(reason) {\n            return TransformStreamDefaultSourceCancelAlgorithm(stream, reason);\n        }\n        stream._readable = CreateReadableStream(startAlgorithm, pullAlgorithm, cancelAlgorithm, readableHighWaterMark, readableSizeAlgorithm);\n        // The [[backpressure]] slot is set to undefined so that it can be initialised by TransformStreamSetBackpressure.\n        stream._backpressure = undefined;\n        stream._backpressureChangePromise = undefined;\n        stream._backpressureChangePromise_resolve = undefined;\n        TransformStreamSetBackpressure(stream, true);\n        stream._transformStreamController = undefined;\n    }\n    function IsTransformStream(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_transformStreamController')) {\n            return false;\n        }\n        return x instanceof TransformStream;\n    }\n    // This is a no-op if both sides are already errored.\n    function TransformStreamError(stream, e) {\n        ReadableStreamDefaultControllerError(stream._readable._readableStreamController, e);\n        TransformStreamErrorWritableAndUnblockWrite(stream, e);\n    }\n    function TransformStreamErrorWritableAndUnblockWrite(stream, e) {\n        TransformStreamDefaultControllerClearAlgorithms(stream._transformStreamController);\n        WritableStreamDefaultControllerErrorIfNeeded(stream._writable._writableStreamController, e);\n        TransformStreamUnblockWrite(stream);\n    }\n    function TransformStreamUnblockWrite(stream) {\n        if (stream._backpressure) {\n            // Pretend that pull() was called to permit any pending write() calls to complete. TransformStreamSetBackpressure()\n            // cannot be called from enqueue() or pull() once the ReadableStream is errored, so this will will be the final time\n            // _backpressure is set.\n            TransformStreamSetBackpressure(stream, false);\n        }\n    }\n    function TransformStreamSetBackpressure(stream, backpressure) {\n        // Passes also when called during construction.\n        if (stream._backpressureChangePromise !== undefined) {\n            stream._backpressureChangePromise_resolve();\n        }\n        stream._backpressureChangePromise = newPromise(resolve => {\n            stream._backpressureChangePromise_resolve = resolve;\n        });\n        stream._backpressure = backpressure;\n    }\n    // Class TransformStreamDefaultController\n    /**\n     * Allows control of the {@link ReadableStream} and {@link WritableStream} of the associated {@link TransformStream}.\n     *\n     * @public\n     */\n    class TransformStreamDefaultController {\n        constructor() {\n            throw new TypeError('Illegal constructor');\n        }\n        /**\n         * Returns the desired size to fill the readable sides internal queue. It can be negative, if the queue is over-full.\n         */\n        get desiredSize() {\n            if (!IsTransformStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException('desiredSize');\n            }\n            const readableController = this._controlledTransformStream._readable._readableStreamController;\n            return ReadableStreamDefaultControllerGetDesiredSize(readableController);\n        }\n        enqueue(chunk = undefined) {\n            if (!IsTransformStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException('enqueue');\n            }\n            TransformStreamDefaultControllerEnqueue(this, chunk);\n        }\n        /**\n         * Errors both the readable side and the writable side of the controlled transform stream, making all future\n         * interactions with it fail with the given error `e`. Any chunks queued for transformation will be discarded.\n         */\n        error(reason = undefined) {\n            if (!IsTransformStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException('error');\n            }\n            TransformStreamDefaultControllerError(this, reason);\n        }\n        /**\n         * Closes the readable side and errors the writable side of the controlled transform stream. This is useful when the\n         * transformer only needs to consume a portion of the chunks written to the writable side.\n         */\n        terminate() {\n            if (!IsTransformStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException('terminate');\n            }\n            TransformStreamDefaultControllerTerminate(this);\n        }\n    }\n    Object.defineProperties(TransformStreamDefaultController.prototype, {\n        enqueue: { enumerable: true },\n        error: { enumerable: true },\n        terminate: { enumerable: true },\n        desiredSize: { enumerable: true }\n    });\n    setFunctionName(TransformStreamDefaultController.prototype.enqueue, 'enqueue');\n    setFunctionName(TransformStreamDefaultController.prototype.error, 'error');\n    setFunctionName(TransformStreamDefaultController.prototype.terminate, 'terminate');\n    if (typeof Symbol.toStringTag === 'symbol') {\n        Object.defineProperty(TransformStreamDefaultController.prototype, Symbol.toStringTag, {\n            value: 'TransformStreamDefaultController',\n            configurable: true\n        });\n    }\n    // Transform Stream Default Controller Abstract Operations\n    function IsTransformStreamDefaultController(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_controlledTransformStream')) {\n            return false;\n        }\n        return x instanceof TransformStreamDefaultController;\n    }\n    function SetUpTransformStreamDefaultController(stream, controller, transformAlgorithm, flushAlgorithm, cancelAlgorithm) {\n        controller._controlledTransformStream = stream;\n        stream._transformStreamController = controller;\n        controller._transformAlgorithm = transformAlgorithm;\n        controller._flushAlgorithm = flushAlgorithm;\n        controller._cancelAlgorithm = cancelAlgorithm;\n        controller._finishPromise = undefined;\n        controller._finishPromise_resolve = undefined;\n        controller._finishPromise_reject = undefined;\n    }\n    function SetUpTransformStreamDefaultControllerFromTransformer(stream, transformer) {\n        const controller = Object.create(TransformStreamDefaultController.prototype);\n        let transformAlgorithm;\n        let flushAlgorithm;\n        let cancelAlgorithm;\n        if (transformer.transform !== undefined) {\n            transformAlgorithm = chunk => transformer.transform(chunk, controller);\n        }\n        else {\n            transformAlgorithm = chunk => {\n                try {\n                    TransformStreamDefaultControllerEnqueue(controller, chunk);\n                    return promiseResolvedWith(undefined);\n                }\n                catch (transformResultE) {\n                    return promiseRejectedWith(transformResultE);\n                }\n            };\n        }\n        if (transformer.flush !== undefined) {\n            flushAlgorithm = () => transformer.flush(controller);\n        }\n        else {\n            flushAlgorithm = () => promiseResolvedWith(undefined);\n        }\n        if (transformer.cancel !== undefined) {\n            cancelAlgorithm = reason => transformer.cancel(reason);\n        }\n        else {\n            cancelAlgorithm = () => promiseResolvedWith(undefined);\n        }\n        SetUpTransformStreamDefaultController(stream, controller, transformAlgorithm, flushAlgorithm, cancelAlgorithm);\n    }\n    function TransformStreamDefaultControllerClearAlgorithms(controller) {\n        controller._transformAlgorithm = undefined;\n        controller._flushAlgorithm = undefined;\n        controller._cancelAlgorithm = undefined;\n    }\n    function TransformStreamDefaultControllerEnqueue(controller, chunk) {\n        const stream = controller._controlledTransformStream;\n        const readableController = stream._readable._readableStreamController;\n        if (!ReadableStreamDefaultControllerCanCloseOrEnqueue(readableController)) {\n            throw new TypeError('Readable side is not in a state that permits enqueue');\n        }\n        // We throttle transform invocations based on the backpressure of the ReadableStream, but we still\n        // accept TransformStreamDefaultControllerEnqueue() calls.\n        try {\n            ReadableStreamDefaultControllerEnqueue(readableController, chunk);\n        }\n        catch (e) {\n            // This happens when readableStrategy.size() throws.\n            TransformStreamErrorWritableAndUnblockWrite(stream, e);\n            throw stream._readable._storedError;\n        }\n        const backpressure = ReadableStreamDefaultControllerHasBackpressure(readableController);\n        if (backpressure !== stream._backpressure) {\n            TransformStreamSetBackpressure(stream, true);\n        }\n    }\n    function TransformStreamDefaultControllerError(controller, e) {\n        TransformStreamError(controller._controlledTransformStream, e);\n    }\n    function TransformStreamDefaultControllerPerformTransform(controller, chunk) {\n        const transformPromise = controller._transformAlgorithm(chunk);\n        return transformPromiseWith(transformPromise, undefined, r => {\n            TransformStreamError(controller._controlledTransformStream, r);\n            throw r;\n        });\n    }\n    function TransformStreamDefaultControllerTerminate(controller) {\n        const stream = controller._controlledTransformStream;\n        const readableController = stream._readable._readableStreamController;\n        ReadableStreamDefaultControllerClose(readableController);\n        const error = new TypeError('TransformStream terminated');\n        TransformStreamErrorWritableAndUnblockWrite(stream, error);\n    }\n    // TransformStreamDefaultSink Algorithms\n    function TransformStreamDefaultSinkWriteAlgorithm(stream, chunk) {\n        const controller = stream._transformStreamController;\n        if (stream._backpressure) {\n            const backpressureChangePromise = stream._backpressureChangePromise;\n            return transformPromiseWith(backpressureChangePromise, () => {\n                const writable = stream._writable;\n                const state = writable._state;\n                if (state === 'erroring') {\n                    throw writable._storedError;\n                }\n                return TransformStreamDefaultControllerPerformTransform(controller, chunk);\n            });\n        }\n        return TransformStreamDefaultControllerPerformTransform(controller, chunk);\n    }\n    function TransformStreamDefaultSinkAbortAlgorithm(stream, reason) {\n        const controller = stream._transformStreamController;\n        if (controller._finishPromise !== undefined) {\n            return controller._finishPromise;\n        }\n        // stream._readable cannot change after construction, so caching it across a call to user code is safe.\n        const readable = stream._readable;\n        // Assign the _finishPromise now so that if _cancelAlgorithm calls readable.cancel() internally,\n        // we don't run the _cancelAlgorithm again.\n        controller._finishPromise = newPromise((resolve, reject) => {\n            controller._finishPromise_resolve = resolve;\n            controller._finishPromise_reject = reject;\n        });\n        const cancelPromise = controller._cancelAlgorithm(reason);\n        TransformStreamDefaultControllerClearAlgorithms(controller);\n        uponPromise(cancelPromise, () => {\n            if (readable._state === 'errored') {\n                defaultControllerFinishPromiseReject(controller, readable._storedError);\n            }\n            else {\n                ReadableStreamDefaultControllerError(readable._readableStreamController, reason);\n                defaultControllerFinishPromiseResolve(controller);\n            }\n            return null;\n        }, r => {\n            ReadableStreamDefaultControllerError(readable._readableStreamController, r);\n            defaultControllerFinishPromiseReject(controller, r);\n            return null;\n        });\n        return controller._finishPromise;\n    }\n    function TransformStreamDefaultSinkCloseAlgorithm(stream) {\n        const controller = stream._transformStreamController;\n        if (controller._finishPromise !== undefined) {\n            return controller._finishPromise;\n        }\n        // stream._readable cannot change after construction, so caching it across a call to user code is safe.\n        const readable = stream._readable;\n        // Assign the _finishPromise now so that if _flushAlgorithm calls readable.cancel() internally,\n        // we don't also run the _cancelAlgorithm.\n        controller._finishPromise = newPromise((resolve, reject) => {\n            controller._finishPromise_resolve = resolve;\n            controller._finishPromise_reject = reject;\n        });\n        const flushPromise = controller._flushAlgorithm();\n        TransformStreamDefaultControllerClearAlgorithms(controller);\n        uponPromise(flushPromise, () => {\n            if (readable._state === 'errored') {\n                defaultControllerFinishPromiseReject(controller, readable._storedError);\n            }\n            else {\n                ReadableStreamDefaultControllerClose(readable._readableStreamController);\n                defaultControllerFinishPromiseResolve(controller);\n            }\n            return null;\n        }, r => {\n            ReadableStreamDefaultControllerError(readable._readableStreamController, r);\n            defaultControllerFinishPromiseReject(controller, r);\n            return null;\n        });\n        return controller._finishPromise;\n    }\n    // TransformStreamDefaultSource Algorithms\n    function TransformStreamDefaultSourcePullAlgorithm(stream) {\n        // Invariant. Enforced by the promises returned by start() and pull().\n        TransformStreamSetBackpressure(stream, false);\n        // Prevent the next pull() call until there is backpressure.\n        return stream._backpressureChangePromise;\n    }\n    function TransformStreamDefaultSourceCancelAlgorithm(stream, reason) {\n        const controller = stream._transformStreamController;\n        if (controller._finishPromise !== undefined) {\n            return controller._finishPromise;\n        }\n        // stream._writable cannot change after construction, so caching it across a call to user code is safe.\n        const writable = stream._writable;\n        // Assign the _finishPromise now so that if _flushAlgorithm calls writable.abort() or\n        // writable.cancel() internally, we don't run the _cancelAlgorithm again, or also run the\n        // _flushAlgorithm.\n        controller._finishPromise = newPromise((resolve, reject) => {\n            controller._finishPromise_resolve = resolve;\n            controller._finishPromise_reject = reject;\n        });\n        const cancelPromise = controller._cancelAlgorithm(reason);\n        TransformStreamDefaultControllerClearAlgorithms(controller);\n        uponPromise(cancelPromise, () => {\n            if (writable._state === 'errored') {\n                defaultControllerFinishPromiseReject(controller, writable._storedError);\n            }\n            else {\n                WritableStreamDefaultControllerErrorIfNeeded(writable._writableStreamController, reason);\n                TransformStreamUnblockWrite(stream);\n                defaultControllerFinishPromiseResolve(controller);\n            }\n            return null;\n        }, r => {\n            WritableStreamDefaultControllerErrorIfNeeded(writable._writableStreamController, r);\n            TransformStreamUnblockWrite(stream);\n            defaultControllerFinishPromiseReject(controller, r);\n            return null;\n        });\n        return controller._finishPromise;\n    }\n    // Helper functions for the TransformStreamDefaultController.\n    function defaultControllerBrandCheckException(name) {\n        return new TypeError(`TransformStreamDefaultController.prototype.${name} can only be used on a TransformStreamDefaultController`);\n    }\n    function defaultControllerFinishPromiseResolve(controller) {\n        if (controller._finishPromise_resolve === undefined) {\n            return;\n        }\n        controller._finishPromise_resolve();\n        controller._finishPromise_resolve = undefined;\n        controller._finishPromise_reject = undefined;\n    }\n    function defaultControllerFinishPromiseReject(controller, reason) {\n        if (controller._finishPromise_reject === undefined) {\n            return;\n        }\n        setPromiseIsHandledToTrue(controller._finishPromise);\n        controller._finishPromise_reject(reason);\n        controller._finishPromise_resolve = undefined;\n        controller._finishPromise_reject = undefined;\n    }\n    // Helper functions for the TransformStream.\n    function streamBrandCheckException(name) {\n        return new TypeError(`TransformStream.prototype.${name} can only be used on a TransformStream`);\n    }\n\n    exports.ByteLengthQueuingStrategy = ByteLengthQueuingStrategy;\n    exports.CountQueuingStrategy = CountQueuingStrategy;\n    exports.ReadableByteStreamController = ReadableByteStreamController;\n    exports.ReadableStream = ReadableStream;\n    exports.ReadableStreamBYOBReader = ReadableStreamBYOBReader;\n    exports.ReadableStreamBYOBRequest = ReadableStreamBYOBRequest;\n    exports.ReadableStreamDefaultController = ReadableStreamDefaultController;\n    exports.ReadableStreamDefaultReader = ReadableStreamDefaultReader;\n    exports.TransformStream = TransformStream;\n    exports.TransformStreamDefaultController = TransformStreamDefaultController;\n    exports.WritableStream = WritableStream;\n    exports.WritableStreamDefaultController = WritableStreamDefaultController;\n    exports.WritableStreamDefaultWriter = WritableStreamDefaultWriter;\n\n}));\n//# sourceMappingURL=ponyfill.es2018.js.map\n","/*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */\n\nif (!globalThis.DOMException) {\n  try {\n    const { MessageChannel } = require('worker_threads'),\n    port = new MessageChannel().port1,\n    ab = new ArrayBuffer()\n    port.postMessage(ab, [ab, ab])\n  } catch (err) {\n    err.constructor.name === 'DOMException' && (\n      globalThis.DOMException = err.constructor\n    )\n  }\n}\n\nmodule.exports = globalThis.DOMException\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst util_2 = require(\"../../compile/util\");\nconst def = {\n    keyword: \"patternProperties\",\n    type: \"object\",\n    schemaType: \"object\",\n    code(cxt) {\n        const { gen, schema, data, parentSchema, it } = cxt;\n        const { opts } = it;\n        const patterns = (0, code_1.allSchemaProperties)(schema);\n        const alwaysValidPatterns = patterns.filter((p) => (0, util_1.alwaysValidSchema)(it, schema[p]));\n        if (patterns.length === 0 ||\n            (alwaysValidPatterns.length === patterns.length &&\n                (!it.opts.unevaluated || it.props === true))) {\n            return;\n        }\n        const checkProperties = opts.strictSchema && !opts.allowMatchingProperties && parentSchema.properties;\n        const valid = gen.name(\"valid\");\n        if (it.props !== true && !(it.props instanceof codegen_1.Name)) {\n            it.props = (0, util_2.evaluatedPropsToName)(gen, it.props);\n        }\n        const { props } = it;\n        validatePatternProperties();\n        function validatePatternProperties() {\n            for (const pat of patterns) {\n                if (checkProperties)\n                    checkMatchingProperties(pat);\n                if (it.allErrors) {\n                    validateProperties(pat);\n                }\n                else {\n                    gen.var(valid, true); // TODO var\n                    validateProperties(pat);\n                    gen.if(valid);\n                }\n            }\n        }\n        function checkMatchingProperties(pat) {\n            for (const prop in checkProperties) {\n                if (new RegExp(pat).test(prop)) {\n                    (0, util_1.checkStrictMode)(it, `property ${prop} matches pattern ${pat} (use allowMatchingProperties)`);\n                }\n            }\n        }\n        function validateProperties(pat) {\n            gen.forIn(\"key\", data, (key) => {\n                gen.if((0, codegen_1._) `${(0, code_1.usePattern)(cxt, pat)}.test(${key})`, () => {\n                    const alwaysValid = alwaysValidPatterns.includes(pat);\n                    if (!alwaysValid) {\n                        cxt.subschema({\n                            keyword: \"patternProperties\",\n                            schemaProp: pat,\n                            dataProp: key,\n                            dataPropType: util_2.Type.Str,\n                        }, valid);\n                    }\n                    if (it.opts.unevaluated && props !== true) {\n                        gen.assign((0, codegen_1._) `${props}[${key}]`, true);\n                    }\n                    else if (!alwaysValid && !it.allErrors) {\n                        // can short-circuit if `unevaluatedProperties` is not supported (opts.next === false)\n                        // or if all properties were evaluated (props === true)\n                        gen.if((0, codegen_1.not)(valid), () => gen.break());\n                    }\n                });\n            });\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=patternProperties.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst items_1 = require(\"./items\");\nconst def = {\n    keyword: \"prefixItems\",\n    type: \"array\",\n    schemaType: [\"array\"],\n    before: \"uniqueItems\",\n    code: (cxt) => (0, items_1.validateTuple)(cxt, \"items\"),\n};\nexports.default = def;\n//# sourceMappingURL=prefixItems.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateAdditionalItems = void 0;\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params: { len } }) => (0, codegen_1.str) `must NOT have more than ${len} items`,\n    params: ({ params: { len } }) => (0, codegen_1._) `{limit: ${len}}`,\n};\nconst def = {\n    keyword: \"additionalItems\",\n    type: \"array\",\n    schemaType: [\"boolean\", \"object\"],\n    before: \"uniqueItems\",\n    error,\n    code(cxt) {\n        const { parentSchema, it } = cxt;\n        const { items } = parentSchema;\n        if (!Array.isArray(items)) {\n            (0, util_1.checkStrictMode)(it, '\"additionalItems\" is ignored when \"items\" is not an array of schemas');\n            return;\n        }\n        validateAdditionalItems(cxt, items);\n    },\n};\nfunction validateAdditionalItems(cxt, items) {\n    const { gen, schema, data, keyword, it } = cxt;\n    it.items = true;\n    const len = gen.const(\"len\", (0, codegen_1._) `${data}.length`);\n    if (schema === false) {\n        cxt.setParams({ len: items.length });\n        cxt.pass((0, codegen_1._) `${len} <= ${items.length}`);\n    }\n    else if (typeof schema == \"object\" && !(0, util_1.alwaysValidSchema)(it, schema)) {\n        const valid = gen.var(\"valid\", (0, codegen_1._) `${len} <= ${items.length}`); // TODO var\n        gen.if((0, codegen_1.not)(valid), () => validateItems(valid));\n        cxt.ok(valid);\n    }\n    function validateItems(valid) {\n        gen.forRange(\"i\", items.length, len, (i) => {\n            cxt.subschema({ keyword, dataProp: i, dataPropType: util_1.Type.Num }, valid);\n            if (!it.allErrors)\n                gen.if((0, codegen_1.not)(valid), () => gen.break());\n        });\n    }\n}\nexports.validateAdditionalItems = validateAdditionalItems;\nexports.default = def;\n//# sourceMappingURL=additionalItems.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateUnion = exports.validateArray = exports.usePattern = exports.callValidateCode = exports.schemaProperties = exports.allSchemaProperties = exports.noPropertyInData = exports.propertyInData = exports.isOwnProperty = exports.hasPropFunc = exports.reportMissingProp = exports.checkMissingProp = exports.checkReportMissingProp = void 0;\nconst codegen_1 = require(\"../compile/codegen\");\nconst util_1 = require(\"../compile/util\");\nconst names_1 = require(\"../compile/names\");\nconst util_2 = require(\"../compile/util\");\nfunction checkReportMissingProp(cxt, prop) {\n    const { gen, data, it } = cxt;\n    gen.if(noPropertyInData(gen, data, prop, it.opts.ownProperties), () => {\n        cxt.setParams({ missingProperty: (0, codegen_1._) `${prop}` }, true);\n        cxt.error();\n    });\n}\nexports.checkReportMissingProp = checkReportMissingProp;\nfunction checkMissingProp({ gen, data, it: { opts } }, properties, missing) {\n    return (0, codegen_1.or)(...properties.map((prop) => (0, codegen_1.and)(noPropertyInData(gen, data, prop, opts.ownProperties), (0, codegen_1._) `${missing} = ${prop}`)));\n}\nexports.checkMissingProp = checkMissingProp;\nfunction reportMissingProp(cxt, missing) {\n    cxt.setParams({ missingProperty: missing }, true);\n    cxt.error();\n}\nexports.reportMissingProp = reportMissingProp;\nfunction hasPropFunc(gen) {\n    return gen.scopeValue(\"func\", {\n        // eslint-disable-next-line @typescript-eslint/unbound-method\n        ref: Object.prototype.hasOwnProperty,\n        code: (0, codegen_1._) `Object.prototype.hasOwnProperty`,\n    });\n}\nexports.hasPropFunc = hasPropFunc;\nfunction isOwnProperty(gen, data, property) {\n    return (0, codegen_1._) `${hasPropFunc(gen)}.call(${data}, ${property})`;\n}\nexports.isOwnProperty = isOwnProperty;\nfunction propertyInData(gen, data, property, ownProperties) {\n    const cond = (0, codegen_1._) `${data}${(0, codegen_1.getProperty)(property)} !== undefined`;\n    return ownProperties ? (0, codegen_1._) `${cond} && ${isOwnProperty(gen, data, property)}` : cond;\n}\nexports.propertyInData = propertyInData;\nfunction noPropertyInData(gen, data, property, ownProperties) {\n    const cond = (0, codegen_1._) `${data}${(0, codegen_1.getProperty)(property)} === undefined`;\n    return ownProperties ? (0, codegen_1.or)(cond, (0, codegen_1.not)(isOwnProperty(gen, data, property))) : cond;\n}\nexports.noPropertyInData = noPropertyInData;\nfunction allSchemaProperties(schemaMap) {\n    return schemaMap ? Object.keys(schemaMap).filter((p) => p !== \"__proto__\") : [];\n}\nexports.allSchemaProperties = allSchemaProperties;\nfunction schemaProperties(it, schemaMap) {\n    return allSchemaProperties(schemaMap).filter((p) => !(0, util_1.alwaysValidSchema)(it, schemaMap[p]));\n}\nexports.schemaProperties = schemaProperties;\nfunction callValidateCode({ schemaCode, data, it: { gen, topSchemaRef, schemaPath, errorPath }, it }, func, context, passSchema) {\n    const dataAndSchema = passSchema ? (0, codegen_1._) `${schemaCode}, ${data}, ${topSchemaRef}${schemaPath}` : data;\n    const valCxt = [\n        [names_1.default.instancePath, (0, codegen_1.strConcat)(names_1.default.instancePath, errorPath)],\n        [names_1.default.parentData, it.parentData],\n        [names_1.default.parentDataProperty, it.parentDataProperty],\n        [names_1.default.rootData, names_1.default.rootData],\n    ];\n    if (it.opts.dynamicRef)\n        valCxt.push([names_1.default.dynamicAnchors, names_1.default.dynamicAnchors]);\n    const args = (0, codegen_1._) `${dataAndSchema}, ${gen.object(...valCxt)}`;\n    return context !== codegen_1.nil ? (0, codegen_1._) `${func}.call(${context}, ${args})` : (0, codegen_1._) `${func}(${args})`;\n}\nexports.callValidateCode = callValidateCode;\nconst newRegExp = (0, codegen_1._) `new RegExp`;\nfunction usePattern({ gen, it: { opts } }, pattern) {\n    const u = opts.unicodeRegExp ? \"u\" : \"\";\n    const { regExp } = opts.code;\n    const rx = regExp(pattern, u);\n    return gen.scopeValue(\"pattern\", {\n        key: rx.toString(),\n        ref: rx,\n        code: (0, codegen_1._) `${regExp.code === \"new RegExp\" ? newRegExp : (0, util_2.useFunc)(gen, regExp)}(${pattern}, ${u})`,\n    });\n}\nexports.usePattern = usePattern;\nfunction validateArray(cxt) {\n    const { gen, data, keyword, it } = cxt;\n    const valid = gen.name(\"valid\");\n    if (it.allErrors) {\n        const validArr = gen.let(\"valid\", true);\n        validateItems(() => gen.assign(validArr, false));\n        return validArr;\n    }\n    gen.var(valid, true);\n    validateItems(() => gen.break());\n    return valid;\n    function validateItems(notValid) {\n        const len = gen.const(\"len\", (0, codegen_1._) `${data}.length`);\n        gen.forRange(\"i\", 0, len, (i) => {\n            cxt.subschema({\n                keyword,\n                dataProp: i,\n                dataPropType: util_1.Type.Num,\n            }, valid);\n            gen.if((0, codegen_1.not)(valid), notValid);\n        });\n    }\n}\nexports.validateArray = validateArray;\nfunction validateUnion(cxt) {\n    const { gen, schema, keyword, it } = cxt;\n    /* istanbul ignore if */\n    if (!Array.isArray(schema))\n        throw new Error(\"ajv implementation error\");\n    const alwaysValid = schema.some((sch) => (0, util_1.alwaysValidSchema)(it, sch));\n    if (alwaysValid && !it.opts.unevaluated)\n        return;\n    const valid = gen.let(\"valid\", false);\n    const schValid = gen.name(\"_valid\");\n    gen.block(() => schema.forEach((_sch, i) => {\n        const schCxt = cxt.subschema({\n            keyword,\n            schemaProp: i,\n            compositeRule: true,\n        }, schValid);\n        gen.assign(valid, (0, codegen_1._) `${valid} || ${schValid}`);\n        const merged = cxt.mergeValidEvaluated(schCxt, schValid);\n        // can short-circuit if `unevaluatedProperties/Items` not supported (opts.unevaluated !== true)\n        // or if all properties and items were evaluated (it.props === true && it.items === true)\n        if (!merged)\n            gen.if((0, codegen_1.not)(valid));\n    }));\n    cxt.result(valid, () => cxt.reset(), () => cxt.error(true));\n}\nexports.validateUnion = validateUnion;\n//# sourceMappingURL=code.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util_1 = require(\"../../compile/util\");\nconst def = {\n    keyword: \"allOf\",\n    schemaType: \"array\",\n    code(cxt) {\n        const { gen, schema, it } = cxt;\n        /* istanbul ignore if */\n        if (!Array.isArray(schema))\n            throw new Error(\"ajv implementation error\");\n        const valid = gen.name(\"valid\");\n        schema.forEach((sch, i) => {\n            if ((0, util_1.alwaysValidSchema)(it, sch))\n                return;\n            const schCxt = cxt.subschema({ keyword: \"allOf\", schemaProp: i }, valid);\n            cxt.ok(valid);\n            cxt.mergeEvaluated(schCxt);\n        });\n    },\n};\nexports.default = def;\n//# sourceMappingURL=allOf.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst ops = codegen_1.operators;\nconst KWDs = {\n    maximum: { okStr: \"<=\", ok: ops.LTE, fail: ops.GT },\n    minimum: { okStr: \">=\", ok: ops.GTE, fail: ops.LT },\n    exclusiveMaximum: { okStr: \"<\", ok: ops.LT, fail: ops.GTE },\n    exclusiveMinimum: { okStr: \">\", ok: ops.GT, fail: ops.LTE },\n};\nconst error = {\n    message: ({ keyword, schemaCode }) => (0, codegen_1.str) `must be ${KWDs[keyword].okStr} ${schemaCode}`,\n    params: ({ keyword, schemaCode }) => (0, codegen_1._) `{comparison: ${KWDs[keyword].okStr}, limit: ${schemaCode}}`,\n};\nconst def = {\n    keyword: Object.keys(KWDs),\n    type: \"number\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { keyword, data, schemaCode } = cxt;\n        cxt.fail$data((0, codegen_1._) `${data} ${KWDs[keyword].fail} ${schemaCode} || isNaN(${data})`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=limitNumber.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst uri = require(\"fast-uri\");\nuri.code = 'require(\"ajv/dist/runtime/uri\").default';\nexports.default = uri;\n//# sourceMappingURL=uri.js.map","import * as vscode from 'vscode';\n\nexport class TextProcessor {\n    \n    captureEditorText(): { success: boolean; text?: string; error?: string } {\n        const activeEditor = vscode.window.activeTextEditor;\n        \n        if (!activeEditor) {\n            return { success: false, error: 'No active editor found' };\n        }\n\n        const document = activeEditor.document;\n        const selection = activeEditor.selection;\n\n        // If there's a selection, use that; otherwise use the entire document\n        let text: string;\n        if (!selection.isEmpty) {\n            text = document.getText(selection);\n        } else {\n            text = document.getText();\n        }\n\n        if (text.trim() === '') {\n            return { success: false, error: 'No text to process' };\n        }\n\n        return { success: true, text };\n    }\n\n    async replaceEditorText(newText: string): Promise<{ success: boolean; error?: string }> {\n        const activeEditor = vscode.window.activeTextEditor;\n        \n        if (!activeEditor) {\n            return { success: false, error: 'No active editor found' };\n        }\n\n        const document = activeEditor.document;\n        const selection = activeEditor.selection;\n\n        try {\n            await activeEditor.edit(editBuilder => {\n                if (!selection.isEmpty) {\n                    // Replace selected text\n                    editBuilder.replace(selection, newText);\n                } else {\n                    // Replace entire document\n                    const fullRange = new vscode.Range(\n                        document.positionAt(0),\n                        document.positionAt(document.getText().length)\n                    );\n                    editBuilder.replace(fullRange, newText);\n                }\n            });\n\n            return { success: true };\n        } catch (error) {\n            return { \n                success: false, \n                error: error instanceof Error ? error.message : 'Failed to replace text' \n            };\n        }\n    }\n\n    getEditorState(): { \n        hasActiveEditor: boolean; \n        hasSelection: boolean; \n        isReadOnly: boolean;\n        documentLength: number;\n    } {\n        const activeEditor = vscode.window.activeTextEditor;\n        \n        if (!activeEditor) {\n            return {\n                hasActiveEditor: false,\n                hasSelection: false,\n                isReadOnly: true,\n                documentLength: 0\n            };\n        }\n\n        return {\n            hasActiveEditor: true,\n            hasSelection: !activeEditor.selection.isEmpty,\n            isReadOnly: activeEditor.document.uri.scheme === 'untitled' ? false : activeEditor.document.isUntitled,\n            documentLength: activeEditor.document.getText().length\n        };\n    }\n\n    async createUndoPoint(description: string): Promise<void> {\n        const activeEditor = vscode.window.activeTextEditor;\n        if (activeEditor) {\n            // VSCode automatically creates undo points for edit operations\n            // This method is here for potential future enhancements\n            await vscode.commands.executeCommand('workbench.action.files.save');\n        }\n    }\n}","import { CorrectionResponse } from '../models/CorrectionResponse';\nimport { ValidationService } from './ValidationService';\n\nexport interface APIResponse {\n    choices: Array<{\n        message: {\n            content: string;\n        };\n    }>;\n}\n\nexport class ResponseParser {\n    private validationService: ValidationService;\n\n    constructor() {\n        this.validationService = new ValidationService();\n    }\n\n    parseResponse(apiResponse: APIResponse): { success: boolean; data?: CorrectionResponse; error?: string } {\n        try {\n            if (!apiResponse.choices || apiResponse.choices.length === 0) {\n                return { success: false, error: 'No response choices available' };\n            }\n\n            const content = apiResponse.choices[0].message.content;\n            if (!content) {\n                return { success: false, error: 'Empty response content' };\n            }\n\n            // Try to parse JSON from the response\n            let parsedContent: any;\n            try {\n                // Sometimes the response might have extra text around the JSON, so we try to extract it\n                const jsonMatch = content.match(/\\{[\\s\\S]*\\}/);\n                if (jsonMatch) {\n                    parsedContent = JSON.parse(jsonMatch[0]);\n                } else {\n                    parsedContent = JSON.parse(content);\n                }\n            } catch (parseError) {\n                return { success: false, error: 'Failed to parse JSON response' };\n            }\n\n            // Validate the parsed content against our schema\n            const validation = this.validationService.validateCorrectionResponse(parsedContent);\n            if (!validation.isValid) {\n                return { \n                    success: false, \n                    error: `Invalid response format: ${validation.errors?.join(', ')}` \n                };\n            }\n\n            return { success: true, data: parsedContent as CorrectionResponse };\n        } catch (error) {\n            return { \n                success: false, \n                error: error instanceof Error ? error.message : 'Unknown parsing error' \n            };\n        }\n    }\n}","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst core_1 = require(\"./core\");\nconst validation_1 = require(\"./validation\");\nconst applicator_1 = require(\"./applicator\");\nconst format_1 = require(\"./format\");\nconst metadata_1 = require(\"./metadata\");\nconst draft7Vocabularies = [\n    core_1.default,\n    validation_1.default,\n    (0, applicator_1.default)(),\n    format_1.default,\n    metadata_1.metadataVocabulary,\n    metadata_1.contentVocabulary,\n];\nexports.default = draft7Vocabularies;\n//# sourceMappingURL=draft7.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: \"must match exactly one schema in oneOf\",\n    params: ({ params }) => (0, codegen_1._) `{passingSchemas: ${params.passing}}`,\n};\nconst def = {\n    keyword: \"oneOf\",\n    schemaType: \"array\",\n    trackErrors: true,\n    error,\n    code(cxt) {\n        const { gen, schema, parentSchema, it } = cxt;\n        /* istanbul ignore if */\n        if (!Array.isArray(schema))\n            throw new Error(\"ajv implementation error\");\n        if (it.opts.discriminator && parentSchema.discriminator)\n            return;\n        const schArr = schema;\n        const valid = gen.let(\"valid\", false);\n        const passing = gen.let(\"passing\", null);\n        const schValid = gen.name(\"_valid\");\n        cxt.setParams({ passing });\n        // TODO possibly fail straight away (with warning or exception) if there are two empty always valid schemas\n        gen.block(validateOneOf);\n        cxt.result(valid, () => cxt.reset(), () => cxt.error(true));\n        function validateOneOf() {\n            schArr.forEach((sch, i) => {\n                let schCxt;\n                if ((0, util_1.alwaysValidSchema)(it, sch)) {\n                    gen.var(schValid, true);\n                }\n                else {\n                    schCxt = cxt.subschema({\n                        keyword: \"oneOf\",\n                        schemaProp: i,\n                        compositeRule: true,\n                    }, schValid);\n                }\n                if (i > 0) {\n                    gen\n                        .if((0, codegen_1._) `${schValid} && ${valid}`)\n                        .assign(valid, false)\n                        .assign(passing, (0, codegen_1._) `[${passing}, ${i}]`)\n                        .else();\n                }\n                gen.if(schValid, () => {\n                    gen.assign(valid, true);\n                    gen.assign(passing, i);\n                    if (schCxt)\n                        cxt.mergeEvaluated(schCxt, codegen_1.Name);\n                });\n            });\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=oneOf.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// https://github.com/ajv-validator/ajv/issues/889\nconst equal = require(\"fast-deep-equal\");\nequal.code = 'require(\"ajv/dist/runtime/equal\").default';\nexports.default = equal;\n//# sourceMappingURL=equal.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst additionalItems_1 = require(\"./additionalItems\");\nconst prefixItems_1 = require(\"./prefixItems\");\nconst items_1 = require(\"./items\");\nconst items2020_1 = require(\"./items2020\");\nconst contains_1 = require(\"./contains\");\nconst dependencies_1 = require(\"./dependencies\");\nconst propertyNames_1 = require(\"./propertyNames\");\nconst additionalProperties_1 = require(\"./additionalProperties\");\nconst properties_1 = require(\"./properties\");\nconst patternProperties_1 = require(\"./patternProperties\");\nconst not_1 = require(\"./not\");\nconst anyOf_1 = require(\"./anyOf\");\nconst oneOf_1 = require(\"./oneOf\");\nconst allOf_1 = require(\"./allOf\");\nconst if_1 = require(\"./if\");\nconst thenElse_1 = require(\"./thenElse\");\nfunction getApplicator(draft2020 = false) {\n    const applicator = [\n        // any\n        not_1.default,\n        anyOf_1.default,\n        oneOf_1.default,\n        allOf_1.default,\n        if_1.default,\n        thenElse_1.default,\n        // object\n        propertyNames_1.default,\n        additionalProperties_1.default,\n        dependencies_1.default,\n        properties_1.default,\n        patternProperties_1.default,\n    ];\n    // array\n    if (draft2020)\n        applicator.push(prefixItems_1.default, items2020_1.default);\n    else\n        applicator.push(additionalItems_1.default, items_1.default);\n    applicator.push(contains_1.default);\n    return applicator;\n}\nexports.default = getApplicator;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst def = {\n    keyword: \"anyOf\",\n    schemaType: \"array\",\n    trackErrors: true,\n    code: code_1.validateUnion,\n    error: { message: \"must match a schema in anyOf\" },\n};\nexports.default = def;\n//# sourceMappingURL=anyOf.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst types_1 = require(\"../discriminator/types\");\nconst compile_1 = require(\"../../compile\");\nconst ref_error_1 = require(\"../../compile/ref_error\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params: { discrError, tagName } }) => discrError === types_1.DiscrError.Tag\n        ? `tag \"${tagName}\" must be string`\n        : `value of tag \"${tagName}\" must be in oneOf`,\n    params: ({ params: { discrError, tag, tagName } }) => (0, codegen_1._) `{error: ${discrError}, tag: ${tagName}, tagValue: ${tag}}`,\n};\nconst def = {\n    keyword: \"discriminator\",\n    type: \"object\",\n    schemaType: \"object\",\n    error,\n    code(cxt) {\n        const { gen, data, schema, parentSchema, it } = cxt;\n        const { oneOf } = parentSchema;\n        if (!it.opts.discriminator) {\n            throw new Error(\"discriminator: requires discriminator option\");\n        }\n        const tagName = schema.propertyName;\n        if (typeof tagName != \"string\")\n            throw new Error(\"discriminator: requires propertyName\");\n        if (schema.mapping)\n            throw new Error(\"discriminator: mapping is not supported\");\n        if (!oneOf)\n            throw new Error(\"discriminator: requires oneOf keyword\");\n        const valid = gen.let(\"valid\", false);\n        const tag = gen.const(\"tag\", (0, codegen_1._) `${data}${(0, codegen_1.getProperty)(tagName)}`);\n        gen.if((0, codegen_1._) `typeof ${tag} == \"string\"`, () => validateMapping(), () => cxt.error(false, { discrError: types_1.DiscrError.Tag, tag, tagName }));\n        cxt.ok(valid);\n        function validateMapping() {\n            const mapping = getMapping();\n            gen.if(false);\n            for (const tagValue in mapping) {\n                gen.elseIf((0, codegen_1._) `${tag} === ${tagValue}`);\n                gen.assign(valid, applyTagSchema(mapping[tagValue]));\n            }\n            gen.else();\n            cxt.error(false, { discrError: types_1.DiscrError.Mapping, tag, tagName });\n            gen.endIf();\n        }\n        function applyTagSchema(schemaProp) {\n            const _valid = gen.name(\"valid\");\n            const schCxt = cxt.subschema({ keyword: \"oneOf\", schemaProp }, _valid);\n            cxt.mergeEvaluated(schCxt, codegen_1.Name);\n            return _valid;\n        }\n        function getMapping() {\n            var _a;\n            const oneOfMapping = {};\n            const topRequired = hasRequired(parentSchema);\n            let tagRequired = true;\n            for (let i = 0; i < oneOf.length; i++) {\n                let sch = oneOf[i];\n                if ((sch === null || sch === void 0 ? void 0 : sch.$ref) && !(0, util_1.schemaHasRulesButRef)(sch, it.self.RULES)) {\n                    const ref = sch.$ref;\n                    sch = compile_1.resolveRef.call(it.self, it.schemaEnv.root, it.baseId, ref);\n                    if (sch instanceof compile_1.SchemaEnv)\n                        sch = sch.schema;\n                    if (sch === undefined)\n                        throw new ref_error_1.default(it.opts.uriResolver, it.baseId, ref);\n                }\n                const propSch = (_a = sch === null || sch === void 0 ? void 0 : sch.properties) === null || _a === void 0 ? void 0 : _a[tagName];\n                if (typeof propSch != \"object\") {\n                    throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have \"properties/${tagName}\"`);\n                }\n                tagRequired = tagRequired && (topRequired || hasRequired(sch));\n                addMappings(propSch, i);\n            }\n            if (!tagRequired)\n                throw new Error(`discriminator: \"${tagName}\" must be required`);\n            return oneOfMapping;\n            function hasRequired({ required }) {\n                return Array.isArray(required) && required.includes(tagName);\n            }\n            function addMappings(sch, i) {\n                if (sch.const) {\n                    addMapping(sch.const, i);\n                }\n                else if (sch.enum) {\n                    for (const tagValue of sch.enum) {\n                        addMapping(tagValue, i);\n                    }\n                }\n                else {\n                    throw new Error(`discriminator: \"properties/${tagName}\" must have \"const\" or \"enum\"`);\n                }\n            }\n            function addMapping(tagValue, i) {\n                if (typeof tagValue != \"string\" || tagValue in oneOfMapping) {\n                    throw new Error(`discriminator: \"${tagName}\" values must be unique strings`);\n                }\n                oneOfMapping[tagValue] = i;\n            }\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getSchemaRefs = exports.resolveUrl = exports.normalizeId = exports._getFullPath = exports.getFullPath = exports.inlineRef = void 0;\nconst util_1 = require(\"./util\");\nconst equal = require(\"fast-deep-equal\");\nconst traverse = require(\"json-schema-traverse\");\n// TODO refactor to use keyword definitions\nconst SIMPLE_INLINED = new Set([\n    \"type\",\n    \"format\",\n    \"pattern\",\n    \"maxLength\",\n    \"minLength\",\n    \"maxProperties\",\n    \"minProperties\",\n    \"maxItems\",\n    \"minItems\",\n    \"maximum\",\n    \"minimum\",\n    \"uniqueItems\",\n    \"multipleOf\",\n    \"required\",\n    \"enum\",\n    \"const\",\n]);\nfunction inlineRef(schema, limit = true) {\n    if (typeof schema == \"boolean\")\n        return true;\n    if (limit === true)\n        return !hasRef(schema);\n    if (!limit)\n        return false;\n    return countKeys(schema) <= limit;\n}\nexports.inlineRef = inlineRef;\nconst REF_KEYWORDS = new Set([\n    \"$ref\",\n    \"$recursiveRef\",\n    \"$recursiveAnchor\",\n    \"$dynamicRef\",\n    \"$dynamicAnchor\",\n]);\nfunction hasRef(schema) {\n    for (const key in schema) {\n        if (REF_KEYWORDS.has(key))\n            return true;\n        const sch = schema[key];\n        if (Array.isArray(sch) && sch.some(hasRef))\n            return true;\n        if (typeof sch == \"object\" && hasRef(sch))\n            return true;\n    }\n    return false;\n}\nfunction countKeys(schema) {\n    let count = 0;\n    for (const key in schema) {\n        if (key === \"$ref\")\n            return Infinity;\n        count++;\n        if (SIMPLE_INLINED.has(key))\n            continue;\n        if (typeof schema[key] == \"object\") {\n            (0, util_1.eachItem)(schema[key], (sch) => (count += countKeys(sch)));\n        }\n        if (count === Infinity)\n            return Infinity;\n    }\n    return count;\n}\nfunction getFullPath(resolver, id = \"\", normalize) {\n    if (normalize !== false)\n        id = normalizeId(id);\n    const p = resolver.parse(id);\n    return _getFullPath(resolver, p);\n}\nexports.getFullPath = getFullPath;\nfunction _getFullPath(resolver, p) {\n    const serialized = resolver.serialize(p);\n    return serialized.split(\"#\")[0] + \"#\";\n}\nexports._getFullPath = _getFullPath;\nconst TRAILING_SLASH_HASH = /#\\/?$/;\nfunction normalizeId(id) {\n    return id ? id.replace(TRAILING_SLASH_HASH, \"\") : \"\";\n}\nexports.normalizeId = normalizeId;\nfunction resolveUrl(resolver, baseId, id) {\n    id = normalizeId(id);\n    return resolver.resolve(baseId, id);\n}\nexports.resolveUrl = resolveUrl;\nconst ANCHOR = /^[a-z_][-a-z0-9._]*$/i;\nfunction getSchemaRefs(schema, baseId) {\n    if (typeof schema == \"boolean\")\n        return {};\n    const { schemaId, uriResolver } = this.opts;\n    const schId = normalizeId(schema[schemaId] || baseId);\n    const baseIds = { \"\": schId };\n    const pathPrefix = getFullPath(uriResolver, schId, false);\n    const localRefs = {};\n    const schemaRefs = new Set();\n    traverse(schema, { allKeys: true }, (sch, jsonPtr, _, parentJsonPtr) => {\n        if (parentJsonPtr === undefined)\n            return;\n        const fullPath = pathPrefix + jsonPtr;\n        let innerBaseId = baseIds[parentJsonPtr];\n        if (typeof sch[schemaId] == \"string\")\n            innerBaseId = addRef.call(this, sch[schemaId]);\n        addAnchor.call(this, sch.$anchor);\n        addAnchor.call(this, sch.$dynamicAnchor);\n        baseIds[jsonPtr] = innerBaseId;\n        function addRef(ref) {\n            // eslint-disable-next-line @typescript-eslint/unbound-method\n            const _resolve = this.opts.uriResolver.resolve;\n            ref = normalizeId(innerBaseId ? _resolve(innerBaseId, ref) : ref);\n            if (schemaRefs.has(ref))\n                throw ambiguos(ref);\n            schemaRefs.add(ref);\n            let schOrRef = this.refs[ref];\n            if (typeof schOrRef == \"string\")\n                schOrRef = this.refs[schOrRef];\n            if (typeof schOrRef == \"object\") {\n                checkAmbiguosRef(sch, schOrRef.schema, ref);\n            }\n            else if (ref !== normalizeId(fullPath)) {\n                if (ref[0] === \"#\") {\n                    checkAmbiguosRef(sch, localRefs[ref], ref);\n                    localRefs[ref] = sch;\n                }\n                else {\n                    this.refs[ref] = fullPath;\n                }\n            }\n            return ref;\n        }\n        function addAnchor(anchor) {\n            if (typeof anchor == \"string\") {\n                if (!ANCHOR.test(anchor))\n                    throw new Error(`invalid anchor \"${anchor}\"`);\n                addRef.call(this, `#${anchor}`);\n            }\n        }\n    });\n    return localRefs;\n    function checkAmbiguosRef(sch1, sch2, ref) {\n        if (sch2 !== undefined && !equal(sch1, sch2))\n            throw ambiguos(ref);\n    }\n    function ambiguos(ref) {\n        return new Error(`reference \"${ref}\" resolves to more than one schema`);\n    }\n}\nexports.getSchemaRefs = getSchemaRefs;\n//# sourceMappingURL=resolve.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst limitNumber_1 = require(\"./limitNumber\");\nconst multipleOf_1 = require(\"./multipleOf\");\nconst limitLength_1 = require(\"./limitLength\");\nconst pattern_1 = require(\"./pattern\");\nconst limitProperties_1 = require(\"./limitProperties\");\nconst required_1 = require(\"./required\");\nconst limitItems_1 = require(\"./limitItems\");\nconst uniqueItems_1 = require(\"./uniqueItems\");\nconst const_1 = require(\"./const\");\nconst enum_1 = require(\"./enum\");\nconst validation = [\n    // number\n    limitNumber_1.default,\n    multipleOf_1.default,\n    // string\n    limitLength_1.default,\n    pattern_1.default,\n    // object\n    limitProperties_1.default,\n    required_1.default,\n    // array\n    limitItems_1.default,\n    uniqueItems_1.default,\n    // any\n    { keyword: \"type\", schemaType: [\"string\", \"array\"] },\n    { keyword: \"nullable\", schemaType: \"boolean\" },\n    const_1.default,\n    enum_1.default,\n];\nexports.default = validation;\n//# sourceMappingURL=index.js.map","'use strict';\n\nvar traverse = module.exports = function (schema, opts, cb) {\n  // Legacy support for v0.3.1 and earlier.\n  if (typeof opts == 'function') {\n    cb = opts;\n    opts = {};\n  }\n\n  cb = opts.cb || cb;\n  var pre = (typeof cb == 'function') ? cb : cb.pre || function() {};\n  var post = cb.post || function() {};\n\n  _traverse(opts, pre, post, schema, '', schema);\n};\n\n\ntraverse.keywords = {\n  additionalItems: true,\n  items: true,\n  contains: true,\n  additionalProperties: true,\n  propertyNames: true,\n  not: true,\n  if: true,\n  then: true,\n  else: true\n};\n\ntraverse.arrayKeywords = {\n  items: true,\n  allOf: true,\n  anyOf: true,\n  oneOf: true\n};\n\ntraverse.propsKeywords = {\n  $defs: true,\n  definitions: true,\n  properties: true,\n  patternProperties: true,\n  dependencies: true\n};\n\ntraverse.skipKeywords = {\n  default: true,\n  enum: true,\n  const: true,\n  required: true,\n  maximum: true,\n  minimum: true,\n  exclusiveMaximum: true,\n  exclusiveMinimum: true,\n  multipleOf: true,\n  maxLength: true,\n  minLength: true,\n  pattern: true,\n  format: true,\n  maxItems: true,\n  minItems: true,\n  uniqueItems: true,\n  maxProperties: true,\n  minProperties: true\n};\n\n\nfunction _traverse(opts, pre, post, schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex) {\n  if (schema && typeof schema == 'object' && !Array.isArray(schema)) {\n    pre(schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex);\n    for (var key in schema) {\n      var sch = schema[key];\n      if (Array.isArray(sch)) {\n        if (key in traverse.arrayKeywords) {\n          for (var i=0; i<sch.length; i++)\n            _traverse(opts, pre, post, sch[i], jsonPtr + '/' + key + '/' + i, rootSchema, jsonPtr, key, schema, i);\n        }\n      } else if (key in traverse.propsKeywords) {\n        if (sch && typeof sch == 'object') {\n          for (var prop in sch)\n            _traverse(opts, pre, post, sch[prop], jsonPtr + '/' + key + '/' + escapeJsonPtr(prop), rootSchema, jsonPtr, key, schema, prop);\n        }\n      } else if (key in traverse.keywords || (opts.allKeys && !(key in traverse.skipKeywords))) {\n        _traverse(opts, pre, post, sch, jsonPtr + '/' + key, rootSchema, jsonPtr, key, schema);\n      }\n    }\n    post(schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex);\n  }\n}\n\n\nfunction escapeJsonPtr(str) {\n  return str.replace(/~/g, '~0').replace(/\\//g, '~1');\n}\n","import Blob from './index.js'\n\nconst _File = class File extends Blob {\n  #lastModified = 0\n  #name = ''\n\n  /**\n   * @param {*[]} fileBits\n   * @param {string} fileName\n   * @param {{lastModified?: number, type?: string}} options\n   */// @ts-ignore\n  constructor (fileBits, fileName, options = {}) {\n    if (arguments.length < 2) {\n      throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`)\n    }\n    super(fileBits, options)\n\n    if (options === null) options = {}\n\n    // Simulate WebIDL type casting for NaN value in lastModified option.\n    const lastModified = options.lastModified === undefined ? Date.now() : Number(options.lastModified)\n    if (!Number.isNaN(lastModified)) {\n      this.#lastModified = lastModified\n    }\n\n    this.#name = String(fileName)\n  }\n\n  get name () {\n    return this.#name\n  }\n\n  get lastModified () {\n    return this.#lastModified\n  }\n\n  get [Symbol.toStringTag] () {\n    return 'File'\n  }\n\n  static [Symbol.hasInstance] (object) {\n    return !!object && object instanceof Blob &&\n      /^(File)$/.test(object[Symbol.toStringTag])\n  }\n}\n\n/** @type {typeof globalThis.File} */// @ts-ignore\nexport const File = _File\nexport default File\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst ucs2length_1 = require(\"../../runtime/ucs2length\");\nconst error = {\n    message({ keyword, schemaCode }) {\n        const comp = keyword === \"maxLength\" ? \"more\" : \"fewer\";\n        return (0, codegen_1.str) `must NOT have ${comp} than ${schemaCode} characters`;\n    },\n    params: ({ schemaCode }) => (0, codegen_1._) `{limit: ${schemaCode}}`,\n};\nconst def = {\n    keyword: [\"maxLength\", \"minLength\"],\n    type: \"string\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { keyword, data, schemaCode, it } = cxt;\n        const op = keyword === \"maxLength\" ? codegen_1.operators.GT : codegen_1.operators.LT;\n        const len = it.opts.unicode === false ? (0, codegen_1._) `${data}.length` : (0, codegen_1._) `${(0, util_1.useFunc)(cxt.gen, ucs2length_1.default)}(${data})`;\n        cxt.fail$data((0, codegen_1._) `${len} ${op} ${schemaCode}`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=limitLength.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst format_1 = require(\"./format\");\nconst format = [format_1.default];\nexports.default = format;\n//# sourceMappingURL=index.js.map","import { CorrectionType } from '../models/CorrectionType';\nimport { CustomPrompt } from '../models/ExtensionConfiguration';\nimport { ConfigurationProvider } from './ConfigurationProvider';\n\nexport class PromptManager {\n    private configProvider: ConfigurationProvider;\n    private defaultPrompts: Map<CorrectionType, string> = new Map();\n\n    constructor() {\n        this.configProvider = new ConfigurationProvider();\n        this.initializeDefaultPrompts();\n    }\n\n    private initializeDefaultPrompts(): void {\n        this.defaultPrompts = new Map([\n            [CorrectionType.GRAMMAR, \n                'Please correct any grammatical errors in the following text. Focus on:\\n' +\n                '- Subject-verb agreement\\n' +\n                '- Verb tenses and consistency\\n' +\n                '- Punctuation and capitalization\\n' +\n                '- Sentence structure\\n' +\n                'Preserve the original meaning and style.'\n            ],\n            [CorrectionType.STYLE, \n                'Please improve the writing style of the following text. Focus on:\\n' +\n                '- Word choice and vocabulary\\n' +\n                '- Sentence variety and flow\\n' +\n                '- Clarity and conciseness\\n' +\n                '- Professional tone\\n' +\n                'Maintain the author\\'s voice while enhancing readability.'\n            ],\n            [CorrectionType.CLARITY, \n                'Please improve the clarity and readability of the following text. Focus on:\\n' +\n                '- Simplifying complex sentences\\n' +\n                '- Removing ambiguity\\n' +\n                '- Improving logical flow\\n' +\n                '- Making concepts more understandable\\n' +\n                'Ensure the message is clear and accessible.'\n            ],\n            [CorrectionType.TONE, \n                'Please adjust the tone of the following text to be more appropriate. Focus on:\\n' +\n                '- Consistency in formality level\\n' +\n                '- Appropriate voice for the audience\\n' +\n                '- Professional yet engaging language\\n' +\n                '- Removing inappropriate or inconsistent tone\\n' +\n                'Maintain the core message while improving tone.'\n            ]\n        ]);\n    }\n\n    getPrompt(correctionType: CorrectionType, customPromptName?: string): string {\n        // If a custom prompt name is provided, try to find it\n        if (customPromptName) {\n            const customPrompt = this.getCustomPrompt(customPromptName);\n            if (customPrompt) {\n                return customPrompt.prompt;\n            }\n        }\n\n        // Get configured prompt from settings first, fallback to built-in default\n        const defaultPrompts = this.configProvider.getDefaultPromptConfiguration();\n        return defaultPrompts[correctionType] || this.defaultPrompts.get(correctionType) || 'Please improve the following text.';\n    }\n\n    getCustomPrompt(name: string): CustomPrompt | undefined {\n        const config = this.configProvider.getConfiguration();\n        return config.customPrompts.find(prompt => prompt.name === name);\n    }\n\n    async addCustomPrompt(prompt: CustomPrompt): Promise<{ success: boolean; error?: string }> {\n        try {\n            const config = this.configProvider.getConfiguration();\n            \n            // Check if prompt with same name already exists\n            const existingIndex = config.customPrompts.findIndex(p => p.name === prompt.name);\n            \n            if (existingIndex >= 0) {\n                // Update existing prompt\n                config.customPrompts[existingIndex] = prompt;\n            } else {\n                // Add new prompt\n                config.customPrompts.push(prompt);\n            }\n\n            await this.configProvider.updateConfiguration('customPrompts', config.customPrompts);\n            return { success: true };\n        } catch (error) {\n            return { \n                success: false, \n                error: error instanceof Error ? error.message : 'Failed to save custom prompt' \n            };\n        }\n    }\n\n    async removeCustomPrompt(name: string): Promise<{ success: boolean; error?: string }> {\n        try {\n            const config = this.configProvider.getConfiguration();\n            const filteredPrompts = config.customPrompts.filter(prompt => prompt.name !== name);\n            \n            if (filteredPrompts.length === config.customPrompts.length) {\n                return { success: false, error: 'Custom prompt not found' };\n            }\n\n            await this.configProvider.updateConfiguration('customPrompts', filteredPrompts);\n            return { success: true };\n        } catch (error) {\n            return { \n                success: false, \n                error: error instanceof Error ? error.message : 'Failed to remove custom prompt' \n            };\n        }\n    }\n\n    getAllCustomPrompts(): CustomPrompt[] {\n        const config = this.configProvider.getConfiguration();\n        return config.customPrompts;\n    }\n\n    getDefaultPrompts(): Array<{ type: CorrectionType; prompt: string }> {\n        return Array.from(this.defaultPrompts.entries()).map(([type, prompt]) => ({\n            type,\n            prompt\n        }));\n    }\n\n    validatePrompt(prompt: CustomPrompt): { isValid: boolean; errors: string[] } {\n        const errors: string[] = [];\n\n        if (!prompt.name || prompt.name.trim() === '') {\n            errors.push('Prompt name is required');\n        }\n\n        if (!prompt.prompt || prompt.prompt.trim() === '') {\n            errors.push('Prompt content is required');\n        }\n\n        if (!prompt.correctionType || prompt.correctionType.trim() === '') {\n            errors.push('Correction type is required');\n        }\n\n        // Check if name contains only valid characters\n        if (prompt.name && !/^[a-zA-Z0-9\\s\\-_]+$/.test(prompt.name)) {\n            errors.push('Prompt name can only contain letters, numbers, spaces, hyphens, and underscores');\n        }\n\n        return {\n            isValid: errors.length === 0,\n            errors\n        };\n    }\n\n    async updateDefaultPrompt(correctionType: CorrectionType, prompt: string): Promise<{ success: boolean; error?: string }> {\n        return await this.configProvider.updateDefaultPrompt(correctionType, prompt);\n    }\n\n    async resetDefaultPrompt(correctionType: CorrectionType): Promise<{ success: boolean; error?: string }> {\n        return await this.configProvider.resetDefaultPrompt(correctionType);\n    }\n\n    getConfiguredDefaultPrompt(correctionType: CorrectionType): string {\n        const defaultPrompts = this.configProvider.getDefaultPromptConfiguration();\n        return defaultPrompts[correctionType] || this.defaultPrompts.get(correctionType) || 'Please improve the following text.';\n    }\n\n    getBuiltInDefaultPrompt(correctionType: CorrectionType): string {\n        return this.defaultPrompts.get(correctionType) || 'Please improve the following text.';\n    }\n}","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DiscrError = void 0;\nvar DiscrError;\n(function (DiscrError) {\n    DiscrError[\"Tag\"] = \"tag\";\n    DiscrError[\"Mapping\"] = \"mapping\";\n})(DiscrError || (exports.DiscrError = DiscrError = {}));\n//# sourceMappingURL=types.js.map","export const correctionResponseSchema = {\n    type: \"object\",\n    properties: {\n        correctedText: {\n            type: \"string\"\n        },\n        explanation: {\n            type: \"string\"\n        },\n        changes: {\n            type: \"array\",\n            items: {\n                type: \"object\",\n                properties: {\n                    original: { type: \"string\" },\n                    corrected: { type: \"string\" },\n                    reason: { type: \"string\" },\n                    position: {\n                        type: \"object\",\n                        properties: {\n                            start: { type: \"number\" },\n                            end: { type: \"number\" }\n                        },\n                        required: [\"start\", \"end\"]\n                    }\n                },\n                required: [\"original\", \"corrected\", \"reason\", \"position\"]\n            }\n        },\n        confidence: {\n            type: \"number\",\n            minimum: 0,\n            maximum: 1\n        }\n    },\n    required: [\"correctedText\", \"explanation\"],\n    additionalProperties: false\n};","module.exports = require(\"node:stream/web\");","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ValueScope = exports.ValueScopeName = exports.Scope = exports.varKinds = exports.UsedValueState = void 0;\nconst code_1 = require(\"./code\");\nclass ValueError extends Error {\n    constructor(name) {\n        super(`CodeGen: \"code\" for ${name} not defined`);\n        this.value = name.value;\n    }\n}\nvar UsedValueState;\n(function (UsedValueState) {\n    UsedValueState[UsedValueState[\"Started\"] = 0] = \"Started\";\n    UsedValueState[UsedValueState[\"Completed\"] = 1] = \"Completed\";\n})(UsedValueState || (exports.UsedValueState = UsedValueState = {}));\nexports.varKinds = {\n    const: new code_1.Name(\"const\"),\n    let: new code_1.Name(\"let\"),\n    var: new code_1.Name(\"var\"),\n};\nclass Scope {\n    constructor({ prefixes, parent } = {}) {\n        this._names = {};\n        this._prefixes = prefixes;\n        this._parent = parent;\n    }\n    toName(nameOrPrefix) {\n        return nameOrPrefix instanceof code_1.Name ? nameOrPrefix : this.name(nameOrPrefix);\n    }\n    name(prefix) {\n        return new code_1.Name(this._newName(prefix));\n    }\n    _newName(prefix) {\n        const ng = this._names[prefix] || this._nameGroup(prefix);\n        return `${prefix}${ng.index++}`;\n    }\n    _nameGroup(prefix) {\n        var _a, _b;\n        if (((_b = (_a = this._parent) === null || _a === void 0 ? void 0 : _a._prefixes) === null || _b === void 0 ? void 0 : _b.has(prefix)) || (this._prefixes && !this._prefixes.has(prefix))) {\n            throw new Error(`CodeGen: prefix \"${prefix}\" is not allowed in this scope`);\n        }\n        return (this._names[prefix] = { prefix, index: 0 });\n    }\n}\nexports.Scope = Scope;\nclass ValueScopeName extends code_1.Name {\n    constructor(prefix, nameStr) {\n        super(nameStr);\n        this.prefix = prefix;\n    }\n    setValue(value, { property, itemIndex }) {\n        this.value = value;\n        this.scopePath = (0, code_1._) `.${new code_1.Name(property)}[${itemIndex}]`;\n    }\n}\nexports.ValueScopeName = ValueScopeName;\nconst line = (0, code_1._) `\\n`;\nclass ValueScope extends Scope {\n    constructor(opts) {\n        super(opts);\n        this._values = {};\n        this._scope = opts.scope;\n        this.opts = { ...opts, _n: opts.lines ? line : code_1.nil };\n    }\n    get() {\n        return this._scope;\n    }\n    name(prefix) {\n        return new ValueScopeName(prefix, this._newName(prefix));\n    }\n    value(nameOrPrefix, value) {\n        var _a;\n        if (value.ref === undefined)\n            throw new Error(\"CodeGen: ref must be passed in value\");\n        const name = this.toName(nameOrPrefix);\n        const { prefix } = name;\n        const valueKey = (_a = value.key) !== null && _a !== void 0 ? _a : value.ref;\n        let vs = this._values[prefix];\n        if (vs) {\n            const _name = vs.get(valueKey);\n            if (_name)\n                return _name;\n        }\n        else {\n            vs = this._values[prefix] = new Map();\n        }\n        vs.set(valueKey, name);\n        const s = this._scope[prefix] || (this._scope[prefix] = []);\n        const itemIndex = s.length;\n        s[itemIndex] = value.ref;\n        name.setValue(value, { property: prefix, itemIndex });\n        return name;\n    }\n    getValue(prefix, keyOrRef) {\n        const vs = this._values[prefix];\n        if (!vs)\n            return;\n        return vs.get(keyOrRef);\n    }\n    scopeRefs(scopeName, values = this._values) {\n        return this._reduceValues(values, (name) => {\n            if (name.scopePath === undefined)\n                throw new Error(`CodeGen: name \"${name}\" has no value`);\n            return (0, code_1._) `${scopeName}${name.scopePath}`;\n        });\n    }\n    scopeCode(values = this._values, usedValues, getCode) {\n        return this._reduceValues(values, (name) => {\n            if (name.value === undefined)\n                throw new Error(`CodeGen: name \"${name}\" has no value`);\n            return name.value.code;\n        }, usedValues, getCode);\n    }\n    _reduceValues(values, valueCode, usedValues = {}, getCode) {\n        let code = code_1.nil;\n        for (const prefix in values) {\n            const vs = values[prefix];\n            if (!vs)\n                continue;\n            const nameSet = (usedValues[prefix] = usedValues[prefix] || new Map());\n            vs.forEach((name) => {\n                if (nameSet.has(name))\n                    return;\n                nameSet.set(name, UsedValueState.Started);\n                let c = valueCode(name);\n                if (c) {\n                    const def = this.opts.es5 ? exports.varKinds.var : exports.varKinds.const;\n                    code = (0, code_1._) `${code}${def} ${name} = ${c};${this.opts._n}`;\n                }\n                else if ((c = getCode === null || getCode === void 0 ? void 0 : getCode(name))) {\n                    code = (0, code_1._) `${code}${c}${this.opts._n}`;\n                }\n                else {\n                    throw new ValueError(name);\n                }\n                nameSet.set(name, UsedValueState.Completed);\n            });\n        }\n        return code;\n    }\n}\nexports.ValueScope = ValueScope;\n//# sourceMappingURL=scope.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.assignDefaults = void 0;\nconst codegen_1 = require(\"../codegen\");\nconst util_1 = require(\"../util\");\nfunction assignDefaults(it, ty) {\n    const { properties, items } = it.schema;\n    if (ty === \"object\" && properties) {\n        for (const key in properties) {\n            assignDefault(it, key, properties[key].default);\n        }\n    }\n    else if (ty === \"array\" && Array.isArray(items)) {\n        items.forEach((sch, i) => assignDefault(it, i, sch.default));\n    }\n}\nexports.assignDefaults = assignDefaults;\nfunction assignDefault(it, prop, defaultValue) {\n    const { gen, compositeRule, data, opts } = it;\n    if (defaultValue === undefined)\n        return;\n    const childData = (0, codegen_1._) `${data}${(0, codegen_1.getProperty)(prop)}`;\n    if (compositeRule) {\n        (0, util_1.checkStrictMode)(it, `default is ignored for: ${childData}`);\n        return;\n    }\n    let condition = (0, codegen_1._) `${childData} === undefined`;\n    if (opts.useDefaults === \"empty\") {\n        condition = (0, codegen_1._) `${condition} || ${childData} === null || ${childData} === \"\"`;\n    }\n    // `${childData} === undefined` +\n    // (opts.useDefaults === \"empty\" ? ` || ${childData} === null || ${childData} === \"\"` : \"\")\n    gen.if(condition, (0, codegen_1._) `${childData} = ${(0, codegen_1.stringify)(defaultValue)}`);\n}\n//# sourceMappingURL=defaults.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.shouldUseRule = exports.shouldUseGroup = exports.schemaHasRulesForType = void 0;\nfunction schemaHasRulesForType({ schema, self }, type) {\n    const group = self.RULES.types[type];\n    return group && group !== true && shouldUseGroup(schema, group);\n}\nexports.schemaHasRulesForType = schemaHasRulesForType;\nfunction shouldUseGroup(schema, group) {\n    return group.rules.some((rule) => shouldUseRule(schema, rule));\n}\nexports.shouldUseGroup = shouldUseGroup;\nfunction shouldUseRule(schema, rule) {\n    var _a;\n    return (schema[rule.keyword] !== undefined ||\n        ((_a = rule.definition.implements) === null || _a === void 0 ? void 0 : _a.some((kwd) => schema[kwd] !== undefined)));\n}\nexports.shouldUseRule = shouldUseRule;\n//# sourceMappingURL=applicability.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util_1 = require(\"../../compile/util\");\nconst def = {\n    keyword: \"not\",\n    schemaType: [\"object\", \"boolean\"],\n    trackErrors: true,\n    code(cxt) {\n        const { gen, schema, it } = cxt;\n        if ((0, util_1.alwaysValidSchema)(it, schema)) {\n            cxt.fail();\n            return;\n        }\n        const valid = gen.name(\"valid\");\n        cxt.subschema({\n            keyword: \"not\",\n            compositeRule: true,\n            createErrors: false,\n            allErrors: false,\n        }, valid);\n        cxt.failResult(valid, () => cxt.reset(), () => cxt.error());\n    },\n    error: { message: \"must NOT be valid\" },\n};\nexports.default = def;\n//# sourceMappingURL=not.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst equal_1 = require(\"../../runtime/equal\");\nconst error = {\n    message: \"must be equal to constant\",\n    params: ({ schemaCode }) => (0, codegen_1._) `{allowedValue: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"const\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, data, $data, schemaCode, schema } = cxt;\n        if ($data || (schema && typeof schema == \"object\")) {\n            cxt.fail$data((0, codegen_1._) `!${(0, util_1.useFunc)(gen, equal_1.default)}(${data}, ${schemaCode})`);\n        }\n        else {\n            cxt.fail((0, codegen_1._) `${schema} !== ${data}`);\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=const.js.map","import * as vscode from 'vscode';\nimport { CommandRegistry } from './CommandRegistry';\nimport { StatusBarManager } from './StatusBarManager';\n\nexport class ExtensionActivator {\n    private commandRegistry: CommandRegistry;\n    private statusBarManager: StatusBarManager;\n\n    constructor() {\n        this.commandRegistry = new CommandRegistry();\n        this.statusBarManager = new StatusBarManager();\n    }\n\n    activate(context: vscode.ExtensionContext): void {\n        console.log('Grammar Proofreading Extension is activating...');\n\n        // Register commands\n        this.commandRegistry.registerCommands(context);\n\n        // Initialize status bar\n        this.statusBarManager.initialize(context);\n\n        console.log('Grammar Proofreading Extension activated successfully!');\n    }\n\n    deactivate(): void {\n        console.log('Grammar Proofreading Extension is deactivating...');\n        this.statusBarManager.dispose();\n    }\n}","module.exports = require(\"worker_threads\");","import { CorrectionRequest } from '../models/CorrectionRequest';\n\nexport interface APIRequest {\n    model: string;\n    messages: Array<{\n        role: 'system' | 'user' | 'assistant';\n        content: string;\n    }>;\n    max_tokens: number;\n    temperature: number;\n}\n\nexport class RequestBuilder {\n    buildCorrectionRequest(correctionRequest: CorrectionRequest, maxTokens: number, temperature: number): APIRequest {\n        const systemPrompt = this.buildSystemPrompt(correctionRequest.correctionType);\n        const userPrompt = this.buildUserPrompt(correctionRequest.prompt, correctionRequest.text);\n\n        return {\n            model: 'gpt-3.5-turbo', // This will be overridden by the actual model from config\n            messages: [\n                {\n                    role: 'system',\n                    content: systemPrompt\n                },\n                {\n                    role: 'user',\n                    content: userPrompt\n                }\n            ],\n            max_tokens: maxTokens,\n            temperature: temperature\n        };\n    }\n\n    private buildSystemPrompt(correctionType: string): string {\n        const basePrompt = `You are a professional writing assistant. Your task is to improve the provided text and return a JSON response with the following structure:\n{\n  \"correctedText\": \"The improved version of the text\",\n  \"explanation\": \"A clear explanation of the changes made\",\n  \"changes\": [\n    {\n      \"original\": \"original text segment\",\n      \"corrected\": \"corrected text segment\", \n      \"reason\": \"reason for the change\",\n      \"position\": {\"start\": 0, \"end\": 10}\n    }\n  ],\n  \"confidence\": 0.95\n}`;\n\n        switch (correctionType) {\n            case 'grammar':\n                return `${basePrompt}\\n\\nFocus specifically on grammar corrections: fix grammatical errors, verb tenses, subject-verb agreement, punctuation, and sentence structure.`;\n            case 'style':\n                return `${basePrompt}\\n\\nFocus specifically on style improvements: enhance clarity, flow, word choice, sentence variety, and overall readability while maintaining the author's voice.`;\n            case 'clarity':\n                return `${basePrompt}\\n\\nFocus specifically on clarity improvements: simplify complex sentences, remove ambiguity, improve logical flow, and make the text more understandable.`;\n            case 'tone':\n                return `${basePrompt}\\n\\nFocus specifically on tone adjustments: ensure appropriate formality level, consistency in voice, and proper tone for the intended audience.`;\n            default:\n                return basePrompt;\n        }\n    }\n\n    private buildUserPrompt(customPrompt: string, text: string): string {\n        if (customPrompt && customPrompt.trim() !== '') {\n            return `${customPrompt}\\n\\nText to improve:\\n${text}`;\n        }\n        return `Please improve the following text:\\n\\n${text}`;\n    }\n}","'use strict'\n\nconst { normalizeIPv6, removeDotSegments, recomposeAuthority, normalizeComponentEncoding, isIPv4, nonSimpleDomain } = require('./lib/utils')\nconst { SCHEMES, getSchemeHandler } = require('./lib/schemes')\n\n/**\n * @template {import('./types/index').URIComponent|string} T\n * @param {T} uri\n * @param {import('./types/index').Options} [options]\n * @returns {T}\n */\nfunction normalize (uri, options) {\n  if (typeof uri === 'string') {\n    uri = /** @type {T} */ (serialize(parse(uri, options), options))\n  } else if (typeof uri === 'object') {\n    uri = /** @type {T} */ (parse(serialize(uri, options), options))\n  }\n  return uri\n}\n\n/**\n * @param {string} baseURI\n * @param {string} relativeURI\n * @param {import('./types/index').Options} [options]\n * @returns {string}\n */\nfunction resolve (baseURI, relativeURI, options) {\n  const schemelessOptions = options ? Object.assign({ scheme: 'null' }, options) : { scheme: 'null' }\n  const resolved = resolveComponent(parse(baseURI, schemelessOptions), parse(relativeURI, schemelessOptions), schemelessOptions, true)\n  schemelessOptions.skipEscape = true\n  return serialize(resolved, schemelessOptions)\n}\n\n/**\n * @param {import ('./types/index').URIComponent} base\n * @param {import ('./types/index').URIComponent} relative\n * @param {import('./types/index').Options} [options]\n * @param {boolean} [skipNormalization=false]\n * @returns {import ('./types/index').URIComponent}\n */\nfunction resolveComponent (base, relative, options, skipNormalization) {\n  /** @type {import('./types/index').URIComponent} */\n  const target = {}\n  if (!skipNormalization) {\n    base = parse(serialize(base, options), options) // normalize base component\n    relative = parse(serialize(relative, options), options) // normalize relative component\n  }\n  options = options || {}\n\n  if (!options.tolerant && relative.scheme) {\n    target.scheme = relative.scheme\n    // target.authority = relative.authority;\n    target.userinfo = relative.userinfo\n    target.host = relative.host\n    target.port = relative.port\n    target.path = removeDotSegments(relative.path || '')\n    target.query = relative.query\n  } else {\n    if (relative.userinfo !== undefined || relative.host !== undefined || relative.port !== undefined) {\n      // target.authority = relative.authority;\n      target.userinfo = relative.userinfo\n      target.host = relative.host\n      target.port = relative.port\n      target.path = removeDotSegments(relative.path || '')\n      target.query = relative.query\n    } else {\n      if (!relative.path) {\n        target.path = base.path\n        if (relative.query !== undefined) {\n          target.query = relative.query\n        } else {\n          target.query = base.query\n        }\n      } else {\n        if (relative.path[0] === '/') {\n          target.path = removeDotSegments(relative.path)\n        } else {\n          if ((base.userinfo !== undefined || base.host !== undefined || base.port !== undefined) && !base.path) {\n            target.path = '/' + relative.path\n          } else if (!base.path) {\n            target.path = relative.path\n          } else {\n            target.path = base.path.slice(0, base.path.lastIndexOf('/') + 1) + relative.path\n          }\n          target.path = removeDotSegments(target.path)\n        }\n        target.query = relative.query\n      }\n      // target.authority = base.authority;\n      target.userinfo = base.userinfo\n      target.host = base.host\n      target.port = base.port\n    }\n    target.scheme = base.scheme\n  }\n\n  target.fragment = relative.fragment\n\n  return target\n}\n\n/**\n * @param {import ('./types/index').URIComponent|string} uriA\n * @param {import ('./types/index').URIComponent|string} uriB\n * @param {import ('./types/index').Options} options\n * @returns {boolean}\n */\nfunction equal (uriA, uriB, options) {\n  if (typeof uriA === 'string') {\n    uriA = unescape(uriA)\n    uriA = serialize(normalizeComponentEncoding(parse(uriA, options), true), { ...options, skipEscape: true })\n  } else if (typeof uriA === 'object') {\n    uriA = serialize(normalizeComponentEncoding(uriA, true), { ...options, skipEscape: true })\n  }\n\n  if (typeof uriB === 'string') {\n    uriB = unescape(uriB)\n    uriB = serialize(normalizeComponentEncoding(parse(uriB, options), true), { ...options, skipEscape: true })\n  } else if (typeof uriB === 'object') {\n    uriB = serialize(normalizeComponentEncoding(uriB, true), { ...options, skipEscape: true })\n  }\n\n  return uriA.toLowerCase() === uriB.toLowerCase()\n}\n\n/**\n * @param {Readonly<import('./types/index').URIComponent>} cmpts\n * @param {import('./types/index').Options} [opts]\n * @returns {string}\n */\nfunction serialize (cmpts, opts) {\n  const component = {\n    host: cmpts.host,\n    scheme: cmpts.scheme,\n    userinfo: cmpts.userinfo,\n    port: cmpts.port,\n    path: cmpts.path,\n    query: cmpts.query,\n    nid: cmpts.nid,\n    nss: cmpts.nss,\n    uuid: cmpts.uuid,\n    fragment: cmpts.fragment,\n    reference: cmpts.reference,\n    resourceName: cmpts.resourceName,\n    secure: cmpts.secure,\n    error: ''\n  }\n  const options = Object.assign({}, opts)\n  const uriTokens = []\n\n  // find scheme handler\n  const schemeHandler = getSchemeHandler(options.scheme || component.scheme)\n\n  // perform scheme specific serialization\n  if (schemeHandler && schemeHandler.serialize) schemeHandler.serialize(component, options)\n\n  if (component.path !== undefined) {\n    if (!options.skipEscape) {\n      component.path = escape(component.path)\n\n      if (component.scheme !== undefined) {\n        component.path = component.path.split('%3A').join(':')\n      }\n    } else {\n      component.path = unescape(component.path)\n    }\n  }\n\n  if (options.reference !== 'suffix' && component.scheme) {\n    uriTokens.push(component.scheme, ':')\n  }\n\n  const authority = recomposeAuthority(component)\n  if (authority !== undefined) {\n    if (options.reference !== 'suffix') {\n      uriTokens.push('//')\n    }\n\n    uriTokens.push(authority)\n\n    if (component.path && component.path[0] !== '/') {\n      uriTokens.push('/')\n    }\n  }\n  if (component.path !== undefined) {\n    let s = component.path\n\n    if (!options.absolutePath && (!schemeHandler || !schemeHandler.absolutePath)) {\n      s = removeDotSegments(s)\n    }\n\n    if (\n      authority === undefined &&\n      s[0] === '/' &&\n      s[1] === '/'\n    ) {\n      // don't allow the path to start with \"//\"\n      s = '/%2F' + s.slice(2)\n    }\n\n    uriTokens.push(s)\n  }\n\n  if (component.query !== undefined) {\n    uriTokens.push('?', component.query)\n  }\n\n  if (component.fragment !== undefined) {\n    uriTokens.push('#', component.fragment)\n  }\n  return uriTokens.join('')\n}\n\nconst URI_PARSE = /^(?:([^#/:?]+):)?(?:\\/\\/((?:([^#/?@]*)@)?(\\[[^#/?\\]]+\\]|[^#/:?]*)(?::(\\d*))?))?([^#?]*)(?:\\?([^#]*))?(?:#((?:.|[\\n\\r])*))?/u\n\n/**\n * @param {string} uri\n * @param {import('./types/index').Options} [opts]\n * @returns\n */\nfunction parse (uri, opts) {\n  const options = Object.assign({}, opts)\n  /** @type {import('./types/index').URIComponent} */\n  const parsed = {\n    scheme: undefined,\n    userinfo: undefined,\n    host: '',\n    port: undefined,\n    path: '',\n    query: undefined,\n    fragment: undefined\n  }\n\n  let isIP = false\n  if (options.reference === 'suffix') {\n    if (options.scheme) {\n      uri = options.scheme + ':' + uri\n    } else {\n      uri = '//' + uri\n    }\n  }\n\n  const matches = uri.match(URI_PARSE)\n\n  if (matches) {\n    // store each component\n    parsed.scheme = matches[1]\n    parsed.userinfo = matches[3]\n    parsed.host = matches[4]\n    parsed.port = parseInt(matches[5], 10)\n    parsed.path = matches[6] || ''\n    parsed.query = matches[7]\n    parsed.fragment = matches[8]\n\n    // fix port number\n    if (isNaN(parsed.port)) {\n      parsed.port = matches[5]\n    }\n    if (parsed.host) {\n      const ipv4result = isIPv4(parsed.host)\n      if (ipv4result === false) {\n        const ipv6result = normalizeIPv6(parsed.host)\n        parsed.host = ipv6result.host.toLowerCase()\n        isIP = ipv6result.isIPV6\n      } else {\n        isIP = true\n      }\n    }\n    if (parsed.scheme === undefined && parsed.userinfo === undefined && parsed.host === undefined && parsed.port === undefined && parsed.query === undefined && !parsed.path) {\n      parsed.reference = 'same-document'\n    } else if (parsed.scheme === undefined) {\n      parsed.reference = 'relative'\n    } else if (parsed.fragment === undefined) {\n      parsed.reference = 'absolute'\n    } else {\n      parsed.reference = 'uri'\n    }\n\n    // check for reference errors\n    if (options.reference && options.reference !== 'suffix' && options.reference !== parsed.reference) {\n      parsed.error = parsed.error || 'URI is not a ' + options.reference + ' reference.'\n    }\n\n    // find scheme handler\n    const schemeHandler = getSchemeHandler(options.scheme || parsed.scheme)\n\n    // check if scheme can't handle IRIs\n    if (!options.unicodeSupport && (!schemeHandler || !schemeHandler.unicodeSupport)) {\n      // if host component is a domain name\n      if (parsed.host && (options.domainHost || (schemeHandler && schemeHandler.domainHost)) && isIP === false && nonSimpleDomain(parsed.host)) {\n        // convert Unicode IDN -> ASCII IDN\n        try {\n          parsed.host = URL.domainToASCII(parsed.host.toLowerCase())\n        } catch (e) {\n          parsed.error = parsed.error || \"Host's domain name can not be converted to ASCII: \" + e\n        }\n      }\n      // convert IRI -> URI\n    }\n\n    if (!schemeHandler || (schemeHandler && !schemeHandler.skipNormalize)) {\n      if (uri.indexOf('%') !== -1) {\n        if (parsed.scheme !== undefined) {\n          parsed.scheme = unescape(parsed.scheme)\n        }\n        if (parsed.host !== undefined) {\n          parsed.host = unescape(parsed.host)\n        }\n      }\n      if (parsed.path) {\n        parsed.path = escape(unescape(parsed.path))\n      }\n      if (parsed.fragment) {\n        parsed.fragment = encodeURI(decodeURIComponent(parsed.fragment))\n      }\n    }\n\n    // perform scheme specific parsing\n    if (schemeHandler && schemeHandler.parse) {\n      schemeHandler.parse(parsed, options)\n    }\n  } else {\n    parsed.error = parsed.error || 'URI can not be parsed.'\n  }\n  return parsed\n}\n\nconst fastUri = {\n  SCHEMES,\n  normalize,\n  resolve,\n  resolveComponent,\n  equal,\n  serialize,\n  parse\n}\n\nmodule.exports = fastUri\nmodule.exports.default = fastUri\nmodule.exports.fastUri = fastUri\n","/*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */\n\nimport C from 'fetch-blob'\nimport F from 'fetch-blob/file.js'\n\nvar {toStringTag:t,iterator:i,hasInstance:h}=Symbol,\nr=Math.random,\nm='append,set,get,getAll,delete,keys,values,entries,forEach,constructor'.split(','),\nf=(a,b,c)=>(a+='',/^(Blob|File)$/.test(b && b[t])?[(c=c!==void 0?c+'':b[t]=='File'?b.name:'blob',a),b.name!==c||b[t]=='blob'?new F([b],c,b):b]:[a,b+'']),\ne=(c,f)=>(f?c:c.replace(/\\r?\\n|\\r/g,'\\r\\n')).replace(/\\n/g,'%0A').replace(/\\r/g,'%0D').replace(/\"/g,'%22'),\nx=(n, a, e)=>{if(a.length<e){throw new TypeError(`Failed to execute '${n}' on 'FormData': ${e} arguments required, but only ${a.length} present.`)}}\n\nexport const File = F\n\n/** @type {typeof globalThis.FormData} */\nexport const FormData = class FormData {\n#d=[];\nconstructor(...a){if(a.length)throw new TypeError(`Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.`)}\nget [t]() {return 'FormData'}\n[i](){return this.entries()}\nstatic [h](o) {return o&&typeof o==='object'&&o[t]==='FormData'&&!m.some(m=>typeof o[m]!='function')}\nappend(...a){x('append',arguments,2);this.#d.push(f(...a))}\ndelete(a){x('delete',arguments,1);a+='';this.#d=this.#d.filter(([b])=>b!==a)}\nget(a){x('get',arguments,1);a+='';for(var b=this.#d,l=b.length,c=0;c<l;c++)if(b[c][0]===a)return b[c][1];return null}\ngetAll(a,b){x('getAll',arguments,1);b=[];a+='';this.#d.forEach(c=>c[0]===a&&b.push(c[1]));return b}\nhas(a){x('has',arguments,1);a+='';return this.#d.some(b=>b[0]===a)}\nforEach(a,b){x('forEach',arguments,1);for(var [c,d]of this)a.call(b,d,c,this)}\nset(...a){x('set',arguments,2);var b=[],c=!0;a=f(...a);this.#d.forEach(d=>{d[0]===a[0]?c&&(c=!b.push(a)):b.push(d)});c&&b.push(a);this.#d=b}\n*entries(){yield*this.#d}\n*keys(){for(var[a]of this)yield a}\n*values(){for(var[,a]of this)yield a}}\n\n/** @param {FormData} F */\nexport function formDataToBlob (F,B=C){\nvar b=`${r()}${r()}`.replace(/\\./g, '').slice(-28).padStart(32, '-'),c=[],p=`--${b}\\r\\nContent-Disposition: form-data; name=\"`\nF.forEach((v,n)=>typeof v=='string'\n?c.push(p+e(n)+`\"\\r\\n\\r\\n${v.replace(/\\r(?!\\n)|(?<!\\r)\\n/g, '\\r\\n')}\\r\\n`)\n:c.push(p+e(n)+`\"; filename=\"${e(v.name, 1)}\"\\r\\nContent-Type: ${v.type||\"application/octet-stream\"}\\r\\n\\r\\n`, v, '\\r\\n'))\nc.push(`--${b}--`)\nreturn new B(c,{type:\"multipart/form-data; boundary=\"+b})}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst equal_1 = require(\"../../runtime/equal\");\nconst error = {\n    message: \"must be equal to one of the allowed values\",\n    params: ({ schemaCode }) => (0, codegen_1._) `{allowedValues: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"enum\",\n    schemaType: \"array\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, data, $data, schema, schemaCode, it } = cxt;\n        if (!$data && schema.length === 0)\n            throw new Error(\"enum must have non-empty array\");\n        const useLoop = schema.length >= it.opts.loopEnum;\n        let eql;\n        const getEql = () => (eql !== null && eql !== void 0 ? eql : (eql = (0, util_1.useFunc)(gen, equal_1.default)));\n        let valid;\n        if (useLoop || $data) {\n            valid = gen.let(\"valid\");\n            cxt.block$data(valid, loopEnum);\n        }\n        else {\n            /* istanbul ignore if */\n            if (!Array.isArray(schema))\n                throw new Error(\"ajv implementation error\");\n            const vSchema = gen.const(\"vSchema\", schemaCode);\n            valid = (0, codegen_1.or)(...schema.map((_x, i) => equalCode(vSchema, i)));\n        }\n        cxt.pass(valid);\n        function loopEnum() {\n            gen.assign(valid, false);\n            gen.forOf(\"v\", schemaCode, (v) => gen.if((0, codegen_1._) `${getEql()}(${data}, ${v})`, () => gen.assign(valid, true).break()));\n        }\n        function equalCode(vSchema, i) {\n            const sch = schema[i];\n            return typeof sch === \"object\" && sch !== null\n                ? (0, codegen_1._) `${getEql()}(${data}, ${vSchema}[${i}])`\n                : (0, codegen_1._) `${data} === ${sch}`;\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=enum.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst names_1 = require(\"../../compile/names\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: \"must NOT have additional properties\",\n    params: ({ params }) => (0, codegen_1._) `{additionalProperty: ${params.additionalProperty}}`,\n};\nconst def = {\n    keyword: \"additionalProperties\",\n    type: [\"object\"],\n    schemaType: [\"boolean\", \"object\"],\n    allowUndefined: true,\n    trackErrors: true,\n    error,\n    code(cxt) {\n        const { gen, schema, parentSchema, data, errsCount, it } = cxt;\n        /* istanbul ignore if */\n        if (!errsCount)\n            throw new Error(\"ajv implementation error\");\n        const { allErrors, opts } = it;\n        it.props = true;\n        if (opts.removeAdditional !== \"all\" && (0, util_1.alwaysValidSchema)(it, schema))\n            return;\n        const props = (0, code_1.allSchemaProperties)(parentSchema.properties);\n        const patProps = (0, code_1.allSchemaProperties)(parentSchema.patternProperties);\n        checkAdditionalProperties();\n        cxt.ok((0, codegen_1._) `${errsCount} === ${names_1.default.errors}`);\n        function checkAdditionalProperties() {\n            gen.forIn(\"key\", data, (key) => {\n                if (!props.length && !patProps.length)\n                    additionalPropertyCode(key);\n                else\n                    gen.if(isAdditional(key), () => additionalPropertyCode(key));\n            });\n        }\n        function isAdditional(key) {\n            let definedProp;\n            if (props.length > 8) {\n                // TODO maybe an option instead of hard-coded 8?\n                const propsSchema = (0, util_1.schemaRefOrVal)(it, parentSchema.properties, \"properties\");\n                definedProp = (0, code_1.isOwnProperty)(gen, propsSchema, key);\n            }\n            else if (props.length) {\n                definedProp = (0, codegen_1.or)(...props.map((p) => (0, codegen_1._) `${key} === ${p}`));\n            }\n            else {\n                definedProp = codegen_1.nil;\n            }\n            if (patProps.length) {\n                definedProp = (0, codegen_1.or)(definedProp, ...patProps.map((p) => (0, codegen_1._) `${(0, code_1.usePattern)(cxt, p)}.test(${key})`));\n            }\n            return (0, codegen_1.not)(definedProp);\n        }\n        function deleteAdditional(key) {\n            gen.code((0, codegen_1._) `delete ${data}[${key}]`);\n        }\n        function additionalPropertyCode(key) {\n            if (opts.removeAdditional === \"all\" || (opts.removeAdditional && schema === false)) {\n                deleteAdditional(key);\n                return;\n            }\n            if (schema === false) {\n                cxt.setParams({ additionalProperty: key });\n                cxt.error();\n                if (!allErrors)\n                    gen.break();\n                return;\n            }\n            if (typeof schema == \"object\" && !(0, util_1.alwaysValidSchema)(it, schema)) {\n                const valid = gen.name(\"valid\");\n                if (opts.removeAdditional === \"failing\") {\n                    applyAdditionalSchema(key, valid, false);\n                    gen.if((0, codegen_1.not)(valid), () => {\n                        cxt.reset();\n                        deleteAdditional(key);\n                    });\n                }\n                else {\n                    applyAdditionalSchema(key, valid);\n                    if (!allErrors)\n                        gen.if((0, codegen_1.not)(valid), () => gen.break());\n                }\n            }\n        }\n        function applyAdditionalSchema(key, valid, errors) {\n            const subschema = {\n                keyword: \"additionalProperties\",\n                dataProp: key,\n                dataPropType: util_1.Type.Str,\n            };\n            if (errors === false) {\n                Object.assign(subschema, {\n                    compositeRule: true,\n                    createErrors: false,\n                    allErrors: false,\n                });\n            }\n            cxt.subschema(subschema, valid);\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=additionalProperties.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.extendErrors = exports.resetErrorsCount = exports.reportExtraError = exports.reportError = exports.keyword$DataError = exports.keywordError = void 0;\nconst codegen_1 = require(\"./codegen\");\nconst util_1 = require(\"./util\");\nconst names_1 = require(\"./names\");\nexports.keywordError = {\n    message: ({ keyword }) => (0, codegen_1.str) `must pass \"${keyword}\" keyword validation`,\n};\nexports.keyword$DataError = {\n    message: ({ keyword, schemaType }) => schemaType\n        ? (0, codegen_1.str) `\"${keyword}\" keyword must be ${schemaType} ($data)`\n        : (0, codegen_1.str) `\"${keyword}\" keyword is invalid ($data)`,\n};\nfunction reportError(cxt, error = exports.keywordError, errorPaths, overrideAllErrors) {\n    const { it } = cxt;\n    const { gen, compositeRule, allErrors } = it;\n    const errObj = errorObjectCode(cxt, error, errorPaths);\n    if (overrideAllErrors !== null && overrideAllErrors !== void 0 ? overrideAllErrors : (compositeRule || allErrors)) {\n        addError(gen, errObj);\n    }\n    else {\n        returnErrors(it, (0, codegen_1._) `[${errObj}]`);\n    }\n}\nexports.reportError = reportError;\nfunction reportExtraError(cxt, error = exports.keywordError, errorPaths) {\n    const { it } = cxt;\n    const { gen, compositeRule, allErrors } = it;\n    const errObj = errorObjectCode(cxt, error, errorPaths);\n    addError(gen, errObj);\n    if (!(compositeRule || allErrors)) {\n        returnErrors(it, names_1.default.vErrors);\n    }\n}\nexports.reportExtraError = reportExtraError;\nfunction resetErrorsCount(gen, errsCount) {\n    gen.assign(names_1.default.errors, errsCount);\n    gen.if((0, codegen_1._) `${names_1.default.vErrors} !== null`, () => gen.if(errsCount, () => gen.assign((0, codegen_1._) `${names_1.default.vErrors}.length`, errsCount), () => gen.assign(names_1.default.vErrors, null)));\n}\nexports.resetErrorsCount = resetErrorsCount;\nfunction extendErrors({ gen, keyword, schemaValue, data, errsCount, it, }) {\n    /* istanbul ignore if */\n    if (errsCount === undefined)\n        throw new Error(\"ajv implementation error\");\n    const err = gen.name(\"err\");\n    gen.forRange(\"i\", errsCount, names_1.default.errors, (i) => {\n        gen.const(err, (0, codegen_1._) `${names_1.default.vErrors}[${i}]`);\n        gen.if((0, codegen_1._) `${err}.instancePath === undefined`, () => gen.assign((0, codegen_1._) `${err}.instancePath`, (0, codegen_1.strConcat)(names_1.default.instancePath, it.errorPath)));\n        gen.assign((0, codegen_1._) `${err}.schemaPath`, (0, codegen_1.str) `${it.errSchemaPath}/${keyword}`);\n        if (it.opts.verbose) {\n            gen.assign((0, codegen_1._) `${err}.schema`, schemaValue);\n            gen.assign((0, codegen_1._) `${err}.data`, data);\n        }\n    });\n}\nexports.extendErrors = extendErrors;\nfunction addError(gen, errObj) {\n    const err = gen.const(\"err\", errObj);\n    gen.if((0, codegen_1._) `${names_1.default.vErrors} === null`, () => gen.assign(names_1.default.vErrors, (0, codegen_1._) `[${err}]`), (0, codegen_1._) `${names_1.default.vErrors}.push(${err})`);\n    gen.code((0, codegen_1._) `${names_1.default.errors}++`);\n}\nfunction returnErrors(it, errs) {\n    const { gen, validateName, schemaEnv } = it;\n    if (schemaEnv.$async) {\n        gen.throw((0, codegen_1._) `new ${it.ValidationError}(${errs})`);\n    }\n    else {\n        gen.assign((0, codegen_1._) `${validateName}.errors`, errs);\n        gen.return(false);\n    }\n}\nconst E = {\n    keyword: new codegen_1.Name(\"keyword\"),\n    schemaPath: new codegen_1.Name(\"schemaPath\"), // also used in JTD errors\n    params: new codegen_1.Name(\"params\"),\n    propertyName: new codegen_1.Name(\"propertyName\"),\n    message: new codegen_1.Name(\"message\"),\n    schema: new codegen_1.Name(\"schema\"),\n    parentSchema: new codegen_1.Name(\"parentSchema\"),\n};\nfunction errorObjectCode(cxt, error, errorPaths) {\n    const { createErrors } = cxt.it;\n    if (createErrors === false)\n        return (0, codegen_1._) `{}`;\n    return errorObject(cxt, error, errorPaths);\n}\nfunction errorObject(cxt, error, errorPaths = {}) {\n    const { gen, it } = cxt;\n    const keyValues = [\n        errorInstancePath(it, errorPaths),\n        errorSchemaPath(cxt, errorPaths),\n    ];\n    extraErrorProps(cxt, error, keyValues);\n    return gen.object(...keyValues);\n}\nfunction errorInstancePath({ errorPath }, { instancePath }) {\n    const instPath = instancePath\n        ? (0, codegen_1.str) `${errorPath}${(0, util_1.getErrorPath)(instancePath, util_1.Type.Str)}`\n        : errorPath;\n    return [names_1.default.instancePath, (0, codegen_1.strConcat)(names_1.default.instancePath, instPath)];\n}\nfunction errorSchemaPath({ keyword, it: { errSchemaPath } }, { schemaPath, parentSchema }) {\n    let schPath = parentSchema ? errSchemaPath : (0, codegen_1.str) `${errSchemaPath}/${keyword}`;\n    if (schemaPath) {\n        schPath = (0, codegen_1.str) `${schPath}${(0, util_1.getErrorPath)(schemaPath, util_1.Type.Str)}`;\n    }\n    return [E.schemaPath, schPath];\n}\nfunction extraErrorProps(cxt, { params, message }, keyValues) {\n    const { keyword, data, schemaValue, it } = cxt;\n    const { opts, propertyName, topSchemaRef, schemaPath } = it;\n    keyValues.push([E.keyword, keyword], [E.params, typeof params == \"function\" ? params(cxt) : params || (0, codegen_1._) `{}`]);\n    if (opts.messages) {\n        keyValues.push([E.message, typeof message == \"function\" ? message(cxt) : message]);\n    }\n    if (opts.verbose) {\n        keyValues.push([E.schema, schemaValue], [E.parentSchema, (0, codegen_1._) `${topSchemaRef}${schemaPath}`], [names_1.default.data, data]);\n    }\n    if (propertyName)\n        keyValues.push([E.propertyName, propertyName]);\n}\n//# sourceMappingURL=errors.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.boolOrEmptySchema = exports.topBoolOrEmptySchema = void 0;\nconst errors_1 = require(\"../errors\");\nconst codegen_1 = require(\"../codegen\");\nconst names_1 = require(\"../names\");\nconst boolError = {\n    message: \"boolean schema is false\",\n};\nfunction topBoolOrEmptySchema(it) {\n    const { gen, schema, validateName } = it;\n    if (schema === false) {\n        falseSchemaError(it, false);\n    }\n    else if (typeof schema == \"object\" && schema.$async === true) {\n        gen.return(names_1.default.data);\n    }\n    else {\n        gen.assign((0, codegen_1._) `${validateName}.errors`, null);\n        gen.return(true);\n    }\n}\nexports.topBoolOrEmptySchema = topBoolOrEmptySchema;\nfunction boolOrEmptySchema(it, valid) {\n    const { gen, schema } = it;\n    if (schema === false) {\n        gen.var(valid, false); // TODO var\n        falseSchemaError(it);\n    }\n    else {\n        gen.var(valid, true); // TODO var\n    }\n}\nexports.boolOrEmptySchema = boolOrEmptySchema;\nfunction falseSchemaError(it, overrideAllErrors) {\n    const { gen, data } = it;\n    // TODO maybe some other interface should be used for non-keyword validation errors...\n    const cxt = {\n        gen,\n        keyword: \"false schema\",\n        data,\n        schema: false,\n        schemaCode: false,\n        schemaValue: false,\n        params: {},\n        it,\n    };\n    (0, errors_1.reportError)(cxt, boolError, undefined, overrideAllErrors);\n}\n//# sourceMappingURL=boolSchema.js.map","import * as vscode from 'vscode';\n\nexport class StatusBarManager {\n    private statusBarItem: vscode.StatusBarItem | undefined;\n\n    initialize(context: vscode.ExtensionContext): void {\n        // Create status bar item\n        this.statusBarItem = vscode.window.createStatusBarItem(\n            vscode.StatusBarAlignment.Right,\n            100\n        );\n\n        this.statusBarItem.text = '$(pencil) Grammar';\n        this.statusBarItem.tooltip = 'Grammar Proofreading Extension - Click to open settings';\n        this.statusBarItem.command = 'grammarProofreading.openSettings';\n        \n        // Show the status bar item\n        this.statusBarItem.show();\n\n        // Add to context subscriptions for proper cleanup\n        context.subscriptions.push(this.statusBarItem);\n\n        // Listen for active editor changes to update status\n        const editorChangeListener = vscode.window.onDidChangeActiveTextEditor(() => {\n            this.updateStatus();\n        });\n\n        context.subscriptions.push(editorChangeListener);\n\n        // Initial status update\n        this.updateStatus();\n    }\n\n    private updateStatus(): void {\n        if (!this.statusBarItem) {\n            return;\n        }\n\n        const activeEditor = vscode.window.activeTextEditor;\n        \n        if (activeEditor) {\n            this.statusBarItem.text = '$(pencil) Grammar';\n            this.statusBarItem.tooltip = 'Grammar Proofreading Extension - Ready to correct text';\n            this.statusBarItem.color = undefined;\n        } else {\n            this.statusBarItem.text = '$(pencil) Grammar';\n            this.statusBarItem.tooltip = 'Grammar Proofreading Extension - No active editor';\n            this.statusBarItem.color = new vscode.ThemeColor('statusBarItem.warningForeground');\n        }\n    }\n\n    showProgress(message: string): void {\n        if (this.statusBarItem) {\n            this.statusBarItem.text = `$(sync~spin) ${message}`;\n            this.statusBarItem.tooltip = 'Grammar correction in progress...';\n        }\n    }\n\n    hideProgress(): void {\n        this.updateStatus();\n    }\n\n    dispose(): void {\n        if (this.statusBarItem) {\n            this.statusBarItem.dispose();\n            this.statusBarItem = undefined;\n        }\n    }\n}","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.or = exports.and = exports.not = exports.CodeGen = exports.operators = exports.varKinds = exports.ValueScopeName = exports.ValueScope = exports.Scope = exports.Name = exports.regexpCode = exports.stringify = exports.getProperty = exports.nil = exports.strConcat = exports.str = exports._ = void 0;\nconst code_1 = require(\"./code\");\nconst scope_1 = require(\"./scope\");\nvar code_2 = require(\"./code\");\nObject.defineProperty(exports, \"_\", { enumerable: true, get: function () { return code_2._; } });\nObject.defineProperty(exports, \"str\", { enumerable: true, get: function () { return code_2.str; } });\nObject.defineProperty(exports, \"strConcat\", { enumerable: true, get: function () { return code_2.strConcat; } });\nObject.defineProperty(exports, \"nil\", { enumerable: true, get: function () { return code_2.nil; } });\nObject.defineProperty(exports, \"getProperty\", { enumerable: true, get: function () { return code_2.getProperty; } });\nObject.defineProperty(exports, \"stringify\", { enumerable: true, get: function () { return code_2.stringify; } });\nObject.defineProperty(exports, \"regexpCode\", { enumerable: true, get: function () { return code_2.regexpCode; } });\nObject.defineProperty(exports, \"Name\", { enumerable: true, get: function () { return code_2.Name; } });\nvar scope_2 = require(\"./scope\");\nObject.defineProperty(exports, \"Scope\", { enumerable: true, get: function () { return scope_2.Scope; } });\nObject.defineProperty(exports, \"ValueScope\", { enumerable: true, get: function () { return scope_2.ValueScope; } });\nObject.defineProperty(exports, \"ValueScopeName\", { enumerable: true, get: function () { return scope_2.ValueScopeName; } });\nObject.defineProperty(exports, \"varKinds\", { enumerable: true, get: function () { return scope_2.varKinds; } });\nexports.operators = {\n    GT: new code_1._Code(\">\"),\n    GTE: new code_1._Code(\">=\"),\n    LT: new code_1._Code(\"<\"),\n    LTE: new code_1._Code(\"<=\"),\n    EQ: new code_1._Code(\"===\"),\n    NEQ: new code_1._Code(\"!==\"),\n    NOT: new code_1._Code(\"!\"),\n    OR: new code_1._Code(\"||\"),\n    AND: new code_1._Code(\"&&\"),\n    ADD: new code_1._Code(\"+\"),\n};\nclass Node {\n    optimizeNodes() {\n        return this;\n    }\n    optimizeNames(_names, _constants) {\n        return this;\n    }\n}\nclass Def extends Node {\n    constructor(varKind, name, rhs) {\n        super();\n        this.varKind = varKind;\n        this.name = name;\n        this.rhs = rhs;\n    }\n    render({ es5, _n }) {\n        const varKind = es5 ? scope_1.varKinds.var : this.varKind;\n        const rhs = this.rhs === undefined ? \"\" : ` = ${this.rhs}`;\n        return `${varKind} ${this.name}${rhs};` + _n;\n    }\n    optimizeNames(names, constants) {\n        if (!names[this.name.str])\n            return;\n        if (this.rhs)\n            this.rhs = optimizeExpr(this.rhs, names, constants);\n        return this;\n    }\n    get names() {\n        return this.rhs instanceof code_1._CodeOrName ? this.rhs.names : {};\n    }\n}\nclass Assign extends Node {\n    constructor(lhs, rhs, sideEffects) {\n        super();\n        this.lhs = lhs;\n        this.rhs = rhs;\n        this.sideEffects = sideEffects;\n    }\n    render({ _n }) {\n        return `${this.lhs} = ${this.rhs};` + _n;\n    }\n    optimizeNames(names, constants) {\n        if (this.lhs instanceof code_1.Name && !names[this.lhs.str] && !this.sideEffects)\n            return;\n        this.rhs = optimizeExpr(this.rhs, names, constants);\n        return this;\n    }\n    get names() {\n        const names = this.lhs instanceof code_1.Name ? {} : { ...this.lhs.names };\n        return addExprNames(names, this.rhs);\n    }\n}\nclass AssignOp extends Assign {\n    constructor(lhs, op, rhs, sideEffects) {\n        super(lhs, rhs, sideEffects);\n        this.op = op;\n    }\n    render({ _n }) {\n        return `${this.lhs} ${this.op}= ${this.rhs};` + _n;\n    }\n}\nclass Label extends Node {\n    constructor(label) {\n        super();\n        this.label = label;\n        this.names = {};\n    }\n    render({ _n }) {\n        return `${this.label}:` + _n;\n    }\n}\nclass Break extends Node {\n    constructor(label) {\n        super();\n        this.label = label;\n        this.names = {};\n    }\n    render({ _n }) {\n        const label = this.label ? ` ${this.label}` : \"\";\n        return `break${label};` + _n;\n    }\n}\nclass Throw extends Node {\n    constructor(error) {\n        super();\n        this.error = error;\n    }\n    render({ _n }) {\n        return `throw ${this.error};` + _n;\n    }\n    get names() {\n        return this.error.names;\n    }\n}\nclass AnyCode extends Node {\n    constructor(code) {\n        super();\n        this.code = code;\n    }\n    render({ _n }) {\n        return `${this.code};` + _n;\n    }\n    optimizeNodes() {\n        return `${this.code}` ? this : undefined;\n    }\n    optimizeNames(names, constants) {\n        this.code = optimizeExpr(this.code, names, constants);\n        return this;\n    }\n    get names() {\n        return this.code instanceof code_1._CodeOrName ? this.code.names : {};\n    }\n}\nclass ParentNode extends Node {\n    constructor(nodes = []) {\n        super();\n        this.nodes = nodes;\n    }\n    render(opts) {\n        return this.nodes.reduce((code, n) => code + n.render(opts), \"\");\n    }\n    optimizeNodes() {\n        const { nodes } = this;\n        let i = nodes.length;\n        while (i--) {\n            const n = nodes[i].optimizeNodes();\n            if (Array.isArray(n))\n                nodes.splice(i, 1, ...n);\n            else if (n)\n                nodes[i] = n;\n            else\n                nodes.splice(i, 1);\n        }\n        return nodes.length > 0 ? this : undefined;\n    }\n    optimizeNames(names, constants) {\n        const { nodes } = this;\n        let i = nodes.length;\n        while (i--) {\n            // iterating backwards improves 1-pass optimization\n            const n = nodes[i];\n            if (n.optimizeNames(names, constants))\n                continue;\n            subtractNames(names, n.names);\n            nodes.splice(i, 1);\n        }\n        return nodes.length > 0 ? this : undefined;\n    }\n    get names() {\n        return this.nodes.reduce((names, n) => addNames(names, n.names), {});\n    }\n}\nclass BlockNode extends ParentNode {\n    render(opts) {\n        return \"{\" + opts._n + super.render(opts) + \"}\" + opts._n;\n    }\n}\nclass Root extends ParentNode {\n}\nclass Else extends BlockNode {\n}\nElse.kind = \"else\";\nclass If extends BlockNode {\n    constructor(condition, nodes) {\n        super(nodes);\n        this.condition = condition;\n    }\n    render(opts) {\n        let code = `if(${this.condition})` + super.render(opts);\n        if (this.else)\n            code += \"else \" + this.else.render(opts);\n        return code;\n    }\n    optimizeNodes() {\n        super.optimizeNodes();\n        const cond = this.condition;\n        if (cond === true)\n            return this.nodes; // else is ignored here\n        let e = this.else;\n        if (e) {\n            const ns = e.optimizeNodes();\n            e = this.else = Array.isArray(ns) ? new Else(ns) : ns;\n        }\n        if (e) {\n            if (cond === false)\n                return e instanceof If ? e : e.nodes;\n            if (this.nodes.length)\n                return this;\n            return new If(not(cond), e instanceof If ? [e] : e.nodes);\n        }\n        if (cond === false || !this.nodes.length)\n            return undefined;\n        return this;\n    }\n    optimizeNames(names, constants) {\n        var _a;\n        this.else = (_a = this.else) === null || _a === void 0 ? void 0 : _a.optimizeNames(names, constants);\n        if (!(super.optimizeNames(names, constants) || this.else))\n            return;\n        this.condition = optimizeExpr(this.condition, names, constants);\n        return this;\n    }\n    get names() {\n        const names = super.names;\n        addExprNames(names, this.condition);\n        if (this.else)\n            addNames(names, this.else.names);\n        return names;\n    }\n}\nIf.kind = \"if\";\nclass For extends BlockNode {\n}\nFor.kind = \"for\";\nclass ForLoop extends For {\n    constructor(iteration) {\n        super();\n        this.iteration = iteration;\n    }\n    render(opts) {\n        return `for(${this.iteration})` + super.render(opts);\n    }\n    optimizeNames(names, constants) {\n        if (!super.optimizeNames(names, constants))\n            return;\n        this.iteration = optimizeExpr(this.iteration, names, constants);\n        return this;\n    }\n    get names() {\n        return addNames(super.names, this.iteration.names);\n    }\n}\nclass ForRange extends For {\n    constructor(varKind, name, from, to) {\n        super();\n        this.varKind = varKind;\n        this.name = name;\n        this.from = from;\n        this.to = to;\n    }\n    render(opts) {\n        const varKind = opts.es5 ? scope_1.varKinds.var : this.varKind;\n        const { name, from, to } = this;\n        return `for(${varKind} ${name}=${from}; ${name}<${to}; ${name}++)` + super.render(opts);\n    }\n    get names() {\n        const names = addExprNames(super.names, this.from);\n        return addExprNames(names, this.to);\n    }\n}\nclass ForIter extends For {\n    constructor(loop, varKind, name, iterable) {\n        super();\n        this.loop = loop;\n        this.varKind = varKind;\n        this.name = name;\n        this.iterable = iterable;\n    }\n    render(opts) {\n        return `for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})` + super.render(opts);\n    }\n    optimizeNames(names, constants) {\n        if (!super.optimizeNames(names, constants))\n            return;\n        this.iterable = optimizeExpr(this.iterable, names, constants);\n        return this;\n    }\n    get names() {\n        return addNames(super.names, this.iterable.names);\n    }\n}\nclass Func extends BlockNode {\n    constructor(name, args, async) {\n        super();\n        this.name = name;\n        this.args = args;\n        this.async = async;\n    }\n    render(opts) {\n        const _async = this.async ? \"async \" : \"\";\n        return `${_async}function ${this.name}(${this.args})` + super.render(opts);\n    }\n}\nFunc.kind = \"func\";\nclass Return extends ParentNode {\n    render(opts) {\n        return \"return \" + super.render(opts);\n    }\n}\nReturn.kind = \"return\";\nclass Try extends BlockNode {\n    render(opts) {\n        let code = \"try\" + super.render(opts);\n        if (this.catch)\n            code += this.catch.render(opts);\n        if (this.finally)\n            code += this.finally.render(opts);\n        return code;\n    }\n    optimizeNodes() {\n        var _a, _b;\n        super.optimizeNodes();\n        (_a = this.catch) === null || _a === void 0 ? void 0 : _a.optimizeNodes();\n        (_b = this.finally) === null || _b === void 0 ? void 0 : _b.optimizeNodes();\n        return this;\n    }\n    optimizeNames(names, constants) {\n        var _a, _b;\n        super.optimizeNames(names, constants);\n        (_a = this.catch) === null || _a === void 0 ? void 0 : _a.optimizeNames(names, constants);\n        (_b = this.finally) === null || _b === void 0 ? void 0 : _b.optimizeNames(names, constants);\n        return this;\n    }\n    get names() {\n        const names = super.names;\n        if (this.catch)\n            addNames(names, this.catch.names);\n        if (this.finally)\n            addNames(names, this.finally.names);\n        return names;\n    }\n}\nclass Catch extends BlockNode {\n    constructor(error) {\n        super();\n        this.error = error;\n    }\n    render(opts) {\n        return `catch(${this.error})` + super.render(opts);\n    }\n}\nCatch.kind = \"catch\";\nclass Finally extends BlockNode {\n    render(opts) {\n        return \"finally\" + super.render(opts);\n    }\n}\nFinally.kind = \"finally\";\nclass CodeGen {\n    constructor(extScope, opts = {}) {\n        this._values = {};\n        this._blockStarts = [];\n        this._constants = {};\n        this.opts = { ...opts, _n: opts.lines ? \"\\n\" : \"\" };\n        this._extScope = extScope;\n        this._scope = new scope_1.Scope({ parent: extScope });\n        this._nodes = [new Root()];\n    }\n    toString() {\n        return this._root.render(this.opts);\n    }\n    // returns unique name in the internal scope\n    name(prefix) {\n        return this._scope.name(prefix);\n    }\n    // reserves unique name in the external scope\n    scopeName(prefix) {\n        return this._extScope.name(prefix);\n    }\n    // reserves unique name in the external scope and assigns value to it\n    scopeValue(prefixOrName, value) {\n        const name = this._extScope.value(prefixOrName, value);\n        const vs = this._values[name.prefix] || (this._values[name.prefix] = new Set());\n        vs.add(name);\n        return name;\n    }\n    getScopeValue(prefix, keyOrRef) {\n        return this._extScope.getValue(prefix, keyOrRef);\n    }\n    // return code that assigns values in the external scope to the names that are used internally\n    // (same names that were returned by gen.scopeName or gen.scopeValue)\n    scopeRefs(scopeName) {\n        return this._extScope.scopeRefs(scopeName, this._values);\n    }\n    scopeCode() {\n        return this._extScope.scopeCode(this._values);\n    }\n    _def(varKind, nameOrPrefix, rhs, constant) {\n        const name = this._scope.toName(nameOrPrefix);\n        if (rhs !== undefined && constant)\n            this._constants[name.str] = rhs;\n        this._leafNode(new Def(varKind, name, rhs));\n        return name;\n    }\n    // `const` declaration (`var` in es5 mode)\n    const(nameOrPrefix, rhs, _constant) {\n        return this._def(scope_1.varKinds.const, nameOrPrefix, rhs, _constant);\n    }\n    // `let` declaration with optional assignment (`var` in es5 mode)\n    let(nameOrPrefix, rhs, _constant) {\n        return this._def(scope_1.varKinds.let, nameOrPrefix, rhs, _constant);\n    }\n    // `var` declaration with optional assignment\n    var(nameOrPrefix, rhs, _constant) {\n        return this._def(scope_1.varKinds.var, nameOrPrefix, rhs, _constant);\n    }\n    // assignment code\n    assign(lhs, rhs, sideEffects) {\n        return this._leafNode(new Assign(lhs, rhs, sideEffects));\n    }\n    // `+=` code\n    add(lhs, rhs) {\n        return this._leafNode(new AssignOp(lhs, exports.operators.ADD, rhs));\n    }\n    // appends passed SafeExpr to code or executes Block\n    code(c) {\n        if (typeof c == \"function\")\n            c();\n        else if (c !== code_1.nil)\n            this._leafNode(new AnyCode(c));\n        return this;\n    }\n    // returns code for object literal for the passed argument list of key-value pairs\n    object(...keyValues) {\n        const code = [\"{\"];\n        for (const [key, value] of keyValues) {\n            if (code.length > 1)\n                code.push(\",\");\n            code.push(key);\n            if (key !== value || this.opts.es5) {\n                code.push(\":\");\n                (0, code_1.addCodeArg)(code, value);\n            }\n        }\n        code.push(\"}\");\n        return new code_1._Code(code);\n    }\n    // `if` clause (or statement if `thenBody` and, optionally, `elseBody` are passed)\n    if(condition, thenBody, elseBody) {\n        this._blockNode(new If(condition));\n        if (thenBody && elseBody) {\n            this.code(thenBody).else().code(elseBody).endIf();\n        }\n        else if (thenBody) {\n            this.code(thenBody).endIf();\n        }\n        else if (elseBody) {\n            throw new Error('CodeGen: \"else\" body without \"then\" body');\n        }\n        return this;\n    }\n    // `else if` clause - invalid without `if` or after `else` clauses\n    elseIf(condition) {\n        return this._elseNode(new If(condition));\n    }\n    // `else` clause - only valid after `if` or `else if` clauses\n    else() {\n        return this._elseNode(new Else());\n    }\n    // end `if` statement (needed if gen.if was used only with condition)\n    endIf() {\n        return this._endBlockNode(If, Else);\n    }\n    _for(node, forBody) {\n        this._blockNode(node);\n        if (forBody)\n            this.code(forBody).endFor();\n        return this;\n    }\n    // a generic `for` clause (or statement if `forBody` is passed)\n    for(iteration, forBody) {\n        return this._for(new ForLoop(iteration), forBody);\n    }\n    // `for` statement for a range of values\n    forRange(nameOrPrefix, from, to, forBody, varKind = this.opts.es5 ? scope_1.varKinds.var : scope_1.varKinds.let) {\n        const name = this._scope.toName(nameOrPrefix);\n        return this._for(new ForRange(varKind, name, from, to), () => forBody(name));\n    }\n    // `for-of` statement (in es5 mode replace with a normal for loop)\n    forOf(nameOrPrefix, iterable, forBody, varKind = scope_1.varKinds.const) {\n        const name = this._scope.toName(nameOrPrefix);\n        if (this.opts.es5) {\n            const arr = iterable instanceof code_1.Name ? iterable : this.var(\"_arr\", iterable);\n            return this.forRange(\"_i\", 0, (0, code_1._) `${arr}.length`, (i) => {\n                this.var(name, (0, code_1._) `${arr}[${i}]`);\n                forBody(name);\n            });\n        }\n        return this._for(new ForIter(\"of\", varKind, name, iterable), () => forBody(name));\n    }\n    // `for-in` statement.\n    // With option `ownProperties` replaced with a `for-of` loop for object keys\n    forIn(nameOrPrefix, obj, forBody, varKind = this.opts.es5 ? scope_1.varKinds.var : scope_1.varKinds.const) {\n        if (this.opts.ownProperties) {\n            return this.forOf(nameOrPrefix, (0, code_1._) `Object.keys(${obj})`, forBody);\n        }\n        const name = this._scope.toName(nameOrPrefix);\n        return this._for(new ForIter(\"in\", varKind, name, obj), () => forBody(name));\n    }\n    // end `for` loop\n    endFor() {\n        return this._endBlockNode(For);\n    }\n    // `label` statement\n    label(label) {\n        return this._leafNode(new Label(label));\n    }\n    // `break` statement\n    break(label) {\n        return this._leafNode(new Break(label));\n    }\n    // `return` statement\n    return(value) {\n        const node = new Return();\n        this._blockNode(node);\n        this.code(value);\n        if (node.nodes.length !== 1)\n            throw new Error('CodeGen: \"return\" should have one node');\n        return this._endBlockNode(Return);\n    }\n    // `try` statement\n    try(tryBody, catchCode, finallyCode) {\n        if (!catchCode && !finallyCode)\n            throw new Error('CodeGen: \"try\" without \"catch\" and \"finally\"');\n        const node = new Try();\n        this._blockNode(node);\n        this.code(tryBody);\n        if (catchCode) {\n            const error = this.name(\"e\");\n            this._currNode = node.catch = new Catch(error);\n            catchCode(error);\n        }\n        if (finallyCode) {\n            this._currNode = node.finally = new Finally();\n            this.code(finallyCode);\n        }\n        return this._endBlockNode(Catch, Finally);\n    }\n    // `throw` statement\n    throw(error) {\n        return this._leafNode(new Throw(error));\n    }\n    // start self-balancing block\n    block(body, nodeCount) {\n        this._blockStarts.push(this._nodes.length);\n        if (body)\n            this.code(body).endBlock(nodeCount);\n        return this;\n    }\n    // end the current self-balancing block\n    endBlock(nodeCount) {\n        const len = this._blockStarts.pop();\n        if (len === undefined)\n            throw new Error(\"CodeGen: not in self-balancing block\");\n        const toClose = this._nodes.length - len;\n        if (toClose < 0 || (nodeCount !== undefined && toClose !== nodeCount)) {\n            throw new Error(`CodeGen: wrong number of nodes: ${toClose} vs ${nodeCount} expected`);\n        }\n        this._nodes.length = len;\n        return this;\n    }\n    // `function` heading (or definition if funcBody is passed)\n    func(name, args = code_1.nil, async, funcBody) {\n        this._blockNode(new Func(name, args, async));\n        if (funcBody)\n            this.code(funcBody).endFunc();\n        return this;\n    }\n    // end function definition\n    endFunc() {\n        return this._endBlockNode(Func);\n    }\n    optimize(n = 1) {\n        while (n-- > 0) {\n            this._root.optimizeNodes();\n            this._root.optimizeNames(this._root.names, this._constants);\n        }\n    }\n    _leafNode(node) {\n        this._currNode.nodes.push(node);\n        return this;\n    }\n    _blockNode(node) {\n        this._currNode.nodes.push(node);\n        this._nodes.push(node);\n    }\n    _endBlockNode(N1, N2) {\n        const n = this._currNode;\n        if (n instanceof N1 || (N2 && n instanceof N2)) {\n            this._nodes.pop();\n            return this;\n        }\n        throw new Error(`CodeGen: not in block \"${N2 ? `${N1.kind}/${N2.kind}` : N1.kind}\"`);\n    }\n    _elseNode(node) {\n        const n = this._currNode;\n        if (!(n instanceof If)) {\n            throw new Error('CodeGen: \"else\" without \"if\"');\n        }\n        this._currNode = n.else = node;\n        return this;\n    }\n    get _root() {\n        return this._nodes[0];\n    }\n    get _currNode() {\n        const ns = this._nodes;\n        return ns[ns.length - 1];\n    }\n    set _currNode(node) {\n        const ns = this._nodes;\n        ns[ns.length - 1] = node;\n    }\n}\nexports.CodeGen = CodeGen;\nfunction addNames(names, from) {\n    for (const n in from)\n        names[n] = (names[n] || 0) + (from[n] || 0);\n    return names;\n}\nfunction addExprNames(names, from) {\n    return from instanceof code_1._CodeOrName ? addNames(names, from.names) : names;\n}\nfunction optimizeExpr(expr, names, constants) {\n    if (expr instanceof code_1.Name)\n        return replaceName(expr);\n    if (!canOptimize(expr))\n        return expr;\n    return new code_1._Code(expr._items.reduce((items, c) => {\n        if (c instanceof code_1.Name)\n            c = replaceName(c);\n        if (c instanceof code_1._Code)\n            items.push(...c._items);\n        else\n            items.push(c);\n        return items;\n    }, []));\n    function replaceName(n) {\n        const c = constants[n.str];\n        if (c === undefined || names[n.str] !== 1)\n            return n;\n        delete names[n.str];\n        return c;\n    }\n    function canOptimize(e) {\n        return (e instanceof code_1._Code &&\n            e._items.some((c) => c instanceof code_1.Name && names[c.str] === 1 && constants[c.str] !== undefined));\n    }\n}\nfunction subtractNames(names, from) {\n    for (const n in from)\n        names[n] = (names[n] || 0) - (from[n] || 0);\n}\nfunction not(x) {\n    return typeof x == \"boolean\" || typeof x == \"number\" || x === null ? !x : (0, code_1._) `!${par(x)}`;\n}\nexports.not = not;\nconst andCode = mappend(exports.operators.AND);\n// boolean AND (&&) expression with the passed arguments\nfunction and(...args) {\n    return args.reduce(andCode);\n}\nexports.and = and;\nconst orCode = mappend(exports.operators.OR);\n// boolean OR (||) expression with the passed arguments\nfunction or(...args) {\n    return args.reduce(orCode);\n}\nexports.or = or;\nfunction mappend(op) {\n    return (x, y) => (x === code_1.nil ? y : y === code_1.nil ? x : (0, code_1._) `${par(x)} ${op} ${par(y)}`);\n}\nfunction par(x) {\n    return x instanceof code_1.Name ? x : (0, code_1._) `(${x})`;\n}\n//# sourceMappingURL=index.js.map","import * as vscode from 'vscode';\nimport { CorrectionType } from '../models/CorrectionType';\nimport { CorrectionService } from '../services/CorrectionService';\n\nexport class CommandRegistry {\n    private correctionService: CorrectionService;\n\n    constructor() {\n        this.correctionService = new CorrectionService();\n    }\n\n    registerCommands(context: vscode.ExtensionContext): void {\n        // Register grammar correction command\n        const grammarCommand = vscode.commands.registerCommand(\n            'grammarProofreading.correctGrammar',\n            () => this.handleCorrectionCommand(CorrectionType.GRAMMAR)\n        );\n\n        // Register style correction command\n        const styleCommand = vscode.commands.registerCommand(\n            'grammarProofreading.correctStyle',\n            () => this.handleCorrectionCommand(CorrectionType.STYLE)\n        );\n\n        // Register clarity correction command\n        const clarityCommand = vscode.commands.registerCommand(\n            'grammarProofreading.correctClarity',\n            () => this.handleCorrectionCommand(CorrectionType.CLARITY)\n        );\n\n        // Register tone correction command\n        const toneCommand = vscode.commands.registerCommand(\n            'grammarProofreading.correctTone',\n            () => this.handleCorrectionCommand(CorrectionType.TONE)\n        );\n\n        // Register custom correction command\n        const customCommand = vscode.commands.registerCommand(\n            'grammarProofreading.correctCustom',\n            () => this.handleCustomCorrectionCommand()\n        );\n\n        // Register configuration command\n        const configCommand = vscode.commands.registerCommand(\n            'grammarProofreading.openSettings',\n            () => this.openSettings()\n        );\n\n        // Add all commands to context subscriptions\n        context.subscriptions.push(\n            grammarCommand,\n            styleCommand,\n            clarityCommand,\n            toneCommand,\n            customCommand,\n            configCommand\n        );\n    }\n\n    private async handleCorrectionCommand(correctionType: CorrectionType): Promise<void> {\n        try {\n            const result = await this.correctionService.performCorrection(correctionType);\n            \n            if (!result.success) {\n                vscode.window.showErrorMessage(`Correction failed: ${result.error}`);\n            }\n        } catch (error) {\n            const errorMessage = error instanceof Error ? error.message : 'Unknown error occurred';\n            vscode.window.showErrorMessage(`Correction failed: ${errorMessage}`);\n        }\n    }\n\n    private async handleCustomCorrectionCommand(): Promise<void> {\n        try {\n            // Prompt user for custom correction prompt\n            const customPrompt = await vscode.window.showInputBox({\n                prompt: 'Enter your custom correction instructions',\n                placeHolder: 'e.g., Make this text more formal and professional',\n                validateInput: (value) => {\n                    if (!value || value.trim() === '') {\n                        return 'Please enter correction instructions';\n                    }\n                    return null;\n                }\n            });\n\n            if (customPrompt) {\n                const result = await this.correctionService.performCorrection(\n                    CorrectionType.CUSTOM, \n                    customPrompt\n                );\n                \n                if (!result.success) {\n                    vscode.window.showErrorMessage(`Correction failed: ${result.error}`);\n                }\n            }\n        } catch (error) {\n            const errorMessage = error instanceof Error ? error.message : 'Unknown error occurred';\n            vscode.window.showErrorMessage(`Custom correction failed: ${errorMessage}`);\n        }\n    }\n\n    private openSettings(): void {\n        vscode.commands.executeCommand('workbench.action.openSettings', 'grammarProofreading');\n    }\n}","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: \"property name must be valid\",\n    params: ({ params }) => (0, codegen_1._) `{propertyName: ${params.propertyName}}`,\n};\nconst def = {\n    keyword: \"propertyNames\",\n    type: \"object\",\n    schemaType: [\"object\", \"boolean\"],\n    error,\n    code(cxt) {\n        const { gen, schema, data, it } = cxt;\n        if ((0, util_1.alwaysValidSchema)(it, schema))\n            return;\n        const valid = gen.name(\"valid\");\n        gen.forIn(\"key\", data, (key) => {\n            cxt.setParams({ propertyName: key });\n            cxt.subschema({\n                keyword: \"propertyNames\",\n                data: key,\n                dataTypes: [\"string\"],\n                propertyName: key,\n                compositeRule: true,\n            }, valid);\n            gen.if((0, codegen_1.not)(valid), () => {\n                cxt.error(true);\n                if (!it.allErrors)\n                    gen.break();\n            });\n        });\n        cxt.ok(valid);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=propertyNames.js.map","import * as vscode from 'vscode';\nimport fetch from 'node-fetch';\nimport { ExtensionConfiguration, DefaultPromptConfiguration } from '../models/ExtensionConfiguration';\nimport { CorrectionType } from '../models/CorrectionType';\n\nexport class ConfigurationProvider {\n    private static readonly CONFIGURATION_SECTION = 'grammarProofreading';\n\n    getConfiguration(): ExtensionConfiguration {\n        const config = vscode.workspace.getConfiguration(ConfigurationProvider.CONFIGURATION_SECTION);\n        \n        return {\n            apiEndpoint: config.get<string>('apiEndpoint', 'https://api.openai.com/v1/chat/completions'),\n            apiKey: config.get<string>('apiKey', ''),\n            model: config.get<string>('model', 'gpt-3.5-turbo'),\n            maxTokens: config.get<number>('maxTokens', 1000),\n            temperature: config.get<number>('temperature', 0.3),\n            customPrompts: config.get('customPrompts', []),\n            defaultPrompts: this.getDefaultPromptConfiguration()\n        };\n    }\n\n    async updateConfiguration(key: string, value: any, target?: vscode.ConfigurationTarget): Promise<void> {\n        const config = vscode.workspace.getConfiguration(ConfigurationProvider.CONFIGURATION_SECTION);\n        await config.update(key, value, target || vscode.ConfigurationTarget.Global);\n    }\n\n    getDefaultPromptConfiguration(): DefaultPromptConfiguration {\n        const config = vscode.workspace.getConfiguration(ConfigurationProvider.CONFIGURATION_SECTION);\n        \n        return {\n            grammar: config.get<string>('defaultPrompts.grammar') || this.getBuiltInDefaultPrompt(CorrectionType.GRAMMAR),\n            style: config.get<string>('defaultPrompts.style') || this.getBuiltInDefaultPrompt(CorrectionType.STYLE),\n            clarity: config.get<string>('defaultPrompts.clarity') || this.getBuiltInDefaultPrompt(CorrectionType.CLARITY),\n            tone: config.get<string>('defaultPrompts.tone') || this.getBuiltInDefaultPrompt(CorrectionType.TONE)\n        };\n    }\n\n    private getBuiltInDefaultPrompt(correctionType: CorrectionType): string {\n        const builtInDefaults: Record<string, string> = {\n            [CorrectionType.GRAMMAR]: \n                'Please correct any grammatical errors in the following text. Focus on:\\n' +\n                '- Subject-verb agreement\\n' +\n                '- Verb tenses and consistency\\n' +\n                '- Punctuation and capitalization\\n' +\n                '- Sentence structure\\n' +\n                'Preserve the original meaning and style.',\n            [CorrectionType.STYLE]: \n                'Please improve the writing style of the following text. Focus on:\\n' +\n                '- Word choice and vocabulary\\n' +\n                '- Sentence variety and flow\\n' +\n                '- Clarity and conciseness\\n' +\n                '- Professional tone\\n' +\n                'Maintain the author\\'s voice while enhancing readability.',\n            [CorrectionType.CLARITY]: \n                'Please improve the clarity and readability of the following text. Focus on:\\n' +\n                '- Simplifying complex sentences\\n' +\n                '- Removing ambiguity\\n' +\n                '- Improving logical flow\\n' +\n                '- Making concepts more understandable\\n' +\n                'Ensure the message is clear and accessible.',\n            [CorrectionType.TONE]: \n                'Please adjust the tone of the following text to be more appropriate. Focus on:\\n' +\n                '- Consistency in formality level\\n' +\n                '- Appropriate voice for the audience\\n' +\n                '- Professional yet engaging language\\n' +\n                '- Removing inappropriate or inconsistent tone\\n' +\n                'Maintain the core message while improving tone.'\n        };\n\n        return builtInDefaults[correctionType] || 'Please improve the following text.';\n    }\n\n    async updateDefaultPrompt(correctionType: CorrectionType, prompt: string, target?: vscode.ConfigurationTarget): Promise<{ success: boolean; error?: string }> {\n        try {\n            const validation = this.validatePrompt(prompt);\n            if (!validation.isValid) {\n                return { success: false, error: validation.errors.join(', ') };\n            }\n\n            const key = `defaultPrompts.${correctionType}`;\n            await this.updateConfiguration(key, prompt, target);\n            return { success: true };\n        } catch (error) {\n            return { \n                success: false, \n                error: error instanceof Error ? error.message : 'Failed to update prompt' \n            };\n        }\n    }\n\n    async resetDefaultPrompt(correctionType: CorrectionType, target?: vscode.ConfigurationTarget): Promise<{ success: boolean; error?: string }> {\n        try {\n            const builtInDefault = this.getBuiltInDefaultPrompt(correctionType);\n            const key = `defaultPrompts.${correctionType}`;\n            await this.updateConfiguration(key, builtInDefault, target);\n            return { success: true };\n        } catch (error) {\n            return { \n                success: false, \n                error: error instanceof Error ? error.message : 'Failed to reset prompt' \n            };\n        }\n    }\n\n    validatePrompt(prompt: string): { isValid: boolean; errors: string[] } {\n        const errors: string[] = [];\n\n        if (!prompt || prompt.trim() === '') {\n            errors.push('Prompt content cannot be empty');\n            return { isValid: false, errors };\n        }\n\n        if (prompt.trim().length < 10) {\n            errors.push('Prompt content must be at least 10 characters long');\n        }\n\n        if (prompt.length > 2000) {\n            errors.push('Prompt content cannot exceed 2000 characters');\n        }\n\n        // Check for potentially problematic content (only whitespace)\n        if (/^\\s*$/.test(prompt)) {\n            errors.push('Prompt cannot contain only whitespace');\n        }\n\n        return {\n            isValid: errors.length === 0,\n            errors\n        };\n    }\n\n    validateConfiguration(config: ExtensionConfiguration): { isValid: boolean; errors: string[] } {\n        const errors: string[] = [];\n\n        if (!config.apiEndpoint || config.apiEndpoint.trim() === '') {\n            errors.push('API endpoint is required');\n        }\n\n        if (!config.apiKey || config.apiKey.trim() === '') {\n            errors.push('API key is required');\n        }\n\n        if (!config.model || config.model.trim() === '') {\n            errors.push('Model is required');\n        }\n\n        if (config.maxTokens <= 0) {\n            errors.push('Max tokens must be greater than 0');\n        }\n\n        if (config.temperature < 0 || config.temperature > 2) {\n            errors.push('Temperature must be between 0 and 2');\n        }\n\n        try {\n            new URL(config.apiEndpoint);\n        } catch {\n            errors.push('API endpoint must be a valid URL');\n        }\n\n        return {\n            isValid: errors.length === 0,\n            errors\n        };\n    }\n\n    async testConnection(config: ExtensionConfiguration): Promise<{ success: boolean; error?: string }> {\n        try {\n            const response = await fetch(config.apiEndpoint, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${config.apiKey}`\n                },\n                body: JSON.stringify({\n                    model: config.model,\n                    messages: [{ role: 'user', content: 'test' }],\n                    max_tokens: 1\n                })\n            });\n\n            if (response.ok || response.status === 400) {\n                // 400 is acceptable as it means the API is reachable but our test request was minimal\n                return { success: true };\n            } else if (response.status === 401) {\n                return { success: false, error: 'Invalid API key' };\n            } else {\n                return { success: false, error: `API returned status ${response.status}` };\n            }\n        } catch (error) {\n            return { \n                success: false, \n                error: error instanceof Error ? error.message : 'Network error' \n            };\n        }\n    }\n}","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"node:fs\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"node:path\");","import { statSync, createReadStream, promises as fs } from 'node:fs'\nimport { basename } from 'node:path'\nimport DOMException from 'node-domexception'\n\nimport File from './file.js'\nimport Blob from './index.js'\n\nconst { stat } = fs\n\n/**\n * @param {string} path filepath on the disk\n * @param {string} [type] mimetype to use\n */\nconst blobFromSync = (path, type) => fromBlob(statSync(path), path, type)\n\n/**\n * @param {string} path filepath on the disk\n * @param {string} [type] mimetype to use\n * @returns {Promise<Blob>}\n */\nconst blobFrom = (path, type) => stat(path).then(stat => fromBlob(stat, path, type))\n\n/**\n * @param {string} path filepath on the disk\n * @param {string} [type] mimetype to use\n * @returns {Promise<File>}\n */\nconst fileFrom = (path, type) => stat(path).then(stat => fromFile(stat, path, type))\n\n/**\n * @param {string} path filepath on the disk\n * @param {string} [type] mimetype to use\n */\nconst fileFromSync = (path, type) => fromFile(statSync(path), path, type)\n\n// @ts-ignore\nconst fromBlob = (stat, path, type = '') => new Blob([new BlobDataItem({\n  path,\n  size: stat.size,\n  lastModified: stat.mtimeMs,\n  start: 0\n})], { type })\n\n// @ts-ignore\nconst fromFile = (stat, path, type = '') => new File([new BlobDataItem({\n  path,\n  size: stat.size,\n  lastModified: stat.mtimeMs,\n  start: 0\n})], basename(path), { type, lastModified: stat.mtimeMs })\n\n/**\n * This is a blob backed up by a file on the disk\n * with minium requirement. Its wrapped around a Blob as a blobPart\n * so you have no direct access to this.\n *\n * @private\n */\nclass BlobDataItem {\n  #path\n  #start\n\n  constructor (options) {\n    this.#path = options.path\n    this.#start = options.start\n    this.size = options.size\n    this.lastModified = options.lastModified\n  }\n\n  /**\n   * Slicing arguments is first validated and formatted\n   * to not be out of range by Blob.prototype.slice\n   */\n  slice (start, end) {\n    return new BlobDataItem({\n      path: this.#path,\n      lastModified: this.lastModified,\n      size: end - start,\n      start: this.#start + start\n    })\n  }\n\n  async * stream () {\n    const { mtimeMs } = await stat(this.#path)\n    if (mtimeMs > this.lastModified) {\n      throw new DOMException('The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.', 'NotReadableError')\n    }\n    yield * createReadStream(this.#path, {\n      start: this.#start,\n      end: this.#start + this.size - 1\n    })\n  }\n\n  get [Symbol.toStringTag] () {\n    return 'Blob'\n  }\n}\n\nexport default blobFromSync\nexport { File, Blob, blobFrom, blobFromSync, fileFrom, fileFromSync }\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.contentVocabulary = exports.metadataVocabulary = void 0;\nexports.metadataVocabulary = [\n    \"title\",\n    \"description\",\n    \"default\",\n    \"deprecated\",\n    \"readOnly\",\n    \"writeOnly\",\n    \"examples\",\n];\nexports.contentVocabulary = [\n    \"contentMediaType\",\n    \"contentEncoding\",\n    \"contentSchema\",\n];\n//# sourceMappingURL=metadata.js.map","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".extension.js\";\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import * as vscode from 'vscode';\nimport { ExtensionActivator } from './ui/ExtensionActivator';\n\nlet extensionActivator: ExtensionActivator;\n\nexport function activate(context: vscode.ExtensionContext) {\n    extensionActivator = new ExtensionActivator();\n    extensionActivator.activate(context);\n}\n\nexport function deactivate() {\n    if (extensionActivator) {\n        extensionActivator.deactivate();\n    }\n}"],"names":["installedChunks","constructor","this","configProvider","ConfigurationProvider","textProcessor","TextProcessor","apiClient","LLMApiClient","promptManager","PromptManager","performCorrection","correctionType","customPrompt","config","getConfiguration","configValidation","validateConfiguration","isValid","success","error","errors","join","textCapture","captureEditorText","vscode","window","withProgress","location","ProgressLocation","Notification","title","cancellable","async","progress","report","increment","message","prompt","getPrompt","correctionRequest","text","apiEndpoint","apiKey","apiResult","sendCorrectionRequest","replaceResult","replaceEditorText","data","correctedText","showCorrectionExplanation","Error","response","explanation","changes","length","slice","forEach","change","index","original","corrected","reason","undefined","confidence","Math","round","showInformationMessage","modal","commands","executeCommand","getPromptForCorrectionType","updateDefaultPrompt","resetDefaultPrompt","Object","defineProperty","exports","value","validate_1","code_1","util_1","additionalProperties_1","def","keyword","type","schemaType","code","cxt","gen","schema","parentSchema","it","opts","removeAdditional","additionalProperties","default","KeywordCxt","allProps","allSchemaProperties","prop","definedProperties","add","unevaluated","props","mergeEvaluated","toHash","properties","filter","p","alwaysValidSchema","valid","name","hasDefault","applyPropertySchema","if","propertyInData","ownProperties","allErrors","else","var","endIf","ok","useDefaults","compositeRule","subschema","schemaProp","dataProp","module","require","reportTypeError","checkDataTypes","checkDataType","coerceAndCheckDataType","getJSONTypes","getSchemaTypes","DataType","rules_1","applicability_1","errors_1","codegen_1","ts","types","Array","isArray","every","isJSONType","includes","nullable","push","coerceTo","coerceTypes","t","COERCIBLE","has","coerceToTypes","checkTypes","schemaHasRulesForType","wrongType","strictNumbers","Wrong","dataType","let","_","coerced","assign","coerceSpecificType","elseIf","parentData","parentDataProperty","expr","assignParentData","coerceData","Set","strictNums","correct","Correct","EQ","operators","NEQ","cond","numCond","not","_cond","nil","and","dataTypes","array","object","notObj","null","number","integer","typeError","params","schemaValue","schemaCode","schemaRefOrVal","getTypeErrorContext","reportError","isUUID","URN_REG","supportedSchemeNames","wsIsSecure","wsComponent","secure","scheme","httpParse","component","host","httpSerialize","String","toLowerCase","port","path","http","domainHost","parse","serialize","ws","resourceName","query","split","fragment","SCHEMES","https","wss","urn","urnComponent","options","matches","match","nid","nss","schemeHandler","getSchemeHandler","uriComponent","skipEscape","skipNormalize","uuidComponent","uuid","tolerant","setPrototypeOf","isValidSchemeName","indexOf","getRules","jsonTypes","x","groups","rules","string","boolean","post","all","keywords","$data","str","u","unicodeRegExp","regExp","usePattern","fail$data","validateTuple","before","items","validateArray","extraItems","schArr","sch","errSchemaPath","l","fullTuple","minItems","maxItems","strictTuples","msg","checkStrictMode","checkStrictTuple","len","const","i","dataType_1","equal_1","j","itemTypes","loopN","item","indices","for","break","loopN2","eql","useFunc","outer","label","block$data","setParams","some","CorrectionType","comp","op","GT","LT","trackErrors","ifClause","then","hasThen","hasSchema","hasElse","schValid","schCxt","createErrors","validateIf","reset","validateClause","mergeValidEvaluated","pass","regexpCode","getEsmExportName","getProperty","safeStringify","stringify","strConcat","addCodeArg","_Code","Name","IDENTIFIER","_CodeOrName","s","super","test","toString","emptyStr","names","_items","_a","_str","reduce","c","_names","strs","args","plus","res","mergeExprItems","splice","optimize","arg","a","b","JSON","replace","c1","c2","key","rx","equal","keys","RegExp","source","flags","valueOf","prototype","hasOwnProperty","call","valCxt","instancePath","rootData","dynamicAnchors","vErrors","self","scope","json","jsonPos","jsonLen","jsonPart","FetchBaseError","captureStackTrace","Symbol","toStringTag","FetchError","systemError","errno","erroredSysCall","syscall","NAME","isURLSearchParameters","append","delete","get","getAll","set","sort","isBlob","arrayBuffer","stream","pipeline","promisify","INTERNALS","Body","body","size","boundary","Buffer","from","isBuffer","isAnyArrayBuffer","ArrayBuffer","isView","buffer","byteOffset","byteLength","disturbed","on","error_","url","bodyUsed","consumeBody","formData","ct","headers","startsWith","parameters","URLSearchParams","toFormData","blob","buf","TextDecoder","decode","TypeError","alloc","accum","accumBytes","chunk","destroy","readableEnded","_readableState","ended","concat","deprecate","defineProperties","enumerable","clone","instance","highWaterMark","p1","p2","getBoundary","PassThrough","pipe","getNonSpecFormDataBoundary","extractContentType","request","validateHeaderName","validateHeaderValue","Headers","init","result","raw","values","entries","map","isBoxedPrimitive","method","iterator","pair","Proxy","target","receiver","Reflect","callback","thisArg","apply","property","redirectStatus","isRedirect","Response","status","contentType","statusText","counter","redirected","redirect","RangeError","URL","stripURLForUseAsAReferrer","originOnly","protocol","username","password","hash","pathname","search","ReferrerPolicy","isUrlPotentiallyTrustworthy","hostIp","hostIPVersion","isIP","endsWith","isOriginPotentiallyTrustworthy","isRequest","doBadDataWarn","Request","input","parsedURL","toUpperCase","inputBody","signal","referrer","parsedReferrer","follow","compress","agent","insecureHTTPParser","referrerPolicy","format","validateReferrerPolicy","AbortError","supportedSchemas","fetch","options_","Promise","resolve","reject","contentLengthValue","totalBytes","getLengthSync","hasKnownLength","getTotalBytes","Number","isNaN","referrerURLCallback","referrerOriginCallback","policy","referrerSource","referrerURL","referrerOrigin","currentURL","origin","determineRequestsReferrer","lastOffset","href","getSearch","getNodeRequestOptions","uri","firstComma","meta","substring","charset","base64","typeFull","encoding","unescape","send","abort","emit","aborted","abortAndFinalize","finalize","request_","addEventListener","removeEventListener","LAST_CHUNK","previousChunk","isChunkedTransfer","properLastChunkReceived","socket","onSocketClose","errorCallback","onData","compare","prependListener","removeListener","fixResponseChunkedTransferBadEnding","process","version","endedWithEventsCount","_eventsCount","hadError","response_","setTimeout","fromRawHeaders","rawHeaders","statusCode","locationURL","requestOptions","destination","orig","hostname","dest","isDomainOrSubdomain","responseReferrerPolicy","policyTokens","token","parseReferrerPolicyFromHeader","once","responseOptions","statusMessage","codings","zlibOptions","flush","finishFlush","end","writeToStream","catch","id_1","ref_1","core","getData","validateFunctionCode","boolSchema_1","dataType_2","defaults_1","keyword_1","subschema_1","names_1","resolve_1","validateFunction","validateName","schemaEnv","es5","func","$async","funcSourceUrl","dynamicRef","destructureValCxtES5","destructureValCxt","schId","schemaId","schemaCxtHasRules","RULES","isSchemaObj","checkKeywords","checkUnknownRules","$ref","ignoreKeywordsWithRef","schemaHasRulesButRef","logger","warn","checkRefsAndKeywords","typeAndKeywords","errsCount","jtd","schemaKeywords","commentKeyword","$comment","schemaPath","rootName","scopeValue","ref","root","typeErrors","groupKeywords","group","shouldUseGroup","iterateKeywords","strictTypes","includesType","strictTypesError","withTypes","narrowSchemaTypes","checkContextTypes","allowUnionTypes","checkMultipleTypes","rule","shouldUseRule","definition","hasApplicableType","kwdT","schTs","checkKeywordTypes","checkStrictTypes","block","keywordCode","assignDefaults","baseId","strictSchema","checkNoDefault","evaluated","resetEvaluated","ValidationError","return","throw","assignEvaluated","returnResults","topSchemaObjCode","topBoolOrEmptySchema","validateKeywordUsage","validSchemaType","allowUndefined","condition","successAction","failAction","failResult","fail","or","invalid$data","errorParams","errorPaths","_error","reportExtraError","$dataError","keyword$DataError","resetErrorsCount","obj","codeBlock","$dataValid","check$data","validateSchema","st","wrong$DataType","validateSchemaRef","invalid$DataSchema","appl","getSubschema","extendSubschemaData","extendSubschemaMode","nextContext","resolveUrl","uriResolver","updateContext","checkAsyncSchema","subSchemaObjCode","boolOrEmptySchema","subschemaCode","schemaCxt","toName","ruleType","validate","funcKeywordCode","macroKeywordCode","compile","JSON_POINTER","RELATIVE_JSON_POINTER","dataLevel","dataNames","dataPathArr","jsonPointer","exec","up","errorMsg","segments","segment","unescapeJsonPointer","pointerType","min","max","minContains","maxContains","next","validateItemsWithCount","count","validateItems","checkLimits","_valid","forRange","dataPropType","Type","Num","validateSchemaDeps","validatePropertyDeps","depsCount","deps","property_ies","missingProperty","propDeps","schDeps","propertyDeps","schemaDeps","splitDependencies","missing","hasProperty","depProp","checkReportMissingProp","checkMissingProp","reportMissingProp","requestBuilder","RequestBuilder","responseParser","ResponseParser","apiRequest","buildCorrectionRequest","maxTokens","temperature","model","errorText","apiResponse","parseResponse","MissingRefError","CodeGen","Ajv","core_1","draft7_1","discriminator_1","draft7MetaSchema","META_SUPPORT_DATA","META_SCHEMA_ID","_addVocabularies","v","addVocabulary","discriminator","addKeyword","_addDefaultMetaSchema","metaSchema","$dataMetaSchema","addMetaSchema","refs","defaultMeta","getSchema","validation_error_1","ref_error_1","globalThis","ReadableStream","emitWarning","Blob","position","pull","ctrl","enqueue","Uint8Array","close","prec","multipleOfPrecision","invalid","ajv","validation","modifyData","useKeyword","macroSchema","macro","schemaRef","topSchemaRef","checkAsyncKeyword","validateRef","assignValid","_await","passCxt","passContext","passSchema","callValidateCode","modifying","reportErrs","ruleErrs","try","e","validateAsync","validateErrs","validateSync","errs","extendErrors","addErrs","dependencies","kwd","errorsText","callRef","getValidate","compile_1","env","callRootRef","schOrEnv","resolveRef","SchemaEnv","callValidate","schName","inlineRefSchema","addErrorsFrom","addEvaluatedFrom","schEvaluated","dynamicProps","dynamicItems","callAsyncRef","toIterator","parts","part","_Blob","blobParts","encoder","TextEncoder","element","encode","endings","decoder","offset","done","cancel","start","relativeStart","relativeEnd","span","added","subarray","hasInstance","resolveSchema","getCompilingSchema","compileSchema","normalizeId","localRefs","_sch","rootId","getFullPath","lines","_ValidationError","scopeName","errorPath","sourceCode","_compilations","validateCode","scopeRefs","Function","makeValidate","scopeValues","_values","inlineOrCompile","inlineRef","inlineRefs","schEnv","sameSchemaEnv","s1","s2","schemas","refPath","_getFullPath","getJsonPointer","id","schOrRef","schOrFunc","PREVENT_SCOPE_CHANGE","parsedRef","partSchema","unescapeFragment","ucs2length","pos","charCodeAt","additionalItems_1","prefixItems","validateAdditionalItems","useLoop","loopRequired","loopAllRequired","allErrorsMode","forOf","loopUntilMissing","exitOnErrorMode","strictRequired","requiredKey","noPropertyInData","codegen_2","$dataRefSchema","uri_1","defaultRegExp","META_IGNORE_OPTIONS","EXT_SCOPE_NAMES","removedOptions","errorDataPath","jsonPointers","extendRefs","missingRefs","processCode","strictDefaults","strictKeywords","uniqueItems","unknownFormats","cache","ajvErrors","deprecatedOptions","jsPropertySyntax","unicode","requiredOptions","o","_b","_c","_d","_e","_f","_g","_h","_j","_k","_l","_m","_o","_p","_q","_r","_s","_t","_u","_v","_w","_x","_y","_z","_0","strict","_optz","loopEnum","messages","addUsedSchema","validateFormats","int32range","formats","_loading","_cache","Map","ValueScope","prefixes","noLogs","console","log","getLogger","formatOpt","checkOptions","_metaOpts","getMetaSchemaOptions","addInitialFormats","addInitialKeywords","addInitialSchemas","_dataRefSchema","$id","schemaKeyRef","_meta","_addSchema","_compileSchemaEnv","compileAsync","loadSchema","runCompileAsync","_schema","loadMetaSchema","$schema","_compileAsync","checkLoaded","loadMissingSchema","missingSchema","missingRef","_loadSchema","addSchema","_validateSchema","_checkUnique","throwOrLogError","keyRef","getSchEnv","removeSchema","_removeAllSchemas","clear","cacheKey","definitions","kwdOrDef","checkKeyword","eachItem","addRule","keywordMetaschema","k","getKeyword","removeKeyword","findIndex","addFormat","separator","dataVar","keywordsJsonPointers","seg","schemaOrData","regex","getSchemaRefs","_compileMetaSchema","currentOpts","checkOpts","opt","optsSchemas","defs","metaOpts","KEYWORD_NAME","ruleGroup","find","addBeforeRule","implements","_rule","$dataRef","anyOf","getErrorPath","setEvaluated","evaluatedPropsToName","escapeJsonPointer","escapeFragment","schemaHasRules","makeMergeEvaluated","mergeNames","mergeToName","mergeValues","resultToName","to","ps","arr","decodeURIComponent","encodeURIComponent","xs","f","snippets","mode","isNumber","dpType","propertyName","dataContextProps","_nextData","jtdDiscriminator","jtdMetadata","resolver","fmts","fDef","fType","callFormat","validData","invalidFmt","validate$DataFormat","formatDef","unknownMsg","unknownFormat","fmtType","fmtRef","fmtDef","fmt","getFormat","validCondition","validateFormat","validateCorrectionResponse","correctionResponseSchema","isValidCorrectionResponse","bind","isIPv4","stringArrayToHexStripped","acc","nonSimpleDomain","consumeIsZone","consumeHextets","address","output","hex","normalizeIPv6","ind","findToken","isIPV6","ipv6","tokenCount","zone","endipv6Encountered","endIpv6","consume","cursor","getIPV6","newHost","escapedHost","recomposeAuthority","uriTokens","userinfo","ipV6res","normalizeComponentEncoding","esc","escape","removeDotSegments","nextSlash","pop","factory","noop","typeIsObject","rethrowAssertionErrorRejection","setFunctionName","fn","configurable","originalPromise","originalPromiseThen","originalPromiseReject","newPromise","executor","promiseResolvedWith","promiseRejectedWith","PerformPromiseThen","promise","onFulfilled","onRejected","uponPromise","uponFulfillment","uponRejection","transformPromiseWith","fulfillmentHandler","rejectionHandler","setPromiseIsHandledToTrue","_queueMicrotask","queueMicrotask","resolvedPromise","cb","reflectCall","F","V","promiseCall","SimpleQueue","_cursor","_size","_front","_elements","_next","_back","oldBack","newBack","QUEUE_MAX_ARRAY_SIZE","shift","oldFront","newFront","oldCursor","newCursor","elements","node","peek","front","AbortSteps","ErrorSteps","CancelSteps","PullSteps","ReleaseSteps","ReadableStreamReaderGenericInitialize","reader","_ownerReadableStream","_reader","_state","defaultReaderClosedPromiseInitialize","defaultReaderClosedPromiseResolve","defaultReaderClosedPromiseInitializeAsResolved","defaultReaderClosedPromiseInitializeAsRejected","_storedError","ReadableStreamReaderGenericCancel","ReadableStreamCancel","ReadableStreamReaderGenericRelease","defaultReaderClosedPromiseReject","defaultReaderClosedPromiseResetToRejected","_readableStreamController","readerLockException","_closedPromise","_closedPromise_resolve","_closedPromise_reject","NumberIsFinite","isFinite","MathTrunc","trunc","ceil","floor","assertDictionary","context","assertFunction","assertObject","isObject","assertRequiredArgument","assertRequiredField","field","convertUnrestrictedDouble","censorNegativeZero","convertUnsignedLongLongWithEnforceRange","upperBound","MAX_SAFE_INTEGER","integerPart","assertReadableStream","IsReadableStream","AcquireReadableStreamDefaultReader","ReadableStreamDefaultReader","ReadableStreamAddReadRequest","readRequest","_readRequests","ReadableStreamFulfillReadRequest","_closeSteps","_chunkSteps","ReadableStreamGetNumReadRequests","ReadableStreamHasDefaultReader","IsReadableStreamDefaultReader","IsReadableStreamLocked","closed","defaultReaderBrandCheckException","read","resolvePromise","rejectPromise","ReadableStreamDefaultReaderRead","_errorSteps","releaseLock","ReadableStreamDefaultReaderErrorReadRequests","ReadableStreamDefaultReaderRelease","_disturbed","readRequests","AsyncIteratorPrototype","getPrototypeOf","ReadableStreamAsyncIteratorImpl","preventCancel","_ongoingPromise","_isFinished","_preventCancel","nextSteps","_nextSteps","returnSteps","_returnSteps","ReadableStreamAsyncIteratorPrototype","IsReadableStreamAsyncIterator","_asyncIteratorImpl","streamAsyncIteratorBrandCheckException","NumberIsNaN","CreateArrayFromList","CopyDataBlockBytes","destOffset","src","srcOffset","n","TransferArrayBuffer","O","transfer","structuredClone","IsDetachedBuffer","detached","ArrayBufferSlice","begin","GetMethod","SymbolAsyncIterator","asyncIterator","GetIterator","hint","syncIteratorRecord","syncIterable","nextMethod","CreateAsyncFromSyncIterator","CloneAsUint8Array","DequeueValue","container","_queue","_queueTotalSize","EnqueueValueWithSize","Infinity","ResetQueue","isDataViewConstructor","ctor","DataView","ReadableStreamBYOBRequest","view","IsReadableStreamBYOBRequest","byobRequestBrandCheckException","_view","respond","bytesWritten","_associatedReadableByteStreamController","ReadableByteStreamControllerRespond","respondWithNewView","ReadableByteStreamControllerRespondWithNewView","ReadableByteStreamController","byobRequest","IsReadableByteStreamController","byteStreamControllerBrandCheckException","ReadableByteStreamControllerGetBYOBRequest","desiredSize","ReadableByteStreamControllerGetDesiredSize","_closeRequested","state","_controlledReadableByteStream","ReadableByteStreamControllerClose","ReadableByteStreamControllerEnqueue","ReadableByteStreamControllerError","ReadableByteStreamControllerClearPendingPullIntos","_cancelAlgorithm","ReadableByteStreamControllerClearAlgorithms","ReadableByteStreamControllerFillReadRequestFromQueue","autoAllocateChunkSize","_autoAllocateChunkSize","bufferE","pullIntoDescriptor","bufferByteLength","bytesFilled","minimumFill","elementSize","viewConstructor","readerType","_pendingPullIntos","ReadableByteStreamControllerCallPullIfNeeded","firstPullInto","controller","shouldPull","_started","ReadableStreamHasBYOBReader","ReadableStreamGetNumReadIntoRequests","ReadableByteStreamControllerShouldCallPull","_pulling","_pullAgain","_pullAlgorithm","ReadableByteStreamControllerInvalidateBYOBRequest","ReadableByteStreamControllerCommitPullIntoDescriptor","filledView","ReadableByteStreamControllerConvertPullIntoDescriptor","readIntoRequest","_readIntoRequests","ReadableStreamFulfillReadIntoRequest","ReadableByteStreamControllerEnqueueChunkToQueue","ReadableByteStreamControllerEnqueueClonedChunkToQueue","clonedChunk","cloneE","ReadableByteStreamControllerEnqueueDetachedPullIntoToQueue","firstDescriptor","ReadableByteStreamControllerShiftPendingPullInto","ReadableByteStreamControllerFillPullIntoDescriptorFromQueue","maxBytesToCopy","maxBytesFilled","totalBytesToCopyRemaining","ready","maxAlignedBytes","queue","headOfQueue","bytesToCopy","destStart","ReadableByteStreamControllerFillHeadPullIntoDescriptor","ReadableByteStreamControllerHandleQueueDrain","ReadableStreamClose","_byobRequest","ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue","ReadableByteStreamControllerRespondInternal","ReadableByteStreamControllerRespondInClosedState","remainderSize","ReadableByteStreamControllerRespondInReadableState","firstPendingPullInto","transferredBuffer","ReadableByteStreamControllerProcessReadRequestsUsingQueue","ReadableStreamError","entry","create","SetUpReadableStreamBYOBRequest","_strategyHWM","viewByteLength","SetUpReadableByteStreamController","startAlgorithm","pullAlgorithm","cancelAlgorithm","r","convertReadableStreamReaderMode","AcquireReadableStreamBYOBReader","ReadableStreamBYOBReader","ReadableStreamAddReadIntoRequest","IsReadableStreamBYOBReader","byobReaderBrandCheckException","rawOptions","convertByobReadOptions","isDataView","ReadableStreamBYOBReaderRead","ReadableStreamBYOBReaderErrorReadIntoRequests","ReadableStreamBYOBReaderRelease","BYTES_PER_ELEMENT","arrayBufferViewElementSize","emptyView","ReadableByteStreamControllerPullInto","readIntoRequests","ExtractHighWaterMark","strategy","defaultHWM","ExtractSizeAlgorithm","convertQueuingStrategy","convertQueuingStrategySize","convertUnderlyingSinkAbortCallback","convertUnderlyingSinkCloseCallback","convertUnderlyingSinkStartCallback","convertUnderlyingSinkWriteCallback","assertWritableStream","IsWritableStream","supportsAbortController","AbortController","WritableStream","rawUnderlyingSink","rawStrategy","underlyingSink","write","convertUnderlyingSink","InitializeWritableStream","sizeAlgorithm","WritableStreamDefaultController","writeAlgorithm","closeAlgorithm","abortAlgorithm","SetUpWritableStreamDefaultController","SetUpWritableStreamDefaultControllerFromUnderlyingSink","locked","streamBrandCheckException$2","IsWritableStreamLocked","WritableStreamAbort","WritableStreamCloseQueuedOrInFlight","WritableStreamClose","getWriter","AcquireWritableStreamDefaultWriter","WritableStreamDefaultWriter","_writer","_writableStreamController","_writeRequests","_inFlightWriteRequest","_closeRequest","_inFlightCloseRequest","_pendingAbortRequest","_backpressure","_abortReason","_abortController","_promise","wasAlreadyErroring","_resolve","_reject","_reason","_wasAlreadyErroring","WritableStreamStartErroring","closeRequest","writer","defaultWriterReadyPromiseResolve","closeSentinel","WritableStreamDefaultControllerAdvanceQueueIfNeeded","WritableStreamDealWithRejection","WritableStreamFinishErroring","WritableStreamDefaultWriterEnsureReadyPromiseRejected","WritableStreamHasOperationMarkedInFlight","storedError","writeRequest","WritableStreamRejectCloseAndClosedPromiseIfNeeded","abortRequest","defaultWriterClosedPromiseReject","WritableStreamUpdateBackpressure","backpressure","defaultWriterReadyPromiseInitialize","defaultWriterReadyPromiseReset","_ownerWritableStream","defaultWriterReadyPromiseInitializeAsResolved","defaultWriterClosedPromiseInitialize","defaultWriterReadyPromiseInitializeAsRejected","defaultWriterClosedPromiseResolve","defaultWriterClosedPromiseInitializeAsRejected","IsWritableStreamDefaultWriter","defaultWriterBrandCheckException","defaultWriterLockException","WritableStreamDefaultControllerGetDesiredSize","WritableStreamDefaultWriterGetDesiredSize","_readyPromise","WritableStreamDefaultWriterAbort","WritableStreamDefaultWriterClose","WritableStreamDefaultWriterRelease","WritableStreamDefaultWriterWrite","_readyPromiseState","defaultWriterReadyPromiseReject","defaultWriterReadyPromiseResetToRejected","releasedError","_closedPromiseState","defaultWriterClosedPromiseResetToRejected","WritableStreamDefaultWriterEnsureClosedPromiseRejected","chunkSize","_strategySizeAlgorithm","chunkSizeE","WritableStreamDefaultControllerErrorIfNeeded","WritableStreamDefaultControllerGetChunkSize","WritableStreamAddWriteRequest","enqueueE","_controlledWritableStream","WritableStreamDefaultControllerGetBackpressure","WritableStreamDefaultControllerWrite","abortReason","IsWritableStreamDefaultController","defaultControllerBrandCheckException$2","WritableStreamDefaultControllerError","_abortAlgorithm","WritableStreamDefaultControllerClearAlgorithms","createAbortController","_writeAlgorithm","_closeAlgorithm","WritableStreamMarkCloseRequestInFlight","sinkClosePromise","WritableStreamFinishInFlightClose","WritableStreamFinishInFlightCloseWithError","WritableStreamDefaultControllerProcessClose","WritableStreamMarkFirstWriteRequestInFlight","WritableStreamFinishInFlightWrite","WritableStreamFinishInFlightWriteWithError","WritableStreamDefaultControllerProcessWrite","_readyPromise_resolve","_readyPromise_reject","globals","global","DOMException","isDOMExceptionConstructor","getFromGlobal","writable","createPolyfill","ReadableStreamPipeTo","preventClose","preventAbort","shuttingDown","currentWrite","actions","shutdownWithAction","action","isOrBecomesErrored","shutdown","WritableStreamDefaultWriterCloseWithErrorPropagation","destClosed","waitForWritesToFinish","oldCurrentWrite","originalIsError","originalError","doTheRest","newError","isError","resolveLoop","rejectLoop","resolveRead","rejectRead","ReadableStreamDefaultController","IsReadableStreamDefaultController","defaultControllerBrandCheckException$1","ReadableStreamDefaultControllerGetDesiredSize","ReadableStreamDefaultControllerCanCloseOrEnqueue","ReadableStreamDefaultControllerClose","ReadableStreamDefaultControllerEnqueue","ReadableStreamDefaultControllerError","ReadableStreamDefaultControllerClearAlgorithms","_controlledReadableStream","ReadableStreamDefaultControllerCallPullIfNeeded","ReadableStreamDefaultControllerShouldCallPull","SetUpReadableStreamDefaultController","ReadableStreamFrom","getReader","CreateReadableStream","readPromise","readResult","ReadableStreamFromDefaultReader","asyncIterable","iteratorRecord","nextResult","IteratorNext","iterResult","Boolean","IteratorComplete","IteratorValue","returnMethod","returnResult","ReadableStreamFromIterable","convertUnderlyingSourceCancelCallback","convertUnderlyingSourcePullCallback","convertUnderlyingSourceStartCallback","convertReadableStreamType","convertPipeOptions","isAbortSignal","assertAbortSignal","rawUnderlyingSource","underlyingSource","convertUnderlyingDefaultOrByteSource","InitializeReadableStream","underlyingByteSource","SetUpReadableByteStreamControllerFromUnderlyingSource","SetUpReadableStreamDefaultControllerFromUnderlyingSource","streamBrandCheckException$1","convertReaderOptions","pipeThrough","rawTransform","transform","readable","convertReadableWritablePair","pipeTo","tee","reason1","reason2","branch1","branch2","resolveCancelPromise","reading","readAgainForBranch1","readAgainForBranch2","canceled1","canceled2","cancelPromise","forwardReaderError","thisReader","pullWithDefaultReader","chunk1","chunk2","pull1Algorithm","pull2Algorithm","pullWithBYOBReader","forBranch2","byobBranch","otherBranch","byobCanceled","otherCanceled","CreateReadableByteStream","compositeReason","cancelResult","ReadableByteStreamTee","readAgain","ReadableStreamDefaultTee","impl","AcquireReadableStreamAsyncIterator","convertIteratorOptions","convertQueuingStrategyInit","byteLengthSizeFunction","ByteLengthQueuingStrategy","_byteLengthQueuingStrategyHighWaterMark","IsByteLengthQueuingStrategy","byteLengthBrandCheckException","countSizeFunction","CountQueuingStrategy","_countQueuingStrategyHighWaterMark","IsCountQueuingStrategy","countBrandCheckException","convertTransformerFlushCallback","convertTransformerStartCallback","convertTransformerTransformCallback","convertTransformerCancelCallback","TransformStream","rawTransformer","rawWritableStrategy","rawReadableStrategy","writableStrategy","readableStrategy","transformer","readableType","writableType","convertTransformer","readableHighWaterMark","readableSizeAlgorithm","writableHighWaterMark","writableSizeAlgorithm","startPromise_resolve","startPromise","_writable","CreateWritableStream","_transformStreamController","_backpressureChangePromise","TransformStreamDefaultControllerPerformTransform","TransformStreamDefaultSinkWriteAlgorithm","_finishPromise","_readable","_finishPromise_resolve","_finishPromise_reject","flushPromise","_flushAlgorithm","TransformStreamDefaultControllerClearAlgorithms","defaultControllerFinishPromiseReject","defaultControllerFinishPromiseResolve","TransformStreamDefaultSinkCloseAlgorithm","TransformStreamDefaultSinkAbortAlgorithm","TransformStreamSetBackpressure","TransformStreamDefaultSourcePullAlgorithm","TransformStreamUnblockWrite","TransformStreamDefaultSourceCancelAlgorithm","_backpressureChangePromise_resolve","InitializeTransformStream","TransformStreamDefaultController","transformAlgorithm","flushAlgorithm","TransformStreamDefaultControllerEnqueue","transformResultE","_controlledTransformStream","_transformAlgorithm","SetUpTransformStreamDefaultController","SetUpTransformStreamDefaultControllerFromTransformer","IsTransformStream","streamBrandCheckException","TransformStreamError","TransformStreamErrorWritableAndUnblockWrite","IsTransformStreamDefaultController","defaultControllerBrandCheckException","terminate","TransformStreamDefaultControllerTerminate","readableController","ReadableStreamDefaultControllerHasBackpressure","MessageChannel","port1","ab","postMessage","err","util_2","patterns","alwaysValidPatterns","checkProperties","allowMatchingProperties","checkMatchingProperties","pat","validateProperties","forIn","alwaysValid","Str","validatePatternProperties","items_1","validateUnion","schemaProperties","isOwnProperty","hasPropFunc","schemaMap","dataAndSchema","newRegExp","pattern","validArr","notValid","ops","KWDs","maximum","okStr","LTE","minimum","GTE","exclusiveMaximum","exclusiveMinimum","activeEditor","activeTextEditor","document","selection","isEmpty","getText","trim","newText","edit","editBuilder","fullRange","Range","positionAt","getEditorState","hasActiveEditor","hasSelection","isReadOnly","isUntitled","documentLength","createUndoPoint","description","validationService","ValidationService","choices","content","parsedContent","jsonMatch","parseError","validation_1","applicator_1","format_1","metadata_1","draft7Vocabularies","metadataVocabulary","contentVocabulary","passing","prefixItems_1","items2020_1","contains_1","dependencies_1","propertyNames_1","properties_1","patternProperties_1","not_1","anyOf_1","oneOf_1","allOf_1","if_1","thenElse_1","draft2020","applicator","types_1","discrError","tagName","DiscrError","Tag","tag","oneOf","mapping","applyTagSchema","oneOfMapping","topRequired","hasRequired","tagRequired","propSch","addMappings","required","addMapping","enum","tagValue","getMapping","Mapping","validateMapping","traverse","SIMPLE_INLINED","limit","hasRef","countKeys","REF_KEYWORDS","normalize","TRAILING_SLASH_HASH","ANCHOR","baseIds","pathPrefix","schemaRefs","allKeys","jsonPtr","parentJsonPtr","fullPath","innerBaseId","addRef","ambiguos","checkAmbiguosRef","addAnchor","anchor","$anchor","$dynamicAnchor","sch1","sch2","limitNumber_1","multipleOf_1","limitLength_1","pattern_1","limitProperties_1","required_1","limitItems_1","uniqueItems_1","const_1","enum_1","_traverse","pre","rootSchema","parentKeyword","keyIndex","arrayKeywords","propsKeywords","escapeJsonPtr","skipKeywords","additionalItems","contains","propertyNames","allOf","$defs","patternProperties","multipleOf","maxLength","minLength","maxProperties","minProperties","_File","fileBits","fileName","arguments","lastModified","Date","now","ucs2length_1","defaultPrompts","initializeDefaultPrompts","GRAMMAR","STYLE","CLARITY","TONE","customPromptName","getCustomPrompt","getDefaultPromptConfiguration","customPrompts","addCustomPrompt","existingIndex","updateConfiguration","removeCustomPrompt","filteredPrompts","getAllCustomPrompts","getDefaultPrompts","validatePrompt","getConfiguredDefaultPrompt","getBuiltInDefaultPrompt","ValueScopeName","Scope","varKinds","UsedValueState","ValueError","parent","_prefixes","_parent","nameOrPrefix","prefix","_newName","_nameGroup","nameStr","setValue","itemIndex","scopePath","line","_scope","_n","valueKey","vs","_name","getValue","keyOrRef","_reduceValues","scopeCode","usedValues","getCode","valueCode","nameSet","Started","Completed","assignDefault","defaultValue","childData","ty","commandRegistry","CommandRegistry","statusBarManager","StatusBarManager","activate","registerCommands","initialize","deactivate","dispose","role","buildSystemPrompt","buildUserPrompt","max_tokens","basePrompt","resolveComponent","base","relative","skipNormalization","lastIndexOf","cmpts","reference","authority","absolutePath","URI_PARSE","parsed","parseInt","ipv6result","unicodeSupport","domainToASCII","encodeURI","fastUri","baseURI","relativeURI","schemelessOptions","resolved","uriA","uriB","h","random","m","FormData","d","formDataToBlob","B","padStart","getEql","vSchema","equalCode","additionalProperty","patProps","deleteAdditional","additionalPropertyCode","applyAdditionalSchema","definedProp","propsSchema","isAdditional","keywordError","addError","errObj","returnErrors","overrideAllErrors","errorObjectCode","verbose","E","keyValues","errorInstancePath","errorSchemaPath","extraErrorProps","errorObject","instPath","schPath","boolError","falseSchemaError","statusBarItem","createStatusBarItem","StatusBarAlignment","Right","tooltip","command","show","subscriptions","editorChangeListener","onDidChangeActiveTextEditor","updateStatus","color","ThemeColor","showProgress","hideProgress","scope_1","code_2","scope_2","NOT","OR","AND","ADD","Node","optimizeNodes","optimizeNames","_constants","Def","varKind","rhs","render","constants","optimizeExpr","Assign","lhs","sideEffects","addExprNames","AssignOp","Label","Break","Throw","AnyCode","ParentNode","nodes","subtractNames","addNames","BlockNode","Root","Else","kind","If","ns","For","ForLoop","iteration","ForRange","ForIter","loop","iterable","Func","Return","Try","finally","Catch","Finally","replaceName","par","extScope","_blockStarts","_extScope","_nodes","_root","prefixOrName","getScopeValue","_def","constant","_leafNode","_constant","thenBody","elseBody","_blockNode","_elseNode","_endBlockNode","_for","forBody","endFor","tryBody","catchCode","finallyCode","_currNode","nodeCount","endBlock","toClose","funcBody","endFunc","N1","N2","andCode","mappend","orCode","y","correctionService","CorrectionService","grammarCommand","registerCommand","handleCorrectionCommand","styleCommand","clarityCommand","toneCommand","customCommand","handleCustomCorrectionCommand","configCommand","openSettings","showErrorMessage","errorMessage","showInputBox","placeHolder","validateInput","CUSTOM","workspace","CONFIGURATION_SECTION","update","ConfigurationTarget","Global","grammar","style","clarity","tone","builtInDefault","testConnection","stat","blobFromSync","fromBlob","statSync","blobFrom","fileFrom","fromFile","fileFromSync","BlobDataItem","mtimeMs","basename","createReadStream","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","chunkId","promises","installedChunk","moreModules","modules","chunkIds","ids","runtime","installChunk","extensionActivator","ExtensionActivator"],"ignoreList":[],"sourceRoot":""}